/*! For license information please see tracking-tag-dev.min.js.LICENSE.txt */
!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return Ot},getRequestParameters:function(){return It}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return Ce}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",fetch:"csFetch"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(n){window[s.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),h("csNode",s.nodeProperties,t.Node.prototype,"get"),h("csElement",s.elementProperties,t.Element.prototype,"get"),h("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),h("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),h("csEvent",s.eventProperties,t.Event.prototype,"get"),h("csNavigator",s.navigatorProperties,t.navigator,"value")}function h(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,h=u?n.propertyName:n;(s||h in i)&&(window["".concat(t+h)]=e(i,h,r),u&&(window["".concat(t+h)]=window["".concat(t+h)].bind(n.binding)))}))}function o(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Element.prototype.attachShadow){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return o("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(qs){o("Critical","failed to copy references from window: ".concat(qs.message))}function c(t,n){var i=f(csString.prototype.toLowerCase.call(t.localName));return n?csString.prototype.replace.call(i,n,"$1".concat("-static")):i}function f(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function a(t){return t.nodeType===Node.ELEMENT_NODE}function v(t){return t.nodeType===Node.TEXT_NODE}function l(t){return a(t)&&"a"===t.localName}function d(t){return function(t){return a(t)&&"link"===t.localName}(t)&&"stylesheet"===t.rel}function w(t){return a(t)&&"img"===t.localName}function y(t){return a(t)&&"style"===t.localName}function p(t){return a(t)&&"input"===t.localName}function m(t){return a(t)&&"textarea"===t.localName}function g(t){return a(t)&&"script"===t.localName}function A(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}function E(t){return t.nodeType===Node.DOCUMENT_NODE}function S(t){return A(t)&&"host"in t&&"mode"in t}var b=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function T(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return R(n)&&csArray.prototype.push.call(i,N),{ancestors:i,selectionRoot:n}}function R(t){return it.isValidElement(t)}var k=Number.MAX_SAFE_INTEGER||9007199254740991;function O(){}function I(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function x(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var L=34164e6,_={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=k),Math.floor(Math.random()*t)}},C="function"==typeof Symbol?Symbol("json"):null;var M,P=C?function(t){if(t[C])return t[C];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+P(t[0]),i=1;i<t.length;i++)n+=","+P(t[i]);return n+"]"}return t[C]=csJSON.stringify(t)}:csJSON.stringify;function D(t){return F(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function U(t){return t===parseInt(t,10)}function q(t){return F(t)&&("string"==typeof t||t instanceof csString)}function j(t){return"object"==typeof t}function F(t){return void 0!==t}function H(t){return F(t)&&null!==t}function V(t){return"function"==typeof t}function z(t){return t instanceof Element}!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(M||(M={}));var J=function(){function t(){}return t.setStrategy=function(n){t.t=n},t.computeIsActive=function(n){t.i=_.boolean(n)},t.isLoggingActive=function(){return t.i},t.getStrategy=function(){return t.t},t.debug=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.warn)},t.error=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.error)},t.critical=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=n.apply(void 0,r);return F(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return i.error(n,t)})):e}catch(n){try{i.error(n,t)}catch(t){}}}},t.i=!1,t}(),G=function(t){return function(n,i,r){var s=(null==i?void 0:i.toString())||"",e=t||"".concat(n.constructor&&n.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return J.tryToExecute(e,u.bind(this)).apply(void 0,t)}}}},W=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector;function B(t,n){if(!(!!t&&q(t)))return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return W.call(n,t),!0}catch(n){return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}function K(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return W.call(t,n)}))}var Y=[/\d{4}/,/^ember\d+$/],X="data-cs-override-id",$="data-cs-dynamic-id";function Z(t,n,i,r){var s=r.dynamicIdRegex||null,e=c(t,r.dynamicElementNameRegex);if(function(t,n){var i=Q(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&tt(X,i,n)}(t,i)){var u=Q(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"[").concat(X,'="').concat(u,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,s=i.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(tt(e,u,n))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var o=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,s=i.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(W.call(t,e)&&nt(e,n))return e}return}(t,i,r);if(o)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UCS[").concat(o,"]")};var a=function(t){var n=t.getAttribute("id");return n?f(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==Q(t)}(t)&&!function(t,n,i){return t.hasAttribute($)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(Y,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&tt("id",t,n)}(n,i)}(t,a,i,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#").concat(a)};var v=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var s=r[i];if(W.call(t,s))return s}return}(t,r);if(v){var l=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=0,s=n.previousElementSibling;s;)W.call(s,i)&&(r+=1),s=s.previousElementSibling;return r}(n,t,v);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,"[").concat(v,"](").concat(l,")")}}var d=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=i.dynamicElementNameRegex,s=c(n,r),e=0,u=n.previousElementSibling;u;)c(u,r)!==s||K(u,i.reliableSelectors)||(e+=1),u=u.previousElementSibling;return e}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,":eq(").concat(d,")")}}function Q(t){return t.getAttribute(X)}function tt(t,n,i){try{return 1===i.querySelectorAll("[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function nt(t,n){try{return 1===n.querySelectorAll(t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var it;function rt(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return st(r,i);var s=Z(r,t[0],n,i),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!i.fullPath&&u){var h=t[t.length-1];return"".concat(st(h,i)).concat(e)}var o=rt(t,n,i);return"".concat(o?"".concat(o,">"):"").concat(e)}function st(t,n){if(t===N)return"|detached|";if(t.host){var i=T(t.host),r=i.ancestors,s=i.selectionRoot;return"".concat(rt(r,s,n),"|shadow-root|")}return 11===t.nodeType?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return"";if(!n(e))return t.INVALID_ELEMENT;var u=T(e);return rt(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return{path:"",firstAnchorParent:null};if(!n(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return R(n)&&csArray.prototype.push.call(i,N),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(e),h=u.firstAnchorParent;return{path:rt(u.ancestors,u.selectionRoot,s),firstAnchorParent:h}}}(it||(it={})),window.CSPathComputation=window.CSPathComputation||it;var et=function(t,n){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},et(t,n)};function ut(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}et(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var ht=function(){return ht=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},ht.apply(this,arguments)};function ot(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}function ct(t,n,i,r){return new(i||(i=Promise))((function(s,e){function u(t){try{o(r.next(t))}catch(t){e(t)}}function h(t){try{o(r.throw(t))}catch(t){e(t)}}function o(t){var n;t.done?s(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,h)}o((r=r.apply(t,n||[])).next())}))}function ft(t,n){var i,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(e){return function(h){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(t,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,h])}}}Object.create;function at(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var vt,lt=function(){function t(t){var n;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||L,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=ht({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.h(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.h(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.h(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled}return t.prototype.getTrackerUri=function(){return"".concat(this.g(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.g(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.g(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.g(),"://").concat(this.loggerDomain)},t.prototype.g=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var s=r[0],e=r[1];n.A(s,e)}}))},t.prototype.A=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"recordingDomain"===t&&(this.recordingDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n)},t.prototype.h=function(t){return t?this.S(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.S=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),dt=function(){function t(t,n){this.N=t,this.T=n}return t.prototype.init=function(){this.R=this.N.self!==this.N.top,this.T.iframesTracking&&this.R?this.O=!1:this.O=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.O},t}();!function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(vt||(vt={}));var wt=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return ht(ht({},t),n)})):{}},t}(),yt=function(){function t(){this.I=new XMLHttpRequest}return t.prototype.send=function(t){var n=this,i=t.path,r=t.domainUri,s=t.query,e=t.headers,u=t.method,h=t.body,o=t.onLoadCallback,c=t.onErrorCallback,f=t.timeout,a=t.onTimeoutCallback,v=r;if(i&&(v=csString.prototype.concat.call(v,"/",i)),s&&(v=csString.prototype.concat.call(v,"?",s)),this.I.open(u,v,!0),e)for(var l=0,d=e;l<d.length;l++){var w=d[l];this.I.setRequestHeader(w.name,w.value)}o&&(this.I.onload=function(){var t={responseText:n.I.responseText,status:n.I.status};o(t)}),c&&(this.I.onerror=function(){c()}),f&&a&&(this.I.timeout=f,this.I.ontimeout=function(){a()}),this.I.send(h)},t.prototype.abort=function(){this.I.abort()},t}(),pt=function(){function t(){}return t.prototype.send=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S=this;return ft(this,(function(b){switch(b.label){case 0:if(n=t.path,i=t.domainUri,r=t.query,s=t.headers,e=t.method,u=t.body,h=t.onLoadCallback,o=t.onErrorCallback,c=t.timeout,f=t.onTimeoutCallback,this.L=new AbortController,a={method:e},v={hasTimedOut:!1},c&&(l=window.setTimeout((function(){S._(v)}),c),a.signal=this.L.signal),s){for(d={},w=0,y=s;w<y.length;w++)p=y[w],d[p.name]=p.value;a.headers=d}u&&(a.body=u),m=i,n&&(m=csString.prototype.concat.call(m,"/",n)),r&&(m=csString.prototype.concat.call(m,"?",r)),b.label=1;case 1:return b.trys.push([1,5,,6]),[4,csFetch(m,a)];case 2:return g=b.sent(),l&&window.clearTimeout(l),h?[4,g.text()]:[3,4];case 3:A=b.sent(),E={responseText:A,status:g.status},h(E),b.label=4;case 4:return[3,6];case 5:return b.sent(),l&&window.clearTimeout(l),v.hasTimedOut&&f?f():!this.L.signal.aborted&&o&&o(),[3,6];case 6:return[2]}}))}))},t.prototype.abort=function(){this.L&&this.L.abort()},t.prototype._=function(t){this.L.abort(),t.hasTimedOut=!0},t}(),mt=function(){function t(){this.C=[]}return t.prototype.send=function(t){csArray.prototype.push.call(this.C,t),"ContentsquarePlugin"in window&&this.M(),t.onLoadCallback&&t.onLoadCallback({responseText:"OK",status:200})},t.prototype.abort=function(){console.log("Method not implemented.")},t.prototype.M=function(){for(var t=csArray.prototype.shift.call(this.C);t;)console.log("SDK start"),console.log(t.path),console.log(t.headers),console.log(t.method),console.log(t.query),console.log(t.body),console.log("SDK end"),t=csArray.prototype.shift.call(this.C)},t}(),gt=function(){function t(){}return t.prototype.send=function(t){var n=t.path,i=t.domainUri,r=t.query,s=new window.Image(1,1);s.onload=O,s.onerror=O,csHTMLImageElementsrc.call(s,"".concat(i).concat(n?"/".concat(n):"","?").concat(r))},t.prototype.abort=function(){console.log("Method not implemented.")},t}(),At=function(){function t(){}return t.prototype.send=function(t){this.getSendStrategy(t).send(t)},t.prototype.abort=function(){this.P.abort()},t.prototype.getSendStrategy=function(t){return this.P?this.P:(window.CS_CONF.trackWithSdk?(console.log("SdkStrategy"),n=new mt):"get"===csString.prototype.toLowerCase.call(t.method)?(console.log("PixelStrategy"),n=new gt):this.D()?(console.log("FetchStrategy"),n=new pt):(console.log("XhrStrategy"),n=new yt),this.P=n);var n},t.prototype.D=function(){return"function"==typeof window.csFetch&&!!window.AbortController},t}(),Et=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.U=new At,r}return ut(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.q(t);var n=vt.toQuery(t);this.U.send({method:"GET",domainUri:this.domainUri,path:this.path,query:n}),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.q=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(wt),St=function(){function t(t,n){this.j=t,this.F=n}return t.prototype.init=function(){this.H=new Et(this.j.getLoggerUri()),this.H.setRequestParametersProviders(this,this.F)},t.prototype.send=function(t){this.V=t,this.H.send()},t.prototype.getRequestParameters=function(){return{a:this.V.app,l:this.V.level,m:this.V.message,s:this.V.stacktrace}},t}(),bt=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Nt=/[a-zA-Z0-9+_-](?:@|%40)/,Tt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Rt=new RegExp("(ey".concat(Tt,"\\.ey").concat(Tt,"\\.").concat(Tt,")"),"g"),kt=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&Nt.test(t)?csString.prototype.replace.call(t,bt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,Rt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}();function Ot(){return"dev"}function It(){return{v:"dev"}}var xt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Lt(){return Math.floor(xt()/1e3)}var _t,Ct,Mt=function(){function t(t,n){this.J=t,this.G=n}return t.prototype.getRequestParameters=function(){return ht(ht({d:"".concat(xt()),p:this.G.anonymizeEmail(window.location.href),u:navigator.userAgent},this.J.getRequestParameters()),{v:"dev"})},t}(),Pt="snippet-",Dt="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(_t||(_t={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ct||(Ct={}));var Ut=function(){function t(t,n,i){var r;this.W=n,this.G=new kt,this.B=Ct[M.warn],this.B=Ct[t.minLogLevel||M.warn],this.H=i||new St(t,new Mt(t,this.G)),this.K=((r={})[M.debug]=[],r[M.warn]=[],r[M.error]=[],r[M.critical]=[],r),this.Y={implementation:{},dynamic:{}},this.H.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=M.warn),this.X(i,n)){csArray.prototype.push.call(this.K[i],n||"");var r={message:this.$(t,n),stacktrace:this.Z(t),app:"uxa",level:i};this.H.send(r)}},t.prototype.$=function(t,n){var i=t instanceof Error?this.G.anonymizeEmail(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.Z=function(t){return t instanceof Error?"".concat(t.stack||"No stacktrace"," ").concat(this.tt()):this.tt()},t.prototype.tt=function(){var t=this.W.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.W.getSessionService(),r=i&&i.getSession(),s={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.X=function(t,n){if(Ct[t]<this.B)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Dt,0)))return this.nt(n,_t.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Pt,0)))return this.nt(n,_t.DYNAMIC);var i=this.K[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.nt=function(t,n){return t in this.Y[n]?!(this.Y[n][t]>=5)&&(this.Y[n][t]+=1,!0):(this.Y[n][t]=1,!0)},t}(),qt=document.createElement("a");function jt(t){return qt.href=t,qt.href}function Ft(t){if(!I(t,"http://")&&!I(t,"https://"))return"";var n=document.createElement("a");return n.href=t,decodeURIComponent(n.hostname)}function Ht(t,n){return csArray.prototype.some.call(n,(function(n){return x(t,".".concat(n))||t===n||""===n}))}var Vt,zt,Jt,Gt,Wt="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Vt||(Vt={})),function(t){t.Parent="parent",t.Child="child"}(zt||(zt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback"}(Jt||(Jt={})),function(t){t.buildBaseMessage=function(t,n,i,r){var s={type:t,from:n,pid:i,signature:Wt};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,n,i,r){var s=Ft(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===Wt&&t.data.from===n&&t.data.pid===i&&Ht(s,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Gt||(Gt={}));var Bt,Kt,Yt,Xt,$t=function(){function t(t){this.J=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=M.warn);var r={message:t,errorCode:n,level:i},s=Gt.buildBaseMessage(Jt.ChildLogMessage,zt.Child,this.J.projectId);s.content=r,Gt.sendPostMessage(window.parent,"*",s)},t}(),Zt=function(){function t(){}return t.prototype.setContext=function(t,n){this.it=t,this.st=n},t.prototype.getVisitorService=function(){return this.it},t.prototype.getSessionService=function(){return this.st},t}();!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,s,e,u,h){var o=encodeURIComponent("".concat(i)),c=s===t.CURRENT_DOMAIN?void 0:s,f=r(e),a=f?";expires=".concat(f.toUTCString()):"",v=H(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(o).concat(a).concat(";path=/").concat(v);return F(u)&&u!==Yt.NotSet&&(l="".concat(l,";SameSite=").concat(u)),F(h)&&h===Xt.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return D(t)?new csDate(xt()+t):t}function s(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),Yt.None,Xt.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=n(e);if(null!==u&&"1"!==u)return u;for(var h=csString.prototype.split.call(window.location.hostname,"."),o=csArray.prototype.pop.call(h);h.length&&(null===u||"1"===u);)i(e,o=csArray.prototype.join.call([csArray.prototype.pop.call(h),o],"."),o,void 0,t,r),u=n(e);return s(e,o),o}}(Bt||(Bt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(Kt||(Kt={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Yt||(Yt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Xt||(Xt={}));var Qt=function(){function t(t,n,i){this.J=t,this.et=n,this.ut=i,this.ht=!1,this.ot=Yt.NotSet,this.ft=Xt.No}return t.prototype.getSameSiteFlag=function(){return this.ot},t.prototype.getSecureFlag=function(){return this.ft},t.prototype.getDomain=function(){return this.vt},t.prototype.getRootDomain=function(){return this.lt},t.prototype.init=function(){if(!this.J.cookielessTrackingEnabled){var t=this.wt(),n=this.yt();this.ht=this.gt(t,n),this.ht?(this.ot=t,this.ft=n):this.J.secureCookiesEnabled&&"https:"===this.et.getUrlProtocol()&&(this.ft=Xt.Yes),this.lt=this.At(),this.vt=this.Et(this.lt)}},t.prototype.gt=function(n,i){return!Kt.browserIsSafariV12()&&(Bt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!Bt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(Bt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.wt=function(){return"http:"===this.et.getUrlProtocol()?Yt.Lax:this.ut.isSameSiteNoneSecureNeeded()||this.J.crossDomainTracking?Yt.None:Yt.Lax},t.prototype.yt=function(){return"http:"===this.et.getUrlProtocol()?Xt.No:this.J.secureCookiesEnabled||this.J.crossDomainTracking||this.ut.isSameSiteNoneSecureNeeded()?Xt.Yes:Xt.No},t.prototype.isSameSiteSupported=function(){return this.ht},t.prototype.set=function(t,n,i){var r=Bt.toExpireDate(i);Bt.set(t,n,this.vt,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.vt;Bt.remove(t,i)},t.prototype.At=function(){var t=this.ut.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?Yt.None:void 0,i=t?Xt.Yes:void 0;return Bt.getRootDomain(n,i)},t.prototype.Et=function(t){return this.J.allowSubdomains?t:Bt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),tn="_cs_t",nn=function(){function t(t,n){this.St=t,this.J=n,this.bt=!1,this.Nt=!1}return t.prototype.init=function(){if(!this.J.cookielessTrackingEnabled&&this.St.isTopWindowTracker()&&"cookie"in document){if(!this.St.isInIframeContext()&&Bt.isCookiePresent())return this.bt=!0,void(this.Nt=!1);if(Bt.set(tn,"1",Bt.CURRENT_DOMAIN),null!==Bt.get(tn))return this.bt=!0,this.Nt=!1,void Bt.remove(tn,Bt.CURRENT_DOMAIN);Bt.set(tn,"1",Bt.CURRENT_DOMAIN,void 0,Yt.None,Xt.Yes),null!==Bt.get(tn)&&(this.bt=!0,this.Nt=!0,Bt.remove(tn,Bt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.bt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.Nt},t}();function rn(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.getItem(t)!==t?!1:(localStorage.removeItem(t),!0)}catch(t){return!1}}var sn=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.Tt()},t.Tt=function(){try{var t={},n=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return csJSON.stringify(n)===csJSON.stringify(i)&&csJSON.stringify(t)===csJSON.stringify(i)}catch(t){return!1}},t}();var en,un,hn,on,cn=function(){function t(t,n){this.J=t,this.ut=n}return t.prototype.canTrack=function(){return this.Rt()&&this.kt()&&this.Ot()},t.prototype.canTrackInChild=function(){return this.Rt()&&this.kt()},t.prototype.Ot=function(){return this.J.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}()&&rn():this.ut.areCookiesEnabled()&&rn()},t.prototype.kt=function(){return this.J.isProjectActive()&&Ht(window.location.hostname,this.J.hostnames)},t.prototype.Rt=function(){return!this.It()&&this.xt()&&sn.check()},t.prototype.It=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.xt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),fn=function(){function t(t,n,i,r,s){this.it=t,this.st=n,this.Lt=i,this._t=r,this.J=s}return t.prototype.get=function(){return{exclusion:this.Lt.getAppliedTrackingDraw(),visitor:this.it.getVisitor(),session:this.st.getSession(),cvars:this._t.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.Lt.exclude(this.J),this.it.removeVisitor(),this.st.removeSession(),this._t.removeCustomVariablesSession()},t.prototype.include=function(t){this.Lt.removeExclusion(),this.it.setVisitor(t.visitor),t.session?this.st.setSession(t.session):this.st.removeSession(),t.cvars?this._t.setCustomVariableSession(t.cvars):this._t.removeCustomVariablesSession()},t}(),an="_cs_id",vn=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,ln=function(){function t(t,n,i,r){this.J=t,this.Ct=n,this.Mt=i,this.Pt=r}return t.prototype.get=function(){var n;return(n=this.J.cookielessTrackingEnabled?this.Pt.getItem(an):this.Ct.get(an))?t.fromString(n):null},t.prototype.set=function(n){var i=t.toString(n);if(this.J.cookielessTrackingEnabled)this.Pt.setItem(an,i);else{var r=new csDate(n.expires);this.Ct.set(an,i,r),this.Mt.setCookie(an,i,r)}},t.prototype.remove=function(){this.J.cookielessTrackingEnabled?this.Pt.removeItem(an):(this.Ct.delete(an),this.Mt.removeCookie(an))},t.prototype.handleSubdomainChange=function(){if(!this.J.cookielessTrackingEnabled){var t=this.get();t&&(this.J.allowSubdomains?this.Ct.delete(an,Qt.CURRENT_DOMAIN):this.Ct.delete(an,this.Ct.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4],h=n[5],o=n[6];return{id:i,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(h),expires:Number(o)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return vn.test(t)},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(en||(en={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(un||(un={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(hn||(hn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(on||(on={}));var dn,wn="_cs_s",yn=18e5,pn=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,mn=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(dn||(dn={}));var gn,An=function(){function t(t,n,i,r){this.J=t,this.Ct=n,this.Mt=i,this.Pt=r,this.Dt=null,this.Ut=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.qt();return t.jt(i)}var r=this.Ft(),s=r.sessionString,e=r.status,u=t.jt(s);if(e!==dn.EXPIRED)return u;if(this.J.cookielessTrackingEnabled)return null;var h=this.qt();if(!h)return null;var o=csString.prototype.split.call(h,mn);if(!t.Ht(o))return h;var c=o[o.length-1],f=parseInt(c,10);return isNaN(f)||this.Vt(f),u},t.prototype.set=function(t,n){void 0===n&&(n=yn);var i=xt()+n,r=this.toString(t);r+="".concat(mn).concat(i),this.zt(r,i),this.J.cookielessTrackingEnabled?this.Pt.setItem(wn,r):(this.Ct.set(wn,r,n),this.Mt.setCookie(wn,r,n))},t.prototype.remove=function(){this.J.cookielessTrackingEnabled?this.Pt.removeItem(wn):(this.Ct.delete(wn),this.Mt.removeCookie(wn)),this.Jt()},t.prototype.handleSubdomainChange=function(){if(!this.J.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.J.allowSubdomains?this.Ct.delete(wn,Qt.CURRENT_DOMAIN):this.Ct.delete(wn,this.Ct.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],mn)},t.prototype.zt=function(t,n){this.Dt={sessionString:t,expires:n}},t.prototype.Ft=function(){return this.Dt?this.Dt&&xt()<=this.Dt.expires?{sessionString:this.Dt.sessionString,status:dn.FOUND}:{sessionString:this.Dt.sessionString,status:dn.EXPIRED}:{sessionString:this.qt(),status:dn.NOT_FOUND}},t.prototype.Jt=function(){this.Dt=null},t.prototype.Vt=function(t){this.Dt&&(this.Dt.expires=t,this.Ut=!0)},t.prototype.isCacheRefreshed=function(){return this.Ut},t.prototype.resetCacheRefreshed=function(){this.Ut=!1},t.prototype.qt=function(){if(this.J.cookielessTrackingEnabled){var t=this.Pt.getItem(wn);return!t||this.Gt(t)?null:t}return this.Ct.get(wn)},t.prototype.Gt=function(t){var n=csString.prototype.split.call(t,mn),i=parseInt(n[n.length-1],10);return!isNaN(i)&&xt()>i},t.Ht=function(t){return 13===t[t.length-1].length},t.jt=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,pn))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.jt(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n=csString.prototype.split.call(t,mn),i=n[0],r=n[1],s=n[2];return{recordingState:r,etrState:null!=s?s:hn.ETR_OFF,pageNumber:parseInt(i,10)}},t.isValidSessionString=function(t){return pn.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?ln.fromString(t._cs_id):null,session:t._cs_s?An.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(gn||(gn={}));var En,Sn="_cs_ex",bn=2592e6,Nn=/^[0-9]+$/,Tn=function(){function t(t,n,i,r){this.J=t,this.Ct=n,this.Mt=i,this.Pt=r}return t.prototype.get=function(){return this.J.cookielessTrackingEnabled?Number(this.Pt.getItem(Sn)):Number(this.Ct.get(Sn))},t.prototype.set=function(t){this.J.cookielessTrackingEnabled?this.Pt.setItem(Sn,t):(this.Ct.set(Sn,t,bn),this.Mt.setCookie(Sn,t,bn))},t.prototype.remove=function(){this.J.cookielessTrackingEnabled?this.Pt.removeItem(Sn):(this.Ct.delete(Sn),this.Mt.removeCookie(Sn))},t.isValidExclusionString=function(t){return Nn.test(t)},t}(),Rn="_cs_cvars",kn=function(){function t(t,n,i,r){this.J=t,this.Ct=n,this.Mt=i,this.Pt=r}return t.prototype.get=function(){return this.J.cookielessTrackingEnabled?this.Pt.getItem(Rn):this.Ct.get(Rn)},t.prototype.set=function(t){this.J.cookielessTrackingEnabled?this.Pt.setItem(Rn,t):(this.Ct.set(Rn,t),this.Mt.setCookie(Rn,t))},t.prototype.remove=function(){this.J.cookielessTrackingEnabled?this.Pt.removeItem(Rn):(this.Ct.delete(Rn),this.Mt.removeCookie(Rn))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||ln.isValidVisitorString(t._cs_id))&&(!t._cs_s||An.isValidSessionString(t._cs_s))&&(!t._cs_ex||Tn.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||kn.isValidCustomVarString(t._cs_cvars)))}}(En||(En={}));var On,In=function(){function t(t,n){this.Wt=t,this.Bt=n}return t.prototype.retrieve=function(n,i){var r=this;this.Kt=i,this.retrievedStates=[],this.Yt=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.Xt(t)})),t.getXdframeOrigin),this.Wt.onMessage((function(t){r.$t(t)})),this.Wt.onTimeout((function(){r.Zt()})),this.Wt.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Yt,t.getXdframeUrl),(function(t){return r.Wt.open(t)}))},t.prototype.$t=function(t){if(this.Qt(t)){var n=t.data;if(!En.isValid(n))throw this.Wt.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.tn()&&(this.Wt.stop(),this.Kt(csArray.prototype.map.call(this.retrievedStates,gn.fromRaw)))},t.prototype.Zt=function(){J.warn("xdframe: all messages not received")},t.prototype.Qt=function(t){return csArray.prototype.indexOf.call(this.Yt,t.origin)>-1},t.prototype.tn=function(){return this.retrievedStates.length===this.Yt.length},t.prototype.Xt=function(t){return!x(this.Bt.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),xn=function(){function t(){var t=this;this.nn=3e3,this.rn=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.en=t},t.prototype.onTimeout=function(t){this.un=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.rn),this.hn=window.setTimeout((function(){t.un()}),this.nn)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.rn),window.clearTimeout(this.hn),this.en=O,this.un=O},t.prototype.handleMessage=function(t){this.en(t)},ot([G("XdframeMessage")],t.prototype,"handleMessage",null),t}();function Ln(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function _n(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,s=t.length;r<s;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}!function(t){t.UNCOMPRESSED="0",t.LZSTRING="1",t.GZIP="2"}(On||(On={}));var Cn,Mn,Pn,Dn=function(t){this.onError=t},Un=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=On.UNCOMPRESSED,n}return ut(n,t),n.prototype.isSupported=function(){return!0},n.prototype.compress=function(t,n,i){if("base64"===t)return"string"!=typeof n&&(n=Ln(n)),i(n);i(n)},n.prototype.compressSync=function(t){return t},n}(Dn),qn=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.cn=[],r.fn=[],r.an=0,r.U=new At,r}return ut(n,t),n.prototype.setCompressionOptions=function(t,n){this.vn=t,this.ln=n},n.prototype.setRequestPayloadProvider=function(t){this.dn=t},n.prototype.setRequestHeader=function(t){csArray.prototype.push.call(this.fn,t)},n.prototype.afterProvidersCalled=function(t){csArray.prototype.push.call(this.cn,t)},n.prototype.onLoad=function(t){this.wn=t},n.prototype.onError=function(t){this.yn=t},n.prototype.onTimeout=function(t,n){this.an=t,this.un=n},n.prototype.send=function(t){var n=this;void 0===t&&(t=!0),csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var i=this.retrieveParameters(),r=this.mn();csArray.prototype.forEach.call(this.cn,(function(t){return t()})),t&&this.vn&&this.ln&&"string"==typeof r?this.vn.compress(this.ln,r,(function(t){n.doSend(i,t)})):this.doSend(i,r)},n.prototype.abort=function(){this.U.abort()},n.prototype.getCompressionOutputType=function(){return this.ln},n.prototype.mn=function(){return this.dn?this.dn.getRequestPayload():""},n.prototype.doSend=function(t,n){var i,r,s,e=this,u=null!==(s=null!==(i=t.ct)&&void 0!==i?i:null===(r=this.vn)||void 0===r?void 0:r.algorithm)&&void 0!==s?s:On.UNCOMPRESSED;t=ht(ht({},t),{ct:u});var h=vt.toQuery(t);this.U.send({method:"POST",domainUri:this.domainUri,path:this.path,headers:this.fn,query:h,body:n,onLoadCallback:this.wn,onErrorCallback:function(){e.yn&&e.yn(t,n)},timeout:this.an,onTimeoutCallback:this.un}),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(n){return n(t)}))},ot([G("POST request")],n.prototype,"doSend",null),n}(wt);!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE"}(Cn||(Cn={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Mn||(Mn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(Pn||(Pn={}));var jn,Fn;function Hn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function Vn(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(jn||(jn={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Fn||(Fn={}));var zn=function(){function t(){}return t.isEmpty=function(){return 0===t.gn.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,at([t.gn],n,!1))},t.getAll=function(){return t.gn},t.clear=function(){t.gn=[]},t.gn=[],t}(),Jn=50;var Gn=!1;var Wn=[],Bn=[];function Kn(t){csArray.prototype.push.call(Wn,t),performance.mark("".concat(t,"-start"))}function Yn(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;csArray.prototype.push.call(Bn,{mName:t,mDuration:i.toFixed(2)}),csArray.prototype.pop.call(Wn),0===Wn.length&&(i>Jn&&zn.add(Bn),Bn=[])}}function Xn(t){performance.mark("".concat(t,"-start"))}function $n(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>Jn&&zn.add([{mName:t,mDuration:i.toFixed(2)}])}}var Zn=function(t){return function(n,i,r){var s=r.value;r.value=function(){if(!Gn)return r.value=s,s.apply(this,arguments);Kn(t);var n=s.apply(this,arguments);return Yn(t),n}}};function Qn(t){var n=csEventtarget.apply(t);return n&&a(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function ti(t){return Math.round(10*t)/10}function ni(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var s=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=xt();if(e-s>r)return s=e,t.apply(this,n)}}var e,u=[],h=null,o=0,c=function(){o=xt(),h=null,e=t.apply(i,u)},f=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var f=xt(),a=r-(f-o);return i=null!=this?this:window,u=at([],n,!0),a<=0||a>r?(o=f,e=t.apply(i,u),h?(window.clearTimeout(h),h=null):u=[]):h||(h=window.setTimeout(c,a)),e};return f.cancel=function(){h&&(window.clearTimeout(h),o=0,h=null,u=[])},f.flushPending=function(){h&&(window.clearTimeout(h),c())},f}function ii(){return function(t,n,i){var r=i.value;i.value=function(t){!1===(null==t?void 0:t.isTrusted)&&ii.enabled||r.call(this,t)}}}ii.enabled=!0;var ri=function(){function t(n,i,r,s){var e=this;this.An=n,this.En=i,this.Sn=r,this.bn=s,this.Nn=new Set,this.Tn=[],this.Rn=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.kn=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.On=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.An.on(t.In,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.An.on(t.xn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.An.on(t.Ln,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.An.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.An.on(t.xn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this._n=[{type:"change",listener:this.An.on(t.Ln,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.An.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.An.on(t.xn,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}}]}var n;return t.prototype.init=function(){this.Cn(),this.Mn(),this.Pn(),this.Dn(),this.bn.onInputNodeToEncrypt(this.Un.bind(this))},t.prototype.Dn=function(){var t=this;this.En.onDocumentIdentified((function(n){t.qn(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Tn,t)},t.prototype.Un=function(t){csArray.prototype.forEach.call(this.Tn,(function(n){return n(t)}))},t.prototype.start=function(){this.jn()},t.prototype.stop=function(){this.Fn()},t.prototype.Mn=function(){var t;this.Hn()&&(t=csArray.prototype.push).call.apply(t,at([this.On],this.Rn,!1))},t.prototype.Cn=function(){var t;this.Vn()&&(t=csArray.prototype.push).call.apply(t,at([this.On],this.kn,!1))},t.prototype.qn=function(t){E(t)?csArray.prototype.forEach.call(this.On,(function(t){return Hn(t)})):this.Nn.has(t)||(this.Nn.add(t),csArray.prototype.forEach.call(this._n,(function(n){var i=n;i.boundElement=t,Hn(i)})))},t.prototype.zn=function(t){E(t)?csArray.prototype.forEach.call(this.On,(function(t){return Vn(t)})):(this.Nn.delete(t),csArray.prototype.forEach.call(this._n,(function(n){var i=n;i.boundElement=t,Vn(i)})))},t.prototype.Hn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Vn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.Fn=function(){var t=this;this.zn(document),this.Nn.forEach((function(n){return t.zn(n)}))},t.prototype.jn=function(){this.Jn(t.In),this.Gn(),this.Wn(),this.Bn(),this.Jn(t.xn)},t.prototype.Jn=function(t){for(var n,i=document.querySelectorAll(t),r=0;r<i.length;r+=1){var s=i.item(r);(null===(n=s.value)||void 0===n?void 0:n.length)>0&&this.Kn(s)}},t.prototype.Gn=function(){var t=window.pageYOffset,n=window.pageXOffset;if(0!==t||0!==n){var i=this.En.getId(document);if(!i)return void J.warn("scrollListener: document without identifier");var r={type:Cn.SCROLL,args:[i,n,t],date:xt()};this.Un(r)}},t.prototype.Wn=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.Yn(t[n])},t.prototype.Bn=function(){for(var n=document.querySelectorAll(t.Ln),i=0;i<n.length;i+=1)this.Xn(n[i])},t.prototype.$n=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!a(t)||!this.Sn.isSensitive(t)&&!this.Sn.isSensitiveChild(t)){var n=this.En.getId(t);if(n){var i=this.$n(t),r={type:Cn.SCROLL,args:[n,i.left,i.top],date:xt()};this.Un(r)}else J.warn("scrollListener: node without identifier")}},t.prototype.mouseOverListener=function(t){if(!a(t.target)||!this.Sn.isSensitiveChild(t.target)){var n=this.En.getId(t.target);if(n){var i={type:Cn.MOUSE_OVER,args:[n],date:xt()};this.Un(i)}else J.warn("mouseOverListener: node without identifier")}},t.prototype.clickListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.CLICK,args:[i],date:xt()};this.Un(r)}else J.warn("clickListener: node without identifier")}},t.prototype.inputCheckableListener=function(t){var n=Qn(t);this.Xn(n)},t.prototype.Xn=function(t){if(!this.Sn.isSensitive(t)&&!this.Sn.isSensitiveChild(t)){var n=this.En.getId(t);if(n){var i={type:Cn.INPUT_CHECKABLE,args:[n,t.checked],date:xt()};this.Un(i)}else J.warn("inputCheckableListener: node without identifier")}},t.prototype.inputSelectListener=function(t){var n=Qn(t);this.Yn(n)},t.prototype.Yn=function(t){if(!this.Sn.isSensitive(t)&&!this.Sn.isSensitiveChild(t)){var n=this.En.getId(t);if(n){var i={type:Cn.INPUT_SELECT,args:[n,t.selectedIndex],date:xt()};this.Un(i)}else J.warn("inputSelectListener: node without identifier")}},t.prototype.inputTextListener=function(t){var n=Qn(t);this.Kn(n)},t.prototype.Kn=function(t){var n;if(!this.Sn.isSensitive(t)&&!this.Sn.isSensitiveChild(t)){var i=this.En.getId(t);if(i){var r=null!==(n=t.value)&&void 0!==n?n:"";if(this.bn.shouldEncrypt(t))this.bn.registerInputNodeToEncrypt({targetId:i,targetValue:r,date:xt()});else{var s="number"===t.type?"0":"",e={type:Cn.INPUT_TEXT,args:[i,csString.prototype.replace.call(r,/\S/g,s)],date:xt()};this.Un(e)}}else J.warn("inputTextListener: node without identifier")}},t.prototype.keyUpListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r=this.Zn[t.key];if(void 0!==r){var s={type:Cn.KEY_UP,args:[i,r],date:xt()};this.Un(s)}}else J.warn("keyUpListener: node without identifier")}},t.prototype.keyDownListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r=this.Zn[t.key];if(void 0!==r){var s={type:Cn.KEY_DOWN,args:[i,r],date:xt()};this.Un(s)}}else J.warn("keyDownListener: node without identifier")}},t.prototype.copyListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,Fn.COPY],date:xt()};this.Un(r)}else J.warn("copyListener: node without identifier")}},t.prototype.cutListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,Fn.CUT],date:xt()};this.Un(r)}else J.warn("cutListener: node without identifier")}},t.prototype.pasteListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,Fn.PASTE],date:xt()};this.Un(r)}else J.warn("pasteListener: node without identifier")}},t.prototype.pointerUpListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.POINTER_UP,args:[t.pointerId,t.pointerType,ti(t.clientX),ti(t.clientY),i,t.button],date:xt()};this.Un(r)}else J.warn("pointerup: node without identifier")}},t.prototype.pointerMoveListener=function(t){var n={type:Cn.POINTER_MOVE,args:[t.pointerId,t.pointerType,ti(t.clientX),ti(t.clientY)],date:xt()};this.Un(n)},t.prototype.pointerDownListener=function(t){var n=Qn(t);if(!a(n)||!this.Sn.isSensitiveChild(n)){var i=this.En.getId(n);if(i){var r={type:Cn.POINTER_DOWN,args:[t.pointerId,t.pointerType,ti(t.clientX),ti(t.clientY),i,t.button,{pageX:ti(t.pageX),pageY:ti(t.pageY)}],date:xt()};this.Un(r)}else J.warn("pointerdown: node without identifier")}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_START,args:[r.identifier,ti(r.clientX),ti(r.clientY)],date:xt()};this.Un(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_MOVE,args:[r.identifier,ti(r.clientX),ti(r.clientY)],date:xt()};this.Un(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_END,args:[r.identifier,ti(r.clientX),ti(r.clientY)],date:xt()};this.Un(s)}},t.prototype.Pn=function(){this.Zn={},this.Zn[" "]=jn.SPACE,this.Zn.Spacebar=jn.SPACE,this.Zn.Backspace=jn.BACKSPACE,this.Zn.Enter=jn.ENTER,this.Zn.Delete=jn.DELETE,this.Zn.ArrowUp=jn.ARROWUP,this.Zn.ArrowDown=jn.ARROWDOWN,this.Zn.ArrowLeft=jn.ARROWLEFT,this.Zn.ArrowRight=jn.ARROWRIGHT,this.Zn.Up=jn.ARROWUP,this.Zn.Down=jn.ARROWDOWN,this.Zn.Left=jn.ARROWLEFT,this.Zn.Right=jn.ARROWRIGHT,this.Zn.CapsLock=jn.CAPSLOCK,this.Zn.Shift=jn.SHIFT,this.Zn.Tab=jn.TAB,this.Zn.Escape=jn.ESCAPE,this.Zn.Esc=jn.ESCAPE,this.Zn.End=jn.END,this.Zn.Alt=jn.ALT,this.Zn.Control=jn.CTRL,this.Zn.Meta=jn.META},t.In=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.Ln=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.xn='input[type="number"]',ot([Zn("RecordingPageEvents.start")],t.prototype,"start",null),ot([G("scroll")],t.prototype,"scrollListener",null),ot([G("mouseOver"),ii(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Qn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),ot([G("click"),ii()],t.prototype,"clickListener",null),ot([G("checkable")],t.prototype,"inputCheckableListener",null),ot([G("select")],t.prototype,"inputSelectListener",null),ot([G("text")],t.prototype,"inputTextListener",null),ot([G("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([G("Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([G("Event handler type: copy")],t.prototype,"copyListener",null),ot([G("Event handler type: cut")],t.prototype,"cutListener",null),ot([G("Event handler type: paste")],t.prototype,"pasteListener",null),ot([G("Event handler type: pointerup"),ii()],t.prototype,"pointerUpListener",null),ot([G("Event handler type: pointermove"),ii(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=ni(r.value,n)})],t.prototype,"pointerMoveListener",null),ot([G("Event handler type: pointerdown"),ii()],t.prototype,"pointerDownListener",null),ot([G("Event handler type: touchstart"),ii()],t.prototype,"touchStartListener",null),ot([G("Event handler type: touchmove"),ii()],t.prototype,"touchMoveListener",null),ot([G("Event handler type: touchend"),ii()],t.prototype,"touchEndListener",null),t}();function si(t){for(var n=t.length,i=new csArray(n),r=0;r<n;r+=1)i[r]=t[r];return i}function ei(t,n){for(var i=t.length,r=0;r<i;r++)n(t[r],r)}function ui(t,n){for(var i=t.length,r=[],s=0;s<i;s+=1){var e=t[s];n(e)&&csArray.prototype.push.call(r,e)}return r}var hi,oi,ci,fi,ai=function(){function t(t,n,i,r,s,e,u){void 0===u&&(u=document);var h=this;this.Qn=t,this.ti=n,this.ni=i,this.ii=r,this.En=s,this.Sn=e,this.si=u,this.ei=!1,this.ui=function(t){h.ii.emitInitialDomDone(t)},this.ti.onCharacterDataMutation((function(t){h.hi(t)})),this.ti.onAttributesMutation((function(t){w(t.target)&&h.Sn.isSensitive(t.target)&&"src"===t.attributeName&&(h.Sn.unidentifySensitiveNodes(t.target),h.Sn.identifySensitiveNodes(t.target)),h.oi(t)})),this.ti.onChildListMutation((function(t,n){ei(t.removedNodes,(function(t){h.Sn.unidentifySensitiveNodes(t)})),ei(t.addedNodes,(function(t){h.Sn.identifySensitiveNodes(t),h.En.identifyNodes(t,n)})),h.ci(t,n)})),this.ti.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(h.Sn.identifySensitiveNodes(t.target),h.En.identifyNodes(csElementshadowRoot.apply(t.target)),h.fi(t))}))}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.isStarted=function(){return this.ei},t.prototype.start=function(){this.isStarted()||(this.ei=!0,this.ti.start(),this.vi())},t.prototype.stop=function(){this.isStarted()&&(this.ei=!1,this.Sn.unidentifySensitiveNodes(this.si),this.ti.stop())},t.prototype.flushEvents=function(){this.ti.flushPendingMutations()},t.prototype.vi=function(){this.ii.emitInitialDomStart(),this.Sn.identifySensitiveNodes(this.si),this.En.identifyNodes(this.si),this.Qn.serializeInitialDom(this.si,this.ui)},t.prototype.fi=function(t){if(!this.Sn.isSensitive(t.target)&&!this.Sn.isSensitiveChild(t.target)){var n=this.Qn.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:Cn.ATTACH_SHADOW};this.ai(i)}}},t.prototype.oi=function(t){if(!a(t.target)||!this.Sn.isSensitiveChild(t.target)&&!this.Sn.isSensitiveAttribute(t.target,t.attributeName)){var n=this.Qn.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:Cn.MUTATION_ATTRIBUTE};this.ai(i),this.ni.scanAttribute(t.target,t.attributeName)}}},t.prototype.hi=function(t){var n=t.target.parentElement;if(!n||!this.Sn.isSensitive(n)&&!this.Sn.isSensitiveChild(n)){var i=this.Qn.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:Cn.MUTATION_CHARACTER_DATA};this.ai(r),this.ni.scanText(t.target)}}},t.prototype.ci=function(t,n){var i=this;if(!a(t.target)&&!A(t.target)||!this.Sn.isSensitive(t.target)&&!this.Sn.isSensitiveChild(t.target)){var r=this.Qn.serializeMutationChildList(t,n);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:Cn.MUTATION_REMOVE};i.ai(r)})),csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:Cn.MUTATION_INSERT};i.ai(r)}))}}},t}(),vi=function(){function t(t){this.li=t,this.wi=0}return t.prototype.addString=function(t){this.wi+=2*t.length},t.prototype.addArrayBuffer=function(t){this.wi+=t.byteLength},t.prototype.isThresholdReached=function(){return this.wi>this.li},t.prototype.reset=function(){this.wi=0},t}(),li=function(){function t(t,n,i){void 0===t&&(t=[]),void 0===n&&(n={}),void 0===i&&(i=512e3),this.yi=t,this.pi=n,this.mi=new vi(i)}return t.prototype.addEvent=function(t){this.mi.addString(P(t)),csArray.prototype.push.call(this.yi,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.yi.length;n+=1){if(this.yi[n].date>t.date)return this.mi.addString(P(t)),void csArray.prototype.splice.call(this.yi,n,0,t)}this.addEvent(t)},t.prototype.eventsCount=function(){return this.yi.length},t.prototype.clearEvents=function(){this.mi.reset(),this.yi=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.mi.isThresholdReached()},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.pi[i]=n[i])},t.prototype.removeRequestParameter=function(t){this.pi.hasOwnProperty(t)&&delete this.pi[t]},t.prototype.getEvents=function(){return this.yi},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.yi,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.yi=r,i},t.prototype.getRequestPayload=function(){return P(this.yi)},t.prototype.getRequestParameters=function(){var t=ht({},this.pi);return this.yi.length>0&&(t.let=this.yi[this.yi.length-1].date.toString()),t},t}(),di=function(){function t(){this.gi=1}return t.prototype.getCurrentIndex=function(){return this.gi},t.prototype.increment=function(){this.gi+=1},t.prototype.reset=function(){this.gi=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.gi)}},t}(),wi=function(){function t(){}return t.prototype.emit=function(n,i){var r="".concat(t.Ai,".").concat(n),s=t.createEvent(r,{detail:i});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Ei();if(null===i)return null;var r=n.bubbles,s=void 0!==r&&r,e=n.cancelable,u=void 0!==e&&e,h=n.detail;return i.initCustomEvent(t,s,u,h),i},t.Ei=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.Ai="cs.tracking",t}(),yi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),pi=function(t){function n(n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b){var N=t.call(this)||this;return N.J=n,N.Si=i,N.bi=r,N.pi=s,N.Ni=e,N.Ti=u,N.Ri=h,N.ki=o,N.Oi=c,N.Ii=f,N.xi=a,N.st=v,N.ni=l,N.Li=d,N._i=w,N.Ci=y,N.Mi=p,N.Pi=m,N.Di=g,N.bn=A,N.Ui=E,N.qi=S,N.ji=b,N.Fi=0,N.Hi=0,N.Vi=0,N.zi=new wi,N.Ji={allowFromQuotaService:!0,allowFromSerialization:!0},N.Gi=ni((function(){N.pushEvents()}),2e3),N.Wi=function(t){return N.processBrowserEvent(t)},N.Bi=function(t){return N.Ki(t)},N}return ut(n,t),n.prototype.init=function(){this.Yi(),this.Xi()},n.prototype.Yi=function(){var t=this;this.Si.setRequestPayloadProvider(this.bi),this.Si.setRequestParametersProviders(this.bi),this.Si.afterProvidersCalled((function(){t.Ui.addBatchInProgress("".concat(t.Ni.getCurrentIndex()),t.bi.getRequestParameters(),t.bi.getEvents()),t.bi.clearEvents(),t.Ni.increment(),t.bi.setRequestParametersFromProvider(t.pi)})),this.Si.after((function(n){"ri"in n&&t.Ui.removeBatchInProgress(n.ri)})),this.Si.onError((function(n,i){t.Ui.saveFailedRecordingEvents(n,i)})),this.Si.onLoad((function(n){n.status>=200&&n.status<=299?t.Ui.recover():J.warn("recording request failed:".concat(n.status))}))},n.prototype.Xi=function(){var t=this;this.Ti.onEvent(this.Wi),this.Ri.onEvent(this.Wi),this.Oi.onEvent(this.Wi),this.ki.onEvent(this.Bi),this.ni.onEvent(this.Wi),this.Li.onEvent(this.Wi),this.Pi.onEvent(this.Wi),this.Ii.onEvent(this.Bi),this.bn.onTextNodeToEncrypt(this.Wi),this.bn.onApiErrorToEncrypt((function(n){t.$i(n)})),this.ji.onEvent(this.Wi),this.bn.onUserIdentifierToEncrypt(this.Wi),this.qi.onEvent(this.Wi)},n.prototype.isRecording=function(){return this.st.hasValidSession()&&this.isStarted},n.prototype.isMutationTrackerStarted=function(){return this.Ri.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.Ji.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.Ji.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.Ji.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ji.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.Ji.allowFromQuotaService&&this.Ji.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.Zi(t)},n.prototype.onIframeDetailedApiError=function(t){this.Qi(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Ki(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.st.hasValidSession()&&this.tr(t)},n.prototype.Ki=function(t){this.xi.isSessionValid()&&this.tr(t)},n.prototype.tr=function(t){this.bi.addEvent(t),this.bi.isThresholdReached()?this.pushEvents():this.bi.isFull()&&this.Gi(),this.J.emitDebugEvents&&this.zi.emit("recordingEvent",ht(ht({},t),{typeName:Cn[t.type]}))},n.prototype.onStart=function(){var t=this;this.initStates(),this.bi.setRequestParametersFromProvider({getRequestParameters:function(){return{rst:xt().toString()}}}),this.qi.start(),this.Pi.start(),this.Li.start(),this.Ri.start(),this.Ti.start(),this.Oi.start(),this.Ii.start(),this.ji.start(),this.J.jsErrorsEnabled&&this._i.subscribe(n.nr,(function(n){return t.Zi(n)})),this.J.apiErrors.enabled&&this.Mi.subscribe(n.nr,(function(n){return t.Qi(n)}),{detailedEvent:!0}),this.J.emitDebugEvents&&this.zi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Ti.stop(),this.Ri.stop(),this.Oi.stop(),this.ki.stop(),this._i.unsubscribe(n.nr),this.Mi.unsubscribe(n.nr),this.Pi.stop(),this.Ii.stop(),this.qi.stop(),this.ji.stop()},n.prototype.clearStates=function(){this.Ri.flushEvents(),this.Gi.cancel(),this.pushEvents(),this.ir()},n.prototype.initStates=function(){this.Ni.reset(),this.bi.setRequestParametersFromProvider(this.pi),this.Fi=0,this.Hi=0,this.Vi=0},n.prototype.pushEvents=function(){this.Pi.flushEvents(),this.bi.eventsCount()>0&&this.canSendEvents()&&(this.isStarted?this.Si.send():this.bi.clearEvents())},n.prototype.addInitialDom=function(t){this.bi.addEventByTimestamp(t)},n.prototype.Qi=function(t){t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody?this.bn.registerApiErrorToEncrypt(t):this.$i(t)},n.prototype.$i=function(t){if(this.Hi<n.rr){var i={type:Cn.API_ERROR,date:xt(),args:[this.Di.anonymize(t)]};this.Wi(i),this.Hi=this.Hi+1}},n.prototype.Zi=function(t){if(this.Fi<n.er){var i={type:Cn.JAVASCRIPT_ERROR,date:xt(),args:[this.Ci.anonymize(t)]};this.Wi(i),this.Fi=this.Fi+1}},n.prototype.ur=function(t){if(this.Vi<n.hr){var i={type:Cn.CUSTOM_ERROR,date:xt(),args:[t]};this.Wi(i),this.Vi=this.Vi+1}},n.prototype.cr=function(t){this.isStarted&&(t===on.ETR_SESSION?this.bi.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[n.ar]=n.vr,t}}):t===on.ETR_PAGE&&this.bi.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[n.lr]=n.vr,t}}))},n.prototype.ir=function(){this.bi.removeRequestParameter(n.lr),this.bi.removeRequestParameter(n.ar)},n.prototype.clearEvents=function(){this.bi.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.Zi(t)},n.prototype.onCustomErrorEvent=function(t){this.ur(t)},n.prototype.onPageEvent=function(t){this.wr(t)},n.prototype.onUserIdentifierEvent=function(t){var n={userIdentifier:t,date:xt(),keyId:this.J.encryptionPublicKeyId};this.bn.registerUserIdentifierToEncrypt(n)},n.prototype.onEventTriggerRecording=function(t,n){this.cr(n),this.wr(t),this.pushEvents()},n.prototype.wr=function(t){var i={type:Cn.PAGE_EVENT,date:xt(),args:[{eventName:csString.prototype.slice.call(t,0,n.yr)}]};this.bi.addEvent(i)},n.prototype.triggerConsentGranted=function(){var t={date:xt(),type:Cn.CONSENT_GRANTED};this.bi.addEvent(t)},n.prototype.triggerConsentWithdrawn=function(){var t={date:xt(),type:Cn.CONSENT_WITHDRAWN};this.bi.addEvent(t)},n.nr="RecordingService",n.yr=255,n.er=20,n.rr=20,n.hr=20,n.lr="etrp",n.ar="etrs",n.vr="1",ot([Zn("addInitialDom")],n.prototype,"addInitialDom",null),n}(yi),mi=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.pr=n,u.bi=i,u.mr=r,u.J=s,u.gr=e,u.Ar={},u.Er=!1,u.Sr=function(t){if(0!==t.length)for(var n=function(t){var n=t.metadata,i=t.events,r=n.datatype;if(!u.br(n.rt))return"continue";u.pr.setRequestPayloadProvider({getRequestPayload:function(){return i}}),delete n.datatype,u.pr.setRequestParametersProviders({getRequestParameters:function(){return n}});var s="json"===r;u.pr.send(s)},i=0,r=t;i<r.length;i++){n(r[i])}},u.Nr=function(){try{if(!u.Er)return;u.Tr();var t=u.bi.getRequestParameters();if(!u.br(t.rt))return;if(u.sendLastMessageBeacon(),0===u.bi.eventsCount())return;u.J.useMalkaPipeline&&(t.hlm="true"),u.mr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:ht(ht({},t),{datatype:"json"}),events:u.bi.getRequestPayload()})}catch(t){}},u.Yi(),u.Rr=u.pr.getCompressionOutputType(),u}return ut(n,t),n.prototype.Yi=function(){var t=this;this.pr.onLoad((function(n){n.status>=200&&n.status<=299?t.recover():J.warn("recording request failed:".concat(n.status))})),this.pr.onError((function(n,i){t.saveFailedRecordingEvents(n,i)}))},n.prototype.onStart=function(){this.Ar={},this.kr()},n.prototype.onStop=function(){this.Or()},n.prototype.recover=function(){this.mr.recover(this.Sr)},n.prototype.addBatchInProgress=function(t,n,i){this.Ar[t]={metadata:n,events:i}},n.prototype.removeBatchInProgress=function(t){delete this.Ar[t]},n.prototype.blockSendingLastMessage=function(){this.Er=!1},n.prototype.allowSendingLastMessage=function(){this.Er=!0},n.prototype.sendLastMessageBeacon=function(){this.J.useMalkaPipeline&&this.Er&&this.gr.send()},n.prototype.kr=function(){window.addEventListener("pagehide",this.Nr)},n.prototype.Or=function(){window.removeEventListener("pagehide",this.Nr)},n.prototype.br=function(t){return!this.J.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,un.TEMPORARILY_RECORDED)},n.prototype.saveFailedRecordingEvents=function(t,n){this.mr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri),metadata:ht(ht({},t),{datatype:this.Rr}),events:n})},n.prototype.Tr=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.Ar),(function(n){var i=t.Ar[n],r=i.metadata,s=i.events;t.mr.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:ht(ht({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},ot([G("RecordingRecovery")],n.prototype,"recover",null),n}(yi),gi=/[^\s]/g;function Ai(t){return csString.prototype.replace.call(t,gi,"a")}!function(t){t.getShadowRoot=function(t){return t&&(a(n=t)&&csElementshadowRoot.apply(n)&&S(csElementshadowRoot.apply(n)))?t.shadowRoot:null;var n},t.getAllShadowHosts=function t(n){for(var i,r,s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,at([e,r],t(r.shadowRoot),!1));return e}}(hi||(hi={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return U(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return U(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(oi||(oi={})),function(t){var n="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){var i=t.getBoundingClientRect();if(0==i.width&&0==i.height)return!0}var r,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(r=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(r)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return e(document,i,r)}function e(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var s=hi.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,n,i):r}t.isConnected=function(t){return n(t)},t.isEmpty=function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=si(n.querySelectorAll(t)),s=0,e=hi.getAllShadowHosts(n);s<e.length;s++){var u=si(e[s].shadowRoot.querySelectorAll(t));(i=csArray.prototype.push).call.apply(i,at([r],u,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var s=i(n);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var n=null,s=t;do{if(!r(s))break;n=s}while(s=i(s));return n},t.createDeepTreeWalker=function(t,n){var i;void 0===n&&(n=NodeFilter.SHOW_ALL);var r=n|NodeFilter.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];return t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1)),{nextNode:function(){for(;s.length>0;){var t=s[s.length-1].nextNode();if(t){var i=hi.getShadowRoot(t);if(i&&csArray.prototype.push.call(s,document.createTreeWalker(i,r,null,!1)),0!=(bi[t.nodeType]&n))return t}else csArray.prototype.pop.call(s)}return null}}},t.getTopElement=s,t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+oi.windowOffsetX()<0||n.bottom+oi.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){if(r(t))return!1;var n=s(t);return t.contains(n)},t.isInViewPort=function(t){var n=s(t);return null!==n&&(t===n||t.contains(n))},t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(a(n=t)&&"select"===n.localName||m(t)||p(t)||function(t){return a(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return a(t)&&"details"===t.localName}(t)&&!function(t){return a(t)&&"summary"===t.localName}(t)))));var n}}(fi||(fi={}));var Ei,Si,bi=((ci={})[Node.ATTRIBUTE_NODE]=NodeFilter.SHOW_ATTRIBUTE,ci[Node.CDATA_SECTION_NODE]=NodeFilter.SHOW_CDATA_SECTION,ci[Node.COMMENT_NODE]=NodeFilter.SHOW_COMMENT,ci[Node.DOCUMENT_FRAGMENT_NODE]=NodeFilter.SHOW_DOCUMENT_FRAGMENT,ci[Node.DOCUMENT_NODE]=NodeFilter.SHOW_ALL,ci[Node.DOCUMENT_TYPE_NODE]=NodeFilter.SHOW_DOCUMENT_TYPE,ci[Node.ELEMENT_NODE]=NodeFilter.SHOW_ELEMENT,ci[Node.ENTITY_NODE]=NodeFilter.SHOW_ENTITY,ci[Node.ENTITY_REFERENCE_NODE]=NodeFilter.SHOW_ENTITY_REFERENCE,ci[Node.NOTATION_NODE]=NodeFilter.SHOW_NOTATION,ci[Node.PROCESSING_INSTRUCTION_NODE]=NodeFilter.SHOW_PROCESSING_INSTRUCTION,ci[Node.TEXT_NODE]=NodeFilter.SHOW_TEXT,ci),Ni=function(){function t(t,n,i,r){this.Ir=t,this.En=n,this.Lr=i,this.bn=r,this._r=!1}var n;return t.prototype.setAnonymization=function(t){this.Cr=t},t.prototype.isDOMSerializationInProgress=function(){return this._r},t.prototype.serializeInitialDom=function(t,n){if(this.Ir.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){J.error(t)}));else{var i=this.Mr(t);n(i)}},t.prototype.Mr=function(t){return{args:[this.Ir.serialize(t,{withAnonymization:this.Cr})],date:xt(),type:Cn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:this._r=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.Ir.startSerializeAsync(t,{withAnonymization:this.Cr})];case 2:return[2,n.sent()];case 3:return this._r=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n=this.En.getId(t.target);if(!n)return J.warn("serializeMutationCharacterData: node without identifier"),null;var i=t.target;if(i.data===t.oldValue)return null;if(v(i)&&this.bn.shouldEncrypt(i))return this.bn.registerTextNodeMutationToEncrypt({targetId:n,textNode:i,serializedTextData:Ai(i.data),date:t.date}),null;var r=[n,this.Lr.getAnonymizedText(this.Cr,i,i.data)];return this.Pr(this.Ir)&&this.isDOMSerializationInProgress()&&this.Ir.handleMutationCharacterData(t,r),r},t.prototype.serializeAttachShadowEvent=function(t){var n=this.En.getId(t.target);return n?[n,this.Ir.serialize(t.shadowRoot)]:(J.warn("serializeAttachShadowEvent: node without identifier"),null)},t.prototype.serializeMutationAttribute=function(t){var n=this.En.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,s=t.attributeNamespace,e=fi.getAttributeNS(t.target,s,r);e&&(e=this.Lr.getAnonymizedAttributeValue(i,this.Cr,r,e));var u=[n,s,r,e];return this.Pr(this.Ir)&&this.isDOMSerializationInProgress()&&this.Ir.handleMutationAttribute(t.oldValue?this.Lr.getAnonymizedAttributeValue(i,this.Cr,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.En.getId(t.target);return i?this.Pr(this.Ir)&&this.isDOMSerializationInProgress()?this.Ir.serializeMutationChildList(t,this.Cr,n):{removedNodes:this.Dr(t),addedNodes:this.Ur(t,i,n)}:null},t.prototype.Pr=function(t){return t.isAsynchronous()},t.prototype.Dr=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.En.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.Ur=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.En.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var h=t.addedNodes[u],o=this.Ir.serialize(h,{excludedNodes:i,withAnonymization:this.Cr}),c=i.get(h);c&&i.set(h,c-1),csArray.prototype.push.call(r,[n,s,o])}return r},ot([(n="serializeDocumentAsync",function(t,i,r){var s=r.value;r.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!Gn)return r.value=s,s.apply(this,t);Xn(n);var e=s.apply(this,t);return e.then((function(){$n(n)})),e}})],t.prototype,"serializeDocumentAsync",null),t}(),Ti=function(){function t(t,n,i,r){var s=this;this.qr=t,this.En=n,this.Sn=i,this.ni=r,this.jr()&&(this.Fr=this.qr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,i=t.args;return s.sendInsertion(n,i)}})),this.Hr()&&(this.Vr=this.qr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,i=t.args;return s.sendDeletion(n,i)}})),this.zr()&&(this.Jr=this.qr.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return s.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){this.Fr&&this.Fr.activate(),this.Vr&&this.Vr.activate(),this.Jr&&this.Jr.activate()},t.prototype.stop=function(){this.Fr&&this.Fr.deactivate(),this.Vr&&this.Vr.deactivate(),this.Jr&&this.Jr.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Gr(t);if((null==i?void 0:i.ownerNode)&&(!z(i.ownerNode)||!this.Sn.isSensitiveChild(i.ownerNode))){var r=this.En.getId(i.ownerNode);if(r){var s=this.Wr(i.cssRules,t.parentRule),e={date:xt(),type:Cn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,n]};this.ai(e),this.ni.scanCssString(n)}}},t.prototype.Gr=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.Wr=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.jr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Hr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t.prototype.zr=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!z(t.ownerNode)||!this.Sn.isSensitiveChild(t.ownerNode))){var s=this.En.getId(t.ownerNode);if(s){var e={date:xt(),type:Cn.STYLESHEET_RULE_INSERT,args:F(r)?[s,i,r]:[s,i]};this.ai(e),this.ni.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!z(t.ownerNode)||!this.Sn.isSensitiveChild(t.ownerNode))){var r=this.En.getId(t.ownerNode);if(r){var s={date:xt(),type:Cn.STYLESHEET_RULE_DELETE,args:[r,i]};this.ai(s)}}},ot([G("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),ot([G("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),ot([G("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),Ri=function(){function t(){this.Br=[],this.Kr=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var s=csArray.prototype.pop.call(i),e=s.root;null!==e;)if(r&&n&&n.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.Kr,this.Kr+=1,a(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):A(e)&&this.Yr(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var s=n.__contentsquare_identifier;if(s&&i.add(s),a(n)&&csElementshadowRoot.apply(n)){var e=csElementshadowRoot.apply(n);this.getIds(e).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Br,t)},t.prototype.Yr=function(t){for(var n=0,i=this.Br;n<i.length;n++){(0,i[n])(t)}},t}(),ki="data-cs-mask",Oi=function(){function t(t){this.Sn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.Xr(t)||this.$r(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.Xr(t)&&!g(t)&&(csArray.prototype.push.call(n,this.Zr(t)),t.hasAttribute(ki)||csArray.prototype.push.call(n,document.createAttribute(ki))),csArray.prototype.filter.call(n,(function(n){return!i.Sn.isSensitiveAttribute(t,n.name)}))},t.prototype.Xr=function(t){return a(t)&&this.Sn.isSensitive(t)},t.prototype.$r=function(t){return S(t)&&this.Sn.isSensitive(t.host)},t.prototype.Zr=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),i},t}(),Ii=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},xi=null!==(Ei=Ii(Element))&&void 0!==Ei?Ei:Ii(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(Si||(Si={}));var Li=function(t){this.csId=t.__contentsquare_identifier,this.nodeType=t.nodeType,this.format=Si.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var _i,Ci=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,xi.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r}return ut(n,t),n}(Li),Mi=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",X],Pi=function(){function t(t,n){this.G=t,this.J=n,this.Qr=[],this.ns=""}return t.prototype.init=function(){this.Qr=at(at([],Mi,!0),this.J.whitelistedAttributes,!0)},t.prototype.beforeSerializeChildren=function(t,n,i){return(y(t)||this.rs(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=s},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?Ai(r):this.G.anonymizeEmail(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(y(csNodeparentNode.apply(n)))return i;if(this.rs(csNodeparentNode.apply(n)))return this.G.anonymizeEmail(i)}return t?Ai(i):this.G.anonymizeEmail(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.ss(i)||a(s=t)&&"ownerSVGElement"in s?r:n?"":this.G.anonymizeEmail(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this.ns=t},t.prototype.getWhitelistedElementsSelector=function(){return this.ns},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof Ci&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.ss=function(t){return-1!==csArray.prototype.indexOf.call(this.Qr,t)},t.prototype.rs=function(t){return a(t)&&(t.hasAttribute("data-cs-capture")||this.es(t))},t.prototype.es=function(t){return!!this.ns&&W.call(t,this.ns)},t}(),Di=function(){function t(t){this.us={},this.hs=new vi(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.hs.isThresholdReached()||(this.hs.addString(n),"string"==typeof r?this.hs.addString(r):this.hs.addArrayBuffer(r),this.hs.isThresholdReached()||(this.us[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.cs(),(function(t){var r=n.us[t];void 0!==r&&(csArray.prototype.push.call(i,r),n.fs(t))})),0!==i.length&&(t(i),this.hs.reset())},t.prototype.cs=function(){return Object.keys(this.us)},t.prototype.fs=function(t){delete this.us[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(_i||(_i={}));var Ui=function(){function t(t,n,i){this.vs=t,this.ls=i,this.ds=_i.NOT_STARTED,this.ws=[],this.ys=0,this.hs=new vi(n),this.ps()}return t.prototype.ps=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,this.gs()];case 1:return t.sent(),this.ds===_i.READY?this.As():this.ls(this.ws),[2]}}))}))},t.prototype.As=function(){var t=this;csArray.prototype.forEach.call(this.ws,(function(n){t.save(n)})),this.ws=[]},t.prototype.save=function(t){return ct(this,void 0,void 0,(function(){var n,i,r;return ft(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.ds===_i.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.ws,t),[2]):this.ds!==_i.READY||this.hs.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.hs.addString(n),"string"==typeof r?this.hs.addString(r):this.hs.addArrayBuffer(r),this.hs.isThresholdReached()?[2]:[4,this.Dt.put(n,new Response(r,{headers:i}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:return this.Dt?[3,2]:[4,this.gs()];case 1:if(n.sent(),this.ds!==_i.READY)return[2];n.label=2;case 2:return this.Es(t),[2]}}))}))},t.prototype.gs=function(){return ct(this,void 0,void 0,(function(){var t;return ft(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.ds=_i.OPEN_IN_PROGRESS,t=this,[4,window.caches.open(this.vs)];case 1:return t.Dt=n.sent(),this.ds=_i.READY,[3,3];case 2:return n.sent(),this.ds=_i.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.Es=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e=this;return ft(this,(function(u){switch(u.label){case 0:return u.trys.push([0,,5,6]),this.ys++,this.ys>1?[2]:[4,this.Dt.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.Dt.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return e.Dt.delete(t)})))];case 4:return u.sent(),t(s),this.hs.reset(),[3,6];case 5:return this.ys--,[7];case 6:return[2]}}))}))},t}(),qi=function(){function t(t){"caches"in window?this.Ss(t):this.bs()}return t.prototype.save=function(t){this.Ns.save(t)},t.prototype.recover=function(t){this.Ns.recover(t)},t.prototype.Ss=function(n){var i=this;this.Ns=new Ui(n,t.Ts,(function(t){i.bs(t)}))},t.prototype.bs=function(n){var i=this;this.Ns=new Di(t.Ts),n&&csArray.prototype.forEach.call(n,(function(t){i.Ns.save(t)}))},t.Ts=16777216,t}(),ji=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Rs=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Rs,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Rs,(function(t,n){return ht(ht({},n.getRequestParameters()),t)}),{})},t}(),Fi=function(){function t(t,n){this.ks=t,this.J=n,this.Os=!1,this.Is=null}return t.prototype.start=function(){this.Os=!0,this.xs()},t.prototype.stop=function(){this.Os=!1,this.Ls()},t.prototype.trackActivity=function(){this.Os||(this.Os=!0,this._s()),this.Ls(),this.xs()},t.prototype.xs=function(){var t=this;this.Is=this.ks.create("recorded user inactive",(function(){t.Os=!1,t.Ls(),t.Cs()}),this.J.pendingInactivityTimeout)},t.prototype.Ls=function(){null!==this.Is&&(this.Is.cancel(),this.Is=null)},t.prototype.isUserActive=function(){return this.Os},t.prototype.onActivityStopped=function(t){this.Cs=t},t.prototype.onActivityResumed=function(t){this._s=t},t}(),Hi=function(){function t(t,n,i){var r=this;this.Ms=t,this.Ps=n,this.an=i,this.hn=setTimeout((function(){r.execute()}),this.an)}return t.prototype.execute=function(){var t=this;J.tryToExecute(this.Ms,(function(){t.Ps()}))()},t.prototype.cancel=function(){clearTimeout(this.hn)},t}(),Vi=function(){function t(){}return t.prototype.create=function(t,n,i){return new Hi(t,n,i)},t}(),zi=function(){function t(t,n){var i=this;this.Bt=t,this.G=n,this.Ds=[{boundElement:window,type:"resize",listener:function(){return i.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return i.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return i.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){this.qn(),this.triggerInitialEvents()},t.prototype.stop=function(){this.zn()},t.prototype.qn=function(){csArray.prototype.forEach.call(this.Ds,(function(t){return Hn(t)}))},t.prototype.zn=function(){csArray.prototype.forEach.call(this.Ds,(function(t){return Vn(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t={type:Cn.RESIZE,args:[oi.windowWidth(),oi.windowHeight()],date:xt()};this.ai(t)},t.prototype.hashChangeListener=function(){var t={type:Cn.HASH_CHANGE,args:[this.G.anonymizeEmail(this.Bt.href)],date:xt()};this.ai(t)},t.prototype.visibilityChangeListener=function(){var t={type:Cn.VISIBILITY_CHANGE,args:[document.visibilityState],date:xt()};this.ai(t)},ot([G("resize")],t.prototype,"resizeListener",null),ot([G("hashChange")],t.prototype,"hashChangeListener",null),ot([G("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Ji=function(t){function n(n,i,r,s,e,u){var h=t.call(this)||this;return h.ki=n,h.Ri=i,h.Us=r,h.Si=s,h.Qn=e,h.ii=u,h.qs=0,h}return ut(n,t),n.prototype.init=function(){var t=this;this.ki.onEvent((function(){t.js()})),this.Si.after((function(){t.qs+=1,t.Fs()})),this.Us.onActivityStopped((function(){t.Fs()})),this.Us.onActivityResumed((function(){t.Ri.isStarted()||t.Hs()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.js()},n.prototype.onStart=function(){this.Us.start()},n.prototype.onStop=function(){this.Us.stop()},n.prototype.Fs=function(){this.Ri.isStarted()&&!this.Qn.isDOMSerializationInProgress()&&!this.Us.isUserActive()&&this.qs>=2&&this.Vs()},n.prototype.js=function(){this.Us.trackActivity(),this.qs=0},n.prototype.Vs=function(){this.Ri.stop(),this.ii.emitRecordingStatusChange()},n.prototype.Hs=function(){this.Ri.start(),this.ii.emitRecordingStatusChange()},n}(yi);function Gi(t){return t.replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var s=parseInt(i,16);return 55296<=s&&s<=57343||0===s||s>1114111?"":String.fromCodePoint(s)}))}var Wi=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Bi(t){return-1===t.indexOf('"')?'"'+t+'"':-1===t.indexOf("'")?"'"+t+"'":t}function Ki(t){var n=[];return function(t,n){var i=t.replace(Wi,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=Gi((r||s).trim());return(r?"@import ":"")+"url("+Bi(n(e)||e)+")"}))}(t,(function(t){return n.push(t),t})),n}function Yi(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),s=r[0],e=r[1];return e?(x(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),at([Xi(s)],Yi(e),!0)):[Xi(s)]}function Xi(t){return csString.prototype.split.call(t,/,$/)[0]}var $i,Zi=function(){function t(){}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.serializeElementNode=function(t){this.scanElement(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.zs(t,n),n},t.prototype.scanElement=function(t){this.Js(t)},t.prototype.scanAttribute=function(t,n){this.Js(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&y(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.zs=function(t,n){var i=this;y(t)&&ei(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.Js=function(t,n){this.Gs(t,n),this.Ws(t,n),this.Bs(t,n)},t.prototype.Gs=function(t,n){!d(t)||n&&"href"!==n||!t.href||this.Ks(t.href)},t.prototype.Ws=function(t,n){w(t)&&(n&&"src"!==n||!t.src||this.Ys(t.src)||null===t.getAttribute("src")||this.Xs(t.getAttribute("src"))||this.Ks(t.src),n&&"srcset"!==n||!t.srcset||this.$s(t.srcset))},t.prototype.Bs=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.Xs=function(t){return I(t,"#")},t.prototype.Ys=function(t){return I(t,"data:")},t.prototype.scanCssString=function(t){this.Zs(Ki(t))},t.prototype.$s=function(t){this.Zs(Yi(t))},t.prototype.Zs=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.Ys(t)})),(function(t){return!n.Xs(t)})),(function(t){return jt(t)})),(function(t){return n.Ks(t)}))},t.prototype.Ks=function(t){var n={date:xt(),type:Cn.STATIC_RESOURCE_URL,args:[t]};this.ai(n)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}($i||($i={}));var Qi=function(){function t(t){this.Qs=t.performance}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){this.te()&&this.ne()},t.prototype.ne=function(){var t={args:this.ie(),date:xt(),type:Cn.PERFORMANCE_TIMINGS};this.ai(t)},t.prototype.te=function(){return!(!this.Qs||!this.Qs.timing)},t.prototype.ie=function(){return[{performanceTiming:$i.REQUEST_START,timestamp:this.Qs.timing.requestStart},{performanceTiming:$i.DOM_INTERACTIVE,timestamp:this.Qs.timing.domInteractive}]},t}(),tr=function(){function t(t,n){void 0===t&&(t=40),void 0===n&&(n=0),this.se=t,this.ee=n,this.ue=[],this.i=!1,this.he=0,this.hn=-1}return t.prototype.schedule=function(t){csArray.prototype.push.call(this.ue,t),this.oe()},t.prototype.oe=function(){return ct(this,void 0,void 0,(function(){var t,n,i,r=this;return ft(this,(function(s){switch(s.label){case 0:if(this.i)return[2];this.i=!0,window.clearTimeout(this.hn),s.label=1;case 1:return this.ue.length?this.he>=this.se?[4,this.ce()]:[3,3]:[3,4];case 2:s.sent(),this.he=0,s.label=3;case 3:return t=window.performance.now(),(n=csArray.prototype.shift.call(this.ue))?(this.runTask(n),i=window.performance.now()-t,this.he+=i,[3,1]):[3,4];case 4:return this.i=!1,this.hn=window.setTimeout((function(){r.he=0})),[2]}}))}))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.ue,(function(n){t.runTask(n)})),this.ue=[]},t.prototype.clearQueue=function(){this.ue=[]},t.prototype.ce=function(){var t=this;return new Promise((function(n){return setTimeout((function(){n()}),t.ee)}))},t.prototype.isEmpty=function(){return 0===this.ue.length},t.isSupported=function(){return"function"==typeof window.Promise},ot([G("TaskScheduler"),Zn("runTask")],t.prototype,"runTask",null),ot([Zn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),nr=function(t){function n(n,i){var r=t.call(this)||this;return r.qr=n,r.fe=r.handleMutationsSync,r.ae=new Map,i&&i.experimentalMutationObserver&&tr.isSupported()&&(r.ve=new tr(i.experimentalMutationObserver.maxProcessingTime,i.experimentalMutationObserver.waitDuration),r.fe=r.handleMutationsAsync),r}return ut(n,t),n.prototype.init=function(){this.le(),this.de()},n.prototype.de=function(){var t=this;this.we=new csMutationObserver((function(n){t.fe(n)}))},n.prototype.le=function(){var t=this;this.ye()&&(this.pe=this.qr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.ge()&&(this.Ae=this.qr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Ee=t},n.prototype.onCharacterDataMutation=function(t){this.Se=t},n.prototype.onAttributesMutation=function(t){this.be=t},n.prototype.onAttachShadowMutation=function(t){this.Ne=t},n.prototype.observe=function(t,n){this.isStarted&&this.we.observe(t,n)},n.prototype.onStart=function(){this.pe&&this.pe.activate(),this.Ae&&this.Ae.activate()},n.prototype.onStop=function(){this.pe&&this.pe.deactivate(),this.Ae&&this.Ae.deactivate(),this.ve&&this.ve.clearQueue(),this.we.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.ve&&this.ve.runPendingTasks();var t=this.we.takeRecords();this.handleMutationsSync(t)}},n.prototype.ye=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.ge=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutationsSync=function(t){var n=xt(),i=t.length>1?this.Te(t):t;this.ae.clear(),this.Re(i);for(var r=0;r<i.length;r+=1){var s=i[r];s.date=n,this.processMutation(s,this.ae)}},n.prototype.handleMutationsAsync=function(t){var n=xt(),i=t.length>1?this.Te(t):t;this.ve.isEmpty()&&this.ae.clear(),this.Re(i);for(var r=0;r<i.length;r+=1){var s=i[r];s.date=n,this.ke(s,this.ae)}},n.prototype.Te=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(a=t[i]).type){var r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e),h=n.get(r),o=fi.getAttributeNS(r,s,e)===a.oldValue?"none":"last";if(h)h.has(u)||h.set(u,o);else{var c=new Map;c.set(u,o),n.set(r,c)}}}var f=[];for(i=t.length-1;i>=0;i-=1){var a;if("attributes"===(a=t[i]).type){r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e);"last"===(h=n.get(r)).get(u)&&(csArray.prototype.push.call(f,a),h.set(u,"none"))}else csArray.prototype.push.call(f,a)}return csArray.prototype.reverse.call(f)},n.prototype.handleAttachShadow=function(t,n){this.Ne({shadowRoot:n,date:xt(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.be(t);break;case"characterData":this.Se(t);break;case"childList":this.Ee(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.ke=function(t,n){var i=this;this.ve.schedule((function(){i.processMutation(t,n)}))},n.prototype.Re=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){ei(t.addedNodes,(function(t){var i=n.ae.get(t);i?n.ae.set(t,i+1):n.ae.set(t,1)}))}))},ot([Zn("handleMutationsSync"),G("handleMutationsSync")],n.prototype,"handleMutationsSync",null),ot([G("handleMutationsAsync")],n.prototype,"handleMutationsAsync",null),ot([Zn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),ot([Zn("processMutation")],n.prototype,"processMutation",null),n}(yi),ir=function(t){function n(n,i,r){var s=t.call(this,n,null==r?void 0:r.experimental)||this;return s.En=i,s.Oe={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},s}return ut(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Dn()},n.prototype.Dn=function(){var t=this;this.En.onDocumentIdentified((function(n){t.observe(n,t.Oe)}))},n}(nr);function rr(){var t,n=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?sr(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":sr(n[0]))}function sr(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var er,ur=function(){function t(){this.Ie=function(t,n){return{context:t,args:n}}}return t.prototype.xe=function(t,n){t.prototype=n.prototype,Object.defineProperty(t,"toString",{value:function(){return n.toString()}})},t.prototype.createSyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Ie:e,h=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var o=!1,c=i[r];if("function"==typeof c){var f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,r=u(this,t),e=c.apply(this,t);o&&(h&&h.withCallerName&&(i=rr()),J.tryToExecute("SyncFunctionInterceptor",(function(){s(ht(ht({result:e},r),{callerName:i}))}))());return e};this.xe(f,c),i[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createAsyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Ie:e,h=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var o=!1,c=i[r];if("function"==typeof c){var f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ct(this,void 0,void 0,(function(){var n,i,r;return ft(this,(function(e){return n=u(this,t),i=c.apply(this,t),o&&(h&&h.withCallerName&&(r=rr()),J.tryToExecute("AsyncFunctionInterceptor",(function(){s(ht(ht({result:i},n),{callerName:r}))}))()),[2,i]}))}))};this.xe(f,c),i[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createDescriptorInterceptor=function(t,n,i){var r=!1,s=Object.getOwnPropertyDescriptor(t,n);if(s){if(!s.configurable)return J.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,ht(ht({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=this,n=arguments,e=s.set.apply(this,n);return r&&J.tryToExecute("DescriptorInterceptor",(function(){i(t,n[0])}))(),e}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t}();!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(er||(er={}));var hr=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.Le=new Map,i)for(var r=csString.prototype.split.call(i,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],h=e[1];this.Le.set(u,h||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.Le)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(er.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,s){var e,u=r.toString(),h="".concat(null===(e=i.constructor)||void 0===e?void 0:e.name,".").concat(u),o=s.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(s.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,at([h],t,!1)),o.bind(this).apply(void 0,t)})}},t}();hr.init();var or=function(){function t(){this._e=[],this.Ce=[]}return t.prototype.isFull=function(){return this._e.length>=t.Me||this.Ce.length>=t.Me},t.prototype.isEmpty=function(){return 0===this._e.length&&0===this.Ce.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this._e,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Ce,t)},t.prototype.clear=function(){this._e=[],this.Ce=[]},t.prototype.flushIdsSeenGlobally=function(){var t=at([],this._e,!0);return this._e=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=at([],this.Ce,!0);return this.Ce=[],t},t.Me=20,t}();function cr(t){return"$$"+t}cr.asyncIterator="$$asyncIterator";var fr=void 0!==window.Symbol?window.Symbol:cr,ar=!!window.IntersectionObserver&&!!window.IntersectionObserverEntry;function vr(t,n){if(!ar)throw new Error("IntersectionObserver is not supported");if((null==n?void 0:n.delay)<100)throw new Error("Visibility delay should be > 100ms");var i="isVisible"in IntersectionObserverEntry.prototype;return(null==n?void 0:n.trackVisibility)&&(t=i?function(t){return function(n,i){n=csArray.prototype.map.call(n,(function(t){return{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,isVisible:t.isVisible||fi.isInViewPort(t.target),rootBounds:t.rootBounds,target:t.target,time:t.time}})),t(n,i)}}(t):function(t){return function(n,i){csArray.prototype.forEach.call(n,(function(t){return t.isVisible=fi.isInViewPort(t.target)})),t(n,i)}}(t)),new IntersectionObserver(t,n)}var lr,dr=function(){function t(t,n){var i=this;this.Pe=t,this.De=fr("isVisible"),this.Ue=fr("knownElement"),this.qe=fr("Tracked"),this.je=[],this.Fe=!0,this.He=function(t){for(var n=0,r=t;n<r.length;n++){var s=r[n];if(s.isVisible){var e=null===s.target[i.De];s.target[i.De]=!0,e&&!i.Ve.delay&&i.ze(s.target,lr.VisibleInViewPort)}else{switch(fi.isVisibleInDocument(s.target)?lr.VisibleOutsideViewPort:s.isIntersecting?lr.HiddenByAnother:lr.Hidden){case lr.Hidden:case lr.HiddenByAnother:i.Je(s.target);break;case lr.VisibleOutsideViewPort:i.ze(s.target,lr.VisibleOutsideViewPort)}}}i.Ve.delay&&setTimeout((function(){for(var n=0,r=t;n<r.length;n++){var s=r[n],e=s.isIntersecting&&s.isVisible;s.target[i.De]&&e&&i.ze(s.target,lr.VisibleInViewPort)}}),i.Ve.delay)},this.Ve=ht(ht({},wr),n),this.Ge()}return t.prototype.onVisibilityChange=function(t){csArray.prototype.push.call(this.je,t)},t.prototype.stop=function(){this.Fe=!0},t.prototype.Ge=function(){return ct(this,void 0,void 0,(function(){var t,n=this;return ft(this,(function(i){return this.Fe=!1,t={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300},this.We=vr(this.He,t),this.ti=new csMutationObserver((function(t){return csArray.prototype.forEach.call(t,(function(t){n.Be(t.target)}))})),this.Pe.onElementAvailable((function(t){n.Fe||n.Ke(t)})),[2]}))}))},t.prototype.Be=function(t){if(t.isConnected&&!fi.areAncestorsHiddenByCSS(t))for(var n,i=this.Pe.getElements(t);n=i.next().value;)this.Ke(n)},t.prototype.Ke=function(t){if(!t[this.Ue]){this.We.unobserve(t);var n=fi.getTopAncestorHiddenByCSS(t);n?this.Je(n):(t[this.Ue]=!0,this.We.observe(t))}},t.prototype.Je=function(n){delete n[this.De],delete n[this.Ue],this.We.unobserve(n),this.ti.observe(n,{attributeFilter:t.Ye,subtree:!0})},t.prototype.ze=function(t,n){if(n===lr.VisibleInViewPort&&this.Ve.trackOnce){if(t[this.qe])return;t[this.qe]=!0,this.We.unobserve(t)}csArray.prototype.forEach.call(this.je,(function(i){return i(t,n)}))},t.Ye=["style","class","hidden"],t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(lr||(lr={}));var wr={delay:1e3,trackOnce:!0};function yr(t,n){var i,r,s,e,u=function(){r=null;var n=xt()-s;e=t.apply(void 0,at([n],i,!1)),s=null},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return s||(s=xt()),r&&window.clearTimeout(r),i=at([],t,!0),r=window.setTimeout(u,n),e};return h.flushPending=function(){r&&(window.clearTimeout(r),u())},h}function pr(t){return void 0===t&&(t=0),function(n,i,r){var s=r.value,e=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(n,i)}),t))}}}var mr,gr,Ar=function(){function t(t){this.Kt=t}return t.prototype.push=function(t){this.Xe||(this.Xe=[],this.flush()),csArray.prototype.push.call(this.Xe,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.Xe,this.Kt),this.Xe=void 0},ot([pr(),G("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),Er=function(){function t(t){var n=this;this.Sn=t,this.$e=!1,this.Xe=new Ar((function(t){return t.isConnected&&n.Ze(t)}))}return t.prototype.onElementAvailable=function(t){this.Ze=t},t.prototype.serializeTextNode=function(t,n,i){if(i.withAnonymization||!this.$e)return n;var r=this.Qe(t);return r&&this.Xe.push(r),n},t.prototype.getElements=function(t){var n,i,r;return ft(this,(function(s){switch(s.label){case 0:n=fi.createDeepTreeWalker(t,NodeFilter.SHOW_TEXT),s.label=1;case 1:return(i=n.nextNode())?(r=this.Qe(i))?[4,r]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.start=function(){this.$e=!0},t.prototype.stop=function(){this.$e=!1},t.prototype.Qe=function(t){var n=fi.getParentElement(t);return!n||!n.isConnected||this.Sn.isSensitive(n)||this.Sn.isSensitiveChild(n)||y(n)||g(n)||fi.isEmpty(t.data)?null:n},t}(),Sr=function(){function t(t,n){var i=this;this.Sn=t,this.tu=n,this.$e=!1,this.nu=new Set,this.iu=new Set,this.ru=new or,this.ze=function(t,n){switch(n){case lr.VisibleInViewPort:i.onVisibleInViewPort(t);break;case lr.VisibleOutsideViewPort:i.onVisibleOutsideViewPort(t)}i.ru.isFull()&&i.su()}}return t.isSupported=function(){return!!window.IntersectionObserver},t.prototype.serializeTextNode=function(n,i,r){return this.Pe||(J.warn("TextVisibility: Source was not initialized. (".concat(t.isSupported(),")")),this.start()),this.Pe.serializeTextNode(n,i,r)},t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){this.$e||(this.Pe=new Er(this.Sn),this.Pe.start(),this.eu=new dr(this.Pe,{delay:this.tu}),this.eu.onVisibilityChange(this.ze),this.$e=!0)},t.prototype.stop=function(){this.$e&&(this.Pe.stop(),this.eu&&this.eu.stop(),this.ru.clear(),this.nu.clear(),this.iu.clear(),this.$e=!1)},t.prototype.flushEvents=function(){this.$e&&this.su()},t.prototype.onVisibleInViewPort=function(t){var n=Ri.getId(t);this.onVisibleOutsideViewPort(t),this.nu.has(n)||(this.nu.add(n),this.ru.addIdInViewPort(n))},t.prototype.onVisibleOutsideViewPort=function(t){var n=Ri.getId(t);this.iu.has(n)||(this.iu.add(n),this.ru.addIdInGlobally(n))},t.prototype.su=function(){if(!this.ru.isEmpty()){var t={visibleGlobally:this.ru.flushIdsSeenGlobally(),visibleInViewPort:this.ru.flushIdsSeenInViewport()},n={type:Cn.TEXT_VISIBILITY,date:xt(),args:[t]};this.ai(n)}},ot([hr.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),ot([hr.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),br=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.hu=[],r.ou=[],r}return ut(n,t),n.prototype.setRequestPayloadProvider=function(t){this.dn=t},n.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.hu,t)},n.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.ou,t)},n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters(),n=vt.toQuery(t),i=this.mn();this.fu(n,i)?csArray.prototype.forEach.call(this.hu,(function(t){return t()})):csArray.prototype.forEach.call(this.ou,(function(t){return t()})),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.mn=function(){return this.dn?this.dn.getRequestPayload():""},n.prototype.fu=function(t,n){return void 0!==csNavigatorsendBeacon&&csNavigatorsendBeacon("".concat(this.domainUri,"/").concat(this.path,"?").concat(t),n)},n}(wt),Nr=function(){function t(t,n,i,r,s,e,u,h,o,c){this.En=t,this.j=n,this.au=i,this.vu=r,this.lu=s,this.du=e,this.wu=u,this.yu=h,this.pu=o,this.vn=c,this.mu=8e3,this.gu=64e3,this.Au=2e3,this.Eu=2e3,this.Su="",this.bu=document.createElement("div"),this.Nu=null,this.Tu=!1,this.Ru="[data-cs-encrypt]"}return t.prototype.setEncryptionSelectors=function(t){B(t,this.bu)&&(this.Ru+=",".concat(t))},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return!(!p(t)&&!m(t)||!W.call(t,this.Ru)||"password"===t.type);case Node.COMMENT_NODE:case Node.TEXT_NODE:var n=t.parentElement;return!!(n&&v(t)&&W.call(n,this.Ru));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.ku=t},t.prototype.onInputNodeToEncrypt=function(t){this.Ou=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.Iu=t},t.prototype.onApiErrorToEncrypt=function(t){this.xu=t},t.prototype.init=function(){var t=this;this.Lu()&&(this._u=new TextEncoder,this.lu.onSerializeData((function(n){return t.Cu(n)})),this.du.onSerializeData((function(n){return t.Mu(n)})),this.wu.onSerializeData((function(n){return t.Pu(n)})),this.yu.onSerializeData((function(n){return t.Du(n)})),this.pu.onSerializeData((function(n){return t.Uu(n)})),this.qu(this.j.encryptionPublicKey))},t.prototype.qu=function(t){return ct(this,void 0,void 0,(function(){var n;return ft(this,(function(i){switch(i.label){case 0:return[4,this.au.importKey(t)];case 1:return n=i.sent(),this.Tu=!0,n?(this.Nu=n,this.lu.serializeDataFromBuffer(),this.yu.serializeDataFromBuffer()):(this.lu.clear(),this.yu.clear(),J.warn("Fail to import public key '".concat(t,"'"))),this.du.serializeDataFromBuffer(),this.wu.serializeDataFromBuffer(),this.pu.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Lu()&&(this.Tu?this.Cu(t):this.lu.addData(t))},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Lu()&&(this.Tu?this.Mu(t):this.du.addData(t))},t.prototype.registerInputNodeToEncrypt=function(t){this.Lu()&&(this.Tu?this.Pu(t):this.wu.addData(t))},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Lu()&&(this.Tu?this.Du(t):this.yu.addData(t))},t.prototype.registerApiErrorToEncrypt=function(t){this.Lu()?this.Tu?this.Uu(t):this.pu.addData(t):this.ju(t)},t.prototype.Lu=function(){return this.j.encryptionEnabled&&!!this.j.encryptionPublicKey&&this.j.encryptionPublicKeyId>0&&this.au.isSupported()&&this.vu.isSupported()},t.prototype.Cu=function(t){var n=this,i=t.textNode,r=this.En.getId(i);if(r){if(this.Nu){var s=ht(ht({},t),{targetId:r,date:xt()});this.Fu(s,(function(t){return t.textNode.data}),(function(){return J.warn("Fail to encrypt text node data")}),(function(t,i){return n.Hu(t,i)}))}}else J.warn("serializeTextNodeToEncrypt: node without identifier")},t.prototype.Mu=function(t){var n=this;if(!this.Nu)return this.Vu(t);this.Fu(t,(function(t){return t.textNode.data}),(function(){J.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),n.Vu(t)}),(function(t,i){return n.Hu(t,i)}))},t.prototype.Pu=function(t){var n=this;if(!this.Nu)return this.zu(t);this.Fu(t,(function(t){return t.targetValue}),(function(){J.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),n.zu(t)}),(function(t,i){return n.Ju(t,i)}))},t.prototype.Du=function(t){var n=this;this.Nu&&this.Fu(t,(function(t){return t.userIdentifier}),(function(){J.warn("Fail to encrypt userIdentifier")}),(function(t,i){return n.Gu(t,i)}))},t.prototype.Fu=function(t,n,i,r){return ct(this,void 0,void 0,(function(){var s,e;return ft(this,(function(u){switch(u.label){case 0:return s=n(t),[4,this.au.encrypt({publicKey:this.Nu},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(i(t),[2])}}))}))},t.prototype.Vu=function(t){var n=t.targetId,i=t.serializedTextData,r={date:t.date,args:[n,i],type:Cn.MUTATION_CHARACTER_DATA};this.ku(r)},t.prototype.zu=function(t){var n=t.targetId,i=t.targetValue,r={date:t.date,args:[n,csString.prototype.replace.call(i,/\S/g,"")],type:Cn.INPUT_TEXT};this.Ou(r)},t.prototype.Hu=function(t,n){var i=t.targetId,r=t.serializedTextData,s={date:t.date,args:[i,r,n,this.j.encryptionPublicKeyId],type:Cn.MUTATION_ENCRYPTED_CHARACTER_DATA};this.ku(s)},t.prototype.Ju=function(t,n){var i=t.targetId,r=t.targetValue,s={date:t.date,args:[i,csString.prototype.replace.call(r,/\S/g,""),n,this.j.encryptionPublicKeyId],type:Cn.INPUT_ENCRYPTED_TEXT};this.Ou(s)},t.prototype.Gu=function(t,n){var i={type:Cn.USER_IDENTIFIER,args:[n,t.keyId],date:t.date};this.Iu(i)},t.prototype.Uu=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e,u,h,o,c,f,a;return ft(this,(function(v){switch(v.label){case 0:return this.Nu?[4,this.vu.generateEncryptionKey()]:(this.ju(t),[2]);case 1:if(n=v.sent(),i=this.vu.generateInitializationVector(),null===n||null===i)return this.ju(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Wu(t.customRequestHeaders,this.mu)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.Bu(n,i,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Wu(t.customResponseHeaders,this.mu)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.Bu(n,i,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Wu(t.queryParameters,this.Eu)?[3,9]:(t.queryParameters=this.Su,[3,11]):[3,11];case 9:return e=this.vn.compressSync(t.queryParameters),u=t,[4,this.Bu(n,i,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Wu(t.requestBody,this.gu)?[3,12]:(t.requestBody=this.Su,[3,14]):[3,14];case 12:return h=this.vn.compressSync(t.requestBody),o=t,[4,this.Bu(n,i,h)];case 13:o.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Wu(t.responseBody,this.Au)?[3,15]:(t.responseBody=this.Su,[3,17]):[3,17];case 15:return c=this.vn.compressSync(t.responseBody),f=t,[4,this.Bu(n,i,c)];case 16:f.responseBody=v.sent(),v.label=17;case 17:return a=t,[4,this.Ku(n,this.Nu)];case 18:return a.secret=v.sent(),[3,20];case 19:return v.sent(),this.ju(t),[2];case 20:return t.initializationVector=this.vu.exportInitializationVector(i),t.encryptionKeyId=this.j.encryptionPublicKeyId,this.xu(t),[2]}}))}))},t.prototype.Wu=function(t,n){return this._u.encode(t).byteLength<=n},t.prototype.ju=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.xu(t)},t.prototype.Bu=function(t,n,i){return ct(this,void 0,void 0,(function(){var r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.vu.encrypt({encryptionKey:t,initializationVector:n},i)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.Ku=function(t,n){return ct(this,void 0,void 0,(function(){var i,r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.vu.exportSecret(t)];case 1:if(!(i=s.sent()))throw new Error("Export secret failed");return[4,this.au.encrypt({publicKey:n},i)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),Tr=function(){function t(t){this.bn=t}return t.prototype.serializeTextNode=function(t,n){this.bn.shouldEncrypt(t)&&(n.data=Ai(t.data),this.bn.registerTextNodeToEncrypt({textNode:t,serializedTextData:n.data}))},t}(),Rr=function(){function t(){this.Yu=[]}return t.prototype.onSerializeData=function(t){this.Xu=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.Yu,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.Yu.length>0;){var t=csArray.prototype.shift.call(this.Yu);this.Xu(t)}},t.prototype.clear=function(){this.Yu=[]},t}(),kr=function(){function t(t){this.crypto=t,this.$u=!1}return t.prototype.init=function(){this.$u=this.canSupportEncryption(),this.$u&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.$u},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),Or="AES-CTR",Ir=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.exportInitializationVector=function(t){return Ln(t)},n.prototype.exportSecret=function(t){var n;return ct(this,void 0,void 0,(function(){var i;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return i=r.sent(),[2,null!==(n=i.k)&&void 0!==n?n:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateEncryptionKey=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:Or,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},n.prototype.encrypt=function(t,n){return ct(this,void 0,void 0,(function(){var i,r;return ft(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];i={counter:t.initializationVector,name:Or,length:64},r=this.textEncoder.encode(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(i,t.encryptionKey,r)];case 2:return[2,Ln(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},n}(kr),xr="RSA-OAEP",Lr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.importKey=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:if(!this.isSupported())return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",_n(t),{name:xr,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,n.sent()];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.encrypt=function(t,n){return ct(this,void 0,void 0,(function(){var i;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(i=this.Zu(n,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:xr},t.publicKey,i)];case 2:return[2,Ln(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.Zu=function(t,n){for(var i=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.Qu(e);if(u+i>n)break;r++,i+=u}var h=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(h)},n.prototype.Qu=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},n}(kr);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(mr||(mr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(gr||(gr={}));var _r=function(){function t(t,n,i){this.th=t,this.En=n,this.Sn=i}return t.prototype.start=function(){var n=this;this.th.subscribe(t.nh,(function(t){return n.ih(t)}))},t.prototype.stop=function(){this.th.unsubscribe(t.nh)},t.prototype.onEvent=function(t){this.ai=t},t.prototype.ih=function(t){if(t.target&&(!a(t.target)||!this.Sn.isSensitiveChild(t.target))){var n=this.En.getId(t.target);if(n)switch(t.type){case mr.DRAG:case mr.FLICK:this.rh(Pn.SWIPE,t,n);break;case mr.LONG_PRESS:this.rh(Pn.LONG_PRESS,t,n);break;case mr.TAP:this.rh(Pn.TAP,t,n);break;case mr.PINCH_IN:this.rh(Pn.PINCH_IN,t,n);break;case mr.PINCH_OUT:this.rh(Pn.PINCH_OUT,t,n)}else J.warn("processGesture: node without identifier")}},t.prototype.rh=function(t,n,i){var r=this.eh(n,t),s={type:Cn.GESTURE_RECOGNITION,args:[i,r],date:xt()};this.ai(s)},t.prototype.eh=function(t,n){var i={type:n};return t.direction&&(i.direction=t.direction),t.distance&&(i.distance=t.distance),t.velocity&&(i.velocity=t.velocity),i},t.nh="RecordingGesturesTracker",t}(),Cr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i}return ut(n,t),n}(Li),Mr=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},Pr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i}return ut(n,t),n}(Li),Dr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i}return ut(n,t),n}(Li),Ur=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i}return ut(n,t),n}(Li),qr=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r}return ut(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(Li),jr=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i}return ut(n,t),n}(Li),Fr=function(){function t(t){this.processors=t}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,n){var i,r=ht({},n),s=t.nodeType;switch(s){case Node.ELEMENT_NODE:i=this.uh(t,r);break;case Node.TEXT_NODE:i=this.hh(t,r);break;case Node.CDATA_SECTION_NODE:i=this.oh(t,r);break;case Node.COMMENT_NODE:i=this.fh(t,r);break;case Node.DOCUMENT_TYPE_NODE:i=new Cr(t);break;case Node.DOCUMENT_NODE:i=this.ah(t,r);break;case Node.DOCUMENT_FRAGMENT_NODE:i=this.lh(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return ei(this.processors,(function(n){var s;null===(s=n.afterSerialize)||void 0===s||s.call(n,t,i,r)})),i},t.prototype.uh=function(t,n){var i,r=new Ci(t);ei(this.processors,(function(i){var s;null===(s=i.serializeElementNode)||void 0===s||s.call(i,t,r,n)})),(i=csArray.prototype.push).call.apply(i,at([r.attributes],this.yh(t,n),!1));var s=csElementshadowRoot.apply(t);return s&&(r.shadowRoot=this.ph(s,n)),r.children=this.mh(t,n),r},t.prototype.yh=function(t,n){var i=this,r=si(t.attributes);return ei(this.processors,(function(i){var s,e=null===(s=null==i?void 0:i.beforeSerializeAttributes)||void 0===s?void 0:s.call(i,t,r,n);e&&(r=e)})),csArray.prototype.map.call(r,(function(r){return i.gh(t,r,n)}))},t.prototype.gh=function(t,n,i){var r=new Mr(n);return ei(this.processors,(function(s){var e;null===(e=s.serializeAttribute)||void 0===e||e.call(s,t,n,r,i)})),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ui(r,(function(t){return!n.excludedNodes.get(t)})):r,ei(this.processors,(function(i){i.beforeSerializeChildren&&(r=i.beforeSerializeChildren(t,r,n))})),si(r)},t.prototype.mh=function(t,n){var i=this;return n.skipChildrenSerialization?[]:function(t,n){for(var i=t.length,r=new csArray(i),s=0;s<i;s+=1)r[s]=n(t[s]);return r}(this.runBeforeSerializeChildrenHook(t,n),(function(t){return i.serialize(t,n)}))},t.prototype.hh=function(t,n){var i=new Pr(t);return ei(this.processors,(function(r){var s;null===(s=r.serializeTextNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.oh=function(t,n){var i=new Dr(t);return ei(this.processors,(function(r){var s;null===(s=r.serializeCDATASectionNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.fh=function(t,n){var i=new Ur(t);return ei(this.processors,(function(r){var s;null===(s=r.serializeCommentNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.ah=function(t,n){var i=new qr(t);return i.children=this.mh(t,n),i},t.prototype.ph=function(t,n){var i=new jr(t);return ei(this.processors,(function(r){var s;null===(s=r.serializeShadowRootNode)||void 0===s||s.call(r,t,i,n)})),i.children=this.mh(t,n),ei(this.processors,(function(r){var s;null===(s=r.afterSerializeShadowRoot)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.lh=function(t,n){if(t.mode)return this.ph(t,n);throw new Error("Not implemented yet.")},t}();function Hr(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Vr=function(){function t(t){this.En=t,this.Ah=!1,this.Eh=new Map,this.Sh={},this.bh=new Map,this.Nh=new Map,this.Th=new Set,this.Rh=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.Ah?ui(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.Ah)return n;var r=this.En.getId(t);if(!r)return n;var s=this.Nh.get(r);return s?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=s.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.Ah){var r=this.bh.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.Ah){var i=this.bh.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.Ah&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.kh(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.Ah&&(i.skipRegisterNode||this.kh(n,i))},t.prototype.enable=function(){this.Ah=!0,this.Oh()},t.prototype.disable=function(){this.Ah=!1,this.Oh()},t.prototype.deleteNode=function(t){this.Eh.delete(t)},t.prototype.setDefaultSerializationOptions=function(t){this.Sh=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.Eh.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.En.getId(t);if(i)return null===(n=this.Eh.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.En.getId(t);return i&&(null===(n=this.Eh.get(i))||void 0===n?void 0:n.options)||this.Sh},t.prototype.registerInitialCharacterData=function(t,n){this.bh.get(t)||this.bh.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var s=this.Nh.get(t),e="".concat(i).concat(n||"");if(s){if(s.has(e))return}else s=new Map,this.Nh.set(t,s);var u={name:i,namespaceURI:n||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.En.getId(n);r&&this.Th.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.En.getId(i),s=this.En.getId(t);if(r&&s){var e=this.Rh.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s);else{for(var u=[],h=n?this.En.getId(n):null,o=0;o<csNodechildNodes.apply(i).length;o+=1){var c=this.En.getId(csNodechildNodes.apply(i)[o]);c&&!this.Th.has(c)&&(h&&c===h&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===h&&csArray.prototype.push.call(u,s);var f=[s];this.Rh.set(r,{childNodeIds:u,removedNodeIds:f})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&zr(r)&&this.Ih(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.En.getId(t);return!!n&&this.Th.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.En.getId(n),r=this.En.getId(t);if(!i||!r)return-1;var s=this.Rh.get(i);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.Oh=function(){this.Eh.clear(),this.bh.clear(),this.Nh.clear(),this.Th.clear(),this.Rh.clear()},t.prototype.kh=function(t,n){t.csId&&(this.xh(t.csId,t,n),this.Lh(t.csId,t),this.Eh.set(t.csId,{serializedNode:t,options:n}))},t.prototype.xh=function(t,n,i){if(function(t){return t instanceof Ci}(n)){var r=this.Nh.get(t);if(r){for(var s=0,e=n.attributes;s<e.length;s++){var u=e[s],h="".concat(u.name).concat(u.namespaceURI||""),o=r.get(h);o&&null!==o.value&&(u.value=o.value,r.delete(h))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.Ih=function(t,n,i){t>=0?csArray.prototype.splice.call(n.children,t,0,i):"artificial"in i&&csArray.prototype.push.call(n.children,i)},t.prototype.Lh=function(t,n){var i;if(zr(n)){var r=this.Rh.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],h=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==h){var o=null===(i=this.Eh.get(u))||void 0===i?void 0:i.serializedNode;void 0!==o&&this.Ih(h,n,o)}}}},t}();function zr(t){return"children"in t}var Jr,Gr,Wr={taskTime:25},Br=function(t){function n(n,i,r,s){void 0===r&&(r=new Vr(i)),void 0===s&&(s=Wr);var e=t.call(this,at([r],n,!0))||this;return e._h=i,e.Ch=r,e.Mh=s,e.Ph=0,e.Dh=e.Mh.taskTime,e}return ut(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],s=n[2];this.Ch.getSerializedNodeById(i)||this.Ch.registerInitialAttributes(i,r,s,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.Ch.getSerializedNodeById(i)||this.Ch.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.Ur(t,n,i);return this.Uh(t),{removedNodes:this.Dr(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),ct(this,void 0,void 0,(function(){return ft(this,(function(i){return this.Ph+=1,this.Ch.setDefaultSerializationOptions(n),[2,this.qh(t,n)]}))}))},n.prototype.Ur=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this._h.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this._h.getId(t.target),h=0;h<t.addedNodes.length;h+=1){var o=t.addedNodes[h],c=this.serialize(o,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),f=i.get(o);f&&i.set(o,f-1),csArray.prototype.push.call(r,[u,s,c])}return r},n.prototype.Uh=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.Ch.markAddedTreeAsProcessed(i)}},n.prototype.jh=function(t,n){if(!n)return-1;var i=this.Ch.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.Dr=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Ch.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.Fh(s))this.Hh(s)&&this.Vh(s,n);else{var e=this.serialize(s,{withAnonymization:n});if(this.Hh(t.target)){var u=this.jh(s,t.target);this.Ch.addSerializedChildToParent(t.target,u,e)}}var h=this._h.getId(s);h&&csArray.prototype.push.call(i,[h])}return i},n.prototype.Vh=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.Hh(r))this.Vh(r,n);else if(!this.Ch.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:n}),e=this.jh(r,t);this.Ch.addSerializedChildToParent(t,e,s)}}},n.prototype.Hh=function(t){return!!this.Ch.getSerializedNodeByNode(t)},n.prototype.Fh=function(t){return this.Hh(t)||this.Ch.isAddedNodeDuringSerialization(t)},n.prototype.qh=function(t,n){return void 0===n&&(n={}),ct(this,void 0,void 0,(function(){var i,r,s,e,u,h,o,c,f,v,l;return ft(this,(function(d){switch(d.label){case 0:return i=this.Ph,r=xt(),this.Ch.enable(),n.skipChildrenSerialization=!0,s=[t],[4,Hr()];case 1:if(d.sent(),i!==this.Ph)return[2,null];this.zh=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Ch.getOptions(e),h=this.runBeforeSerializeChildrenHook(e,u),o=csArray.prototype.shift.call(h),d.label=3;case 3:return o?csDate.now()-this.zh>this.Dh?[4,Hr()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.Ph)return[2,null];this.zh=csDate.now(),d.label=5;case 5:return this.Fh(o)?(o=csArray.prototype.shift.call(h),[3,3]):(csArray.prototype.push.call(s,o),c=this.serialize(o,u),f=this.jh(o,e),this.Ch.addSerializedChildToParent(e,f,c),a(o)&&csElementshadowRoot.apply(o)&&(v=csElementshadowRoot.apply(o),csArray.prototype.push.call(s,v)),o=csArray.prototype.shift.call(h),[3,3]);case 6:return[3,2];case 7:if(!(l=this.Ch.getSerializedNodeByNode(t)))throw this.Ch.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Ch.disable(),[2,{args:[l],date:r,type:Cn.INITIAL_DOM}]}}))}))},n}(Fr),Kr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.isAsynchronous=function(){return!1},n}(Fr),Yr=function(){function t(){this.Jh=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.Jh&&this.isSupported()&&(this.Gh?this.Gh.clear():this.Gh=new Set,this.Jh=!0)},t.prototype.stop=function(){this.Jh&&(this.Jh=!1)},t.prototype.onEvent=function(t){this.ai=t},t.prototype.Wh=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:return this.Gh.has(t)?[2]:(this.Gh.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.Bh(t),[2]}}))}))},t.prototype.Bh=function(t){if(this.Jh){var n={type:Cn.CUSTOM_ELEMENT_REGISTRATION,date:xt(),args:[t]};this.ai(n)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.Kh=t}return t.prototype.serializeElementNode=function(t){(function(t){return a(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&csArray.prototype.indexOf.call(b,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.Kh.Wh(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},t}(),Xr=function(){function t(t){this.bi=t}return t.prototype.getRequestPayload=function(){var t=this.bi.extractEvents(Cn.JAVASCRIPT_ERROR,Cn.API_ERROR,Cn.CUSTOM_ERROR);return t.length?P(t):""},t}(),$r=function(){function t(){this.Yh=new Map,this.Xh=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!y(t))return n;var i=this.$h(t);if(null===i||0===i.length)return n;if(fi.isEmpty(t.textContent)){var r=si(n);return csArray.prototype.push.call(r,this.Zh(i)),r}var s=this.Qh(t);if(s===i.length)return n;for(var e=new csArray(i.length-s),u=s,h=0;u<i.length;u+=1,h+=1)e[h]=i[u];r=si(n);return csArray.prototype.push.call(r,this.Zh(e)),r},t.prototype.Qh=function(t){var n=this.Yh.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.Xh.head.appendChild(i);var r=this.$h(i);return n=r?r.length:0,this.Yh.set(t.textContent,n),this.Xh.head.removeChild(i),n},t.prototype.$h=function(t){try{var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Zh=function(t){var n="";ei(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),Zr=function(){function t(t,n){this.qr=t,this.En=n,this.no=1}return t.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){var n=this;t.isAdoptedStyleSheetsSupported()&&(this.io=new Set,this.Fr=this.qr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var i=t.context,r=t.args;n.ro(i,r)}}),this.Vr=this.qr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var i=t.context,r=t.args;n.so(i,r)}}),this.eo=this.qr.createDescriptorInterceptor(window.ShadowRoot.prototype,"adoptedStyleSheets",this.uo.bind(this)),this.ho=this.qr.createDescriptorInterceptor(window.Document.prototype,"adoptedStyleSheets",this.uo.bind(this)))},t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){t.isAdoptedStyleSheetsSupported()&&(this.Fr&&this.Fr.activate(),this.Vr&&this.Vr.activate(),this.eo&&this.eo.activate(),this.ho&&this.ho.activate())},t.prototype.stop=function(){t.isAdoptedStyleSheetsSupported()&&(this.io.clear(),this.Fr&&this.Fr.deactivate(),this.Vr&&this.Vr.deactivate(),this.eo&&this.eo.deactivate(),this.ho&&this.ho.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.uo(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.uo(t,t.adoptedStyleSheets)},t.prototype.uo=function(t,n){var i=this;csArray.prototype.forEach.call(n,(function(t){return i.oo(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.co(t)})),s=this.En.getId(t);s&&queueMicrotask((function(){var t={type:Cn.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:xt()};i.ai(t)}))},t.prototype.co=function(t){return t.__adopted_stylesheet_id},t.prototype.ro=function(t,n){var i=n[0],r=n[1],s=this.fo(t);if(s){var e={date:xt(),type:Cn.ADOPTED_STYLESHEET_RULE_INSERT,args:F(r)?[s,i,r]:[s,i]};this.ai(e)}},t.prototype.so=function(t,n){var i=n[0],r=this.fo(t);if(r&&r){var s={date:xt(),type:Cn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.ai(s)}},t.prototype.fo=function(t){return this.io.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.oo=function(t){if(!this.io.has(t)){var n=this.no++;t.__adopted_stylesheet_id=n,this.io.add(t);var i=this.ao(t),r={type:Cn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:xt()};this.ai(r)}},t.prototype.ao=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){J.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}(),Qr=function(){function t(t,n,i){this.vo=t,this.J=n,this.et=i}return t.prototype.shouldUseAnonymization=function(){var t=!this.vo.isAllowedByConsent();return t?this.J.replayRecordingUnmaskedUrlRegex&&this.J.replayRecordingUnmaskedUrlRegex.test(this.et.getAnonymizedUrl())&&(t=!1):this.J.replayRecordingMaskedUrlRegex&&this.J.replayRecordingMaskedUrlRegex.test(this.et.getAnonymizedUrl())&&(t=!0),t},t}(),ts=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),ns="v2/recording",is=["setCapturedElementsSelector"],rs=["setPIISelectors"],ss=["isRecording"],es=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A){this.lo=t,this.st=n,this.J=i,this.vn=r,this.An=s,this.vo=e,this.do=u,this.wo=h,this.G=o,this.xi=c,this.et=f,this.Sn=a,this._i=v,this.Ci=l,this.Mi=d,this.th=w,this.Di=y,this.ii=p,this.yo=m,this.po=g,this.mo=A}return t.prototype.init=function(){var t=this,n=new ur,i=new Ri,r=new Oi(this.Sn);this.Ao=new Pi(this.G,this.J),this.Ao.init();var s=new Zi,e=new ir(n,i,this.J),u=new Ir(window.crypto),h=new Lr(window.crypto);h.init(),u.init();var o=new Rr,c=new Rr,f=new Rr,a=new Rr,v=new Rr,l=new Nr(i,this.J,h,u,o,c,f,v,a,this.vn);l.init();var d=[new $r,r,this.Ao,s];if(this.J.encryptionEnabled){var w=new Tr(l);csArray.prototype.push.call(d,w)}var y=new Zr(n,i);y.init(),Zr.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(d,y);var p=new Sr(this.Sn,1e3);this.J.textVisibilityEnabled&&Sr.isSupported()&&csArray.prototype.push.call(d,p);var m,g=new Yr;g.isSupported()&&csArray.prototype.push.call(d,g.getProcessor()),m=this.Eo()?new Br(d,i):new Kr(d),this.bi=new li;var A=new di,E=new ji(A,this.do),S=new br(this.J.getRecordingUri(),ns);this.J.useMalkaPipeline&&(E.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.st.getRecordingStates())}}}),S.setRequestParametersProviders(this.do,{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.st.getRecordingStates()),ct:On.UNCOMPRESSED,hlm:"true"}}}),S.setRequestPayloadProvider(new Xr(this.bi)));var b=this.So(this.vn);this.bo=new Qr(this.vo,this.J,this.et),this.Qn=new Ni(m,i,this.Ao,l),this.Qn.setAnonymization(this.bo.shouldUseAnonymization()),this.ki=new ri(this.An,i,this.Sn,l),this.ki.init();var N=new ai(this.Qn,e,s,this.ii,i,this.Sn),T=new qi("csPersisted"),R=this.So(this.vn);this.To=new mi(R,this.bi,T,this.J,S),this.Ro=new pi(this.J,b,this.bi,E,A,new Ti(n,i,this.Sn,s),N,this.ki,new zi(window.location,this.G),new _r(this.th,i,this.Sn),this.xi,this.st,s,new Qi(window),this._i,this.Ci,this.Mi,p,this.Di,l,this.To,g,y),this.ko=new Ji(this.ki,N,new Fi(new Vi,this.J),b,this.Qn,this.ii),this.yo.addListeners(this.Ro),this.po.addListeners(this.Ro),this.po.addListeners(this.ko),e.init(),this.ko.init(),this.Ro.init(),this.wo.register(ss,(function(){return t.st.isReplayRecorded()&&!t.mo.isUrlExcludedForSessionReplay()})),this.wo.register(is,(function(n){t.Ao.setWhitelistedElementsSelector(n),t.ii.emitRecordingStatusChange()})),this.wo.register(rs,(function(n){t.Sn.setPIISelectors(n),t.ii.emitRecordingStatusChange()})),this.wo.register(["setEncryptionSelectors"],(function(t){l.setEncryptionSelectors(t)})),this.lo.enableRecordingStatus(this.Ro,this.Sn,this.bo,this.Ao)},t.prototype.onStartTracking=function(){this.To.recover(),this.st.isReplayRecorded()&&!this.mo.isUrlExcludedForSessionReplay()&&(this.J.useMalkaPipeline&&this.st.isTemporarilyRecorded()&&this.Ro.blockSendingEventsFromQuotaService(),this.Oo())},t.prototype.onArtificialPageViewEnd=function(){this.Ro.clearStates(),!this.st.isReplayRecorded()||this.mo.isUrlExcludedForSessionReplay()||this.st.isTemporarilyRecorded()||this.To.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Qn.setAnonymization(this.bo.shouldUseAnonymization()),this.st.isReplayRecorded()&&!this.mo.isUrlExcludedForSessionReplay()?(this.J.useMalkaPipeline&&this.st.isTemporarilyRecorded()&&this.Ro.blockSendingEventsFromQuotaService(),this.Io()):this.xo()},t.prototype.onBeforeSessionRenewal=function(){this.Ro.clearStates(),this.xo()},t.prototype.onOptout=function(){this.xo()},t.prototype.onConsentGranted=function(){this.Qn.setAnonymization(this.bo.shouldUseAnonymization()),this.Ro.triggerConsentGranted(),this.ii.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.Qn.setAnonymization(this.bo.shouldUseAnonymization()),this.Ro.triggerConsentWithdrawn(),this.ii.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){var i=this;this.J.useMalkaPipeline&&(t===un.NOT_RECORDED&&n===hn.ETR_OFF?(this.Ro.clearEvents(),this.xo()):(this.bi.setRequestParametersFromProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(i.st.getRecordingStates())}}}),this.Ro.allowSendingEventsFromQuotaService(),this.Qn.isDOMSerializationInProgress()||this.Ro.pushEvents()))},t.prototype.onInitialDomStart=function(){this.Ro.blockSendingEventsFromSerialization(),this.To.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.ki.start(),this.Ro.addInitialDom(t),this.Ro.allowSendingEventsFromSerialization(),this.To.allowSendingLastMessage()},t.prototype.Oo=function(){this.ko.start(),this.Ro.start(),this.To.start(),this.ii.emitRecordingStatusChange()},t.prototype.xo=function(){this.ko.stop(),this.Ro.stop(),this.To.stop(),this.ii.emitRecordingStatusChange()},t.prototype.Io=function(){this.xo(),this.Oo()},t.prototype.So=function(t){var n=this.J.useMalkaPipeline?ns:"recording",i=this.J.useMalkaPipeline?"byteArray":"base64",r=new qn(this.J.getRecordingUri(),n);return r.setCompressionOptions(t,i),r},t.prototype.Eo=function(){return ts.isAsyncSerializationSupported()&&this.J.asyncSerializerEnabled},ot([Zn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),ot([Zn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),us=function(){function t(t,n,i){this.it=t,this.st=n,this.J=i,this.Lo=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Lo},t.prototype.setNaturalPageViewSent=function(t){this.Lo=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),n=this._o(),i=this.Co();return t&&n?{projectId:i,sessionKey:t,pageNumber:n}:null},t.prototype.getSessionKey=function(){var t=this.it.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype._o=function(){return this.st.doesSessionExist()?this.st.getSession().pageNumber:null},t.prototype.Co=function(){return this.J.projectId},t}(),hs=function(){function t(t){this.Mo=t,this.Po=[]}return t.prototype.handleCommand=function(t){if(V(t)&&(this.Do(t),this.Mo.isNaturalPageViewSent())){var n=this.Mo.getTrackingContext();null!==n&&this.Uo(t,n)}},t.prototype.Do=function(t){csArray.prototype.push.call(this.Po,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Mo.getTrackingContext();null!==n&&csArray.prototype.map.call(this.Po,(function(i){return t.Uo(i,n)}))},t.prototype.Uo=function(t,n){setTimeout((function(){t(n)}))},t}(),os=function(){function t(t){this.Mo=t,this.qo=[]}return t.prototype.handleCommand=function(t){return this.Mo.isNaturalPageViewSent()?this.jo(t):void this.Fo(t)},t.prototype.jo=function(t){var n=this.Mo.getSessionKey();return this.Ho(t)&&null!==n&&this.Uo(t.callback,n),n},t.prototype.Fo=function(t){this.Ho(t)&&csArray.prototype.push.call(this.qo,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Mo.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.qo,(function(i){t.Uo(i,n)})),this.qo=[]},t.prototype.Ho=function(t){return t&&"function"==typeof t.callback},t.prototype.Uo=function(t,n){setTimeout((function(){t(n)}))},t}(),cs=function(){function t(t,n){this.Vo=t,this.Mo=n}return t.prototype.onIframeIntegrationCallback=function(t){if(this.Mo.isNaturalPageViewSent()){var n=this.Mo.getTrackingContext();null!==n&&(t.trackingContext=n,this.Vo.sendToChildren(Jt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Mo.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Vt.AfterPageView};this.Vo.sendToChildren(Jt.IntegrationCallback,n)}},t}(),fs=["afterPageView"],as=["getSessionKey"],vs=function(){function t(t,n,i,r,s,e){this.it=t,this.st=n,this.wo=i,this.zo=r,this.Vo=s,this.J=e}return t.prototype.init=function(){var t=this;this.Mo=new us(this.it,this.st,this.J),this.Jo=new hs(this.Mo),this.Go=new os(this.Mo),this.Wo=new cs(this.Vo,this.Mo),this.zo.addListeners(this.Wo),this.wo.register(as,(function(n){return t.Go.handleCommand(n)})),this.wo.register(fs,(function(n){t.Jo.handleCommand(n)}))},t.prototype.onAfterNaturalPageView=function(){this.Mo.setNaturalPageViewSent(!0),this.Go.flushPendingCallbacks(),this.Jo.executeRegisteredCallbacks(),this.Wo.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Jo.executeRegisteredCallbacks(),this.Wo.sendAfterPageViewCallbackToChildren()},t}(),ls=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=q(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return q(t)&&(q(n)||U(n))},t}(),ds=function(t){function n(n,i){var r=t.call(this)||this;return r.Bo=n,r.G=i,r.Ko=[],r}return ut(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Ko,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Ko=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?ls.isValid(t,n)&&this.Bo.add(new ls(this.G.anonymizeEmail(t),this.G.anonymizeEmail(n))):csArray.prototype.push.call(this.Ko,{key:t,value:n})},n}(yi),ws=function(){function t(t){this.vn=t,this.Bo=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Bo,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Bo=[]},t.prototype.onBatchReady=function(t){this.Yo=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.Bo;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.vn.compressSync(csJSON.stringify(t)),ct:this.vn.algorithm}},t.prototype.setBatchReadyCall=function(){this.Yo()},ot([pr(),G("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),ys=["trackDynamicVariable"],ps=function(){function t(t,n,i,r,s,e){this.wo=t,this.st=n,this.J=i,this.do=r,this.vn=s,this.G=e,this.H=new Et(this.J.getTrackerUri(),"dvar"),this.Bo=new ws(this.vn),this.Xo=new ds(this.Bo,this.G)}return t.prototype.init=function(){var t=this;this.H.setRequestParametersProviders(this.do,this.Bo),this.st.setDynamicVariablesService(this.Xo),this.Bo.onBatchReady((function(){return t.H.send()})),this.H.after((function(){return t.Bo.clear()})),this.wo.register(ys,(function(n){var i=void 0===n?{}:n,r=i.key,s=i.value;t.Xo.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.Xo.start()},t}(),ms=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),q(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t}(),gs=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.$o(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return F(n.sku)&&(i.sku=n.sku),F(n.category)&&(i.category=n.category),F(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.$o=function(t){return q(t.id)&&q(t.name)&&D(parseFloat(t.price))&&U(parseInt(t.quantity,10))&&(!F(t.sku)||q(t.sku))&&(!F(t.category)||q(t.category))&&(!F(t.merchant)||q(t.merchant))},t}(),As=function(){function t(t,n,i){this.G=t,this.Zo=n,this.xi=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.G.anonymizeFields(t,["id"]);this.Qo=ms.from(n)},t.prototype.getTransaction=function(){return this.Qo},t.prototype.sendTransaction=function(){this.xi.isSessionValid()&&(this.Qo.hasValidRevenue()?this.Zo.send():J.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!V(t)){var n=this.G.anonymizeFields(t,["id","name","sku","category"]),i=gs.from(n);null!==i&&csArray.prototype.push.call(this.tc,i)}},t.prototype.getItems=function(){return this.tc},t.prototype.clear=function(){this.Qo=ms.from({revenue:NaN}),this.tc=[]},t.prototype.getRequestParameters=function(){var t={id:this.Qo.id?"".concat(this.Qo.id):"",revenue:"".concat(this.Qo.revenue)};return F(this.Qo.tax)&&(t.tax="".concat(this.Qo.tax)),F(this.Qo.shipping)&&(t.shipping="".concat(this.Qo.shipping)),F(this.Qo.currency)&&(t.cu="".concat(this.Qo.currency)),t.items=window.csJSON.stringify(this.tc),t},t}(),Es=function(){function t(t,n){this.nc=csString.prototype.slice.call(t,0,100),this.ic=n&&csString.prototype.slice.call(n,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.nc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.ic},enumerable:!1,configurable:!0}),t}(),Ss=function(){function t(t,n){this.rc=t,this.xi=n,this.sc=null}return t.prototype.addToCart=function(t){!this.ec(t.sku)||F(t.merchant)&&!q(t.merchant)||(this.sc=new Es(t.sku,t.merchant),this.sendCartItem())},t.prototype.ec=function(t){return q(t)&&t.length>0},t.prototype.getCartItem=function(){return this.sc},t.prototype.sendCartItem=function(){this.xi.isSessionValid()&&this.rc.send()},t.prototype.clear=function(){this.sc=null},t.prototype.getRequestParameters=function(){if(!this.sc)return{};var t={sku:"".concat(this.sc.sku)};return F(this.sc.merchant)&&this.sc.merchant.length>0&&(t.me=this.sc.merchant),t},t}(),bs=["ecommerce:addToCart","ec:cart:add"],Ns=["ecommerce:addTransaction","ec:transaction:create"],Ts=["ecommerce:addItem","ec:transaction:items:add"],Rs=["ecommerce:send","ec:transaction:send"],ks=function(){function t(t,n,i,r,s,e,u){this.J=t,this.it=n,this.st=i,this.wo=r,this.G=s,this.xi=e,this.et=u}return t.prototype.init=function(){var t=new Et(this.J.getTrackerUri(),"transaction"),i=new Et(this.J.getTrackerUri(),"addtocart"),r=new As(this.G,t,this.xi),s=new Ss(i,this.xi);t.setRequestParametersProviders(this.J,this.it,this.st,this.et,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.J,this.it,this.st,this.et,s,n),i.after((function(){s.clear()})),this.wo.register(Ns,(function(t){r.addTransaction(t)})),this.wo.register(Ts,(function(t){return r.addItem(t)})),this.wo.register(Rs,(function(){return r.sendTransaction()})),this.wo.register(bs,(function(t){s.addToCart(t)}))},t}(),Os=function(){function t(t){this.Qs=t.performance}return t.prototype.getRequestParameters=function(){if(this.hc())return{};var t=this.oc();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.oc=function(){var t=this.Qs.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.hc=function(){return!(this.Qs&&this.Qs.timing&&this.Qs.timing.loadEventEnd>0)},t}();function Is(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(Jr||(Jr={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Gr||(Gr={}));var xs,Ls=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),_s=function(t){function n(n,i){var r=t.call(this)||this;return r.j=n,r.cc=i,r.supportedEventTypes=[Jr.MOUSEDOWN,Jr.MOUSEUP,Jr.CLICK,Jr.MOUSEOVER,Jr.TAP],r}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(this.j.eMerchandisingEnabled){var i=this.cc.getEventTargetPathAndTargetLink(t),r=i.path,s=i.targetLink;n.tgt=r,n.tgtLk=s}return n},n}(Ls),Cs=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),Ms=function(t){function n(n){var i=t.call(this)||this;return i.cc=n,i.supportedEventTypes=[Jr.MOUSEDOWN,Jr.MOUSEUP,Jr.CLICK,Jr.MOUSEOVER,Jr.TAP,Jr.DRAG,Jr.FLICK],i}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.cc.getEventTargetPath(t)),n},n}(Ls),Ps=function(){function t(t,n,i){this.J=t,this.cc=n,this.th=i,this.fc=[new _s(this.J,this.cc),new Ms(this.cc)]}return t.prototype.ih=function(t,n){switch(t.type){case mr.TAP:this.ac(n);break;case mr.FLICK:this.vc(t,n);break;case mr.DRAG:this.lc(t,n)}},t.prototype.ac=function(t){var n={type:Jr.TAP,ts:0,x:0,y:0,tgt:""},i=Cs.build(t,n,this.fc);i.tgt!==it.INVALID_ELEMENT&&this.ai(i)},t.prototype.lc=function(t,n){var i={type:Jr.DRAG,ts:0,fd:t.direction,tgt:""},r=Cs.build(n,i,this.fc);r.tgt!==it.INVALID_ELEMENT&&this.ai(r)},t.prototype.vc=function(t,n){var i={type:Jr.FLICK,ts:0,fd:t.direction,tgt:""},r=Cs.build(n,i,this.fc);r.tgt!==it.INVALID_ELEMENT&&this.ai(r)},t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){var n=this;this.th.subscribe(t.nh,(function(t,i){return n.ih(t,i)}))},t.prototype.stop=function(){this.th.unsubscribe(t.nh)},t.nh="AnalysisGestureTracker",t}(),Ds="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(H(t)&&function(t){try{if(H(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&z(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Ds))},t.getScrollContainer=function(){return document.querySelector("[".concat(Ds,"]"))}}(xs||(xs={}));var Us;!function(t){t.getRelativePosition=function(t){var n=Qn(t);if(!(n&&z(n)&&V(n.getBoundingClientRect)&&H(t.pageX)&&H(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-oi.windowOffsetX(),s=t.pageY-i.top-oi.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,s+=n.scrollTop);var e=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Us||(Us={}));var qs,js,Fs,Hs,Vs,zs,Js=function(t){function n(n,i){var r=t.call(this)||this;return r.j=n,r.cc=i,r.supportedEventTypes=[Jr.MOUSEMOVE],r.wc="",r}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(!this.j.mouseMoveHeatmapEnabled)return n;var i=Us.getRelativePosition(t),r=i.valid,s=i.xRel,e=i.yRel;if(r){var u=this.cc.getEventTargetPath(t);u!==it.INVALID_ELEMENT&&(n.xRel=s,n.yRel=e,u!==this.wc||this.j.iframesTracking?(this.wc=u,n.tgtHM=u):n.tgtHM="")}else this.wc="";return n},n}(Ls),Gs=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[Jr.CHANGE],n.yc=["text","email","number","search","tel","url","password"],n}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Qn(t);return p(i)&&csArray.prototype.indexOf.call(this.yc,i.type)>=0&&(n.isBlank=""===i.value),n},n}(Ls),Ws=function(){function t(t,n,i){var r=this;this.j=t,this.cc=n,this.An=i,this.mc="select, select *, input, textarea",this.gc="select, select *, input, textarea",this.Ac="a, a *, button, button *, select, select *, input, textarea",this.Ec="input, select, textarea",this.Sc=150,this.bc=400,this.Nc=!1,this.Tc=yr((function(t,n){return r.scrollListener(t,n)}),this.Sc),this.Rc=yr((function(t){return r.resizeListener(t)}),this.Sc),this.kc=ni((function(t){return r.mouseMoveListener(t)}),this.bc),this.Oc=[{boundElement:window,type:"resize",listener:function(){return r.Rc()}},{boundElement:document,type:"scroll",listener:function(t){return r.Tc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.kc(r.Ic(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.xc=[{boundElement:document,type:"mouseover",listener:this.An.on(this.Ac,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.An.on(this.Ac,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.An.on(this.mc,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.An.on(this.mc,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.An.on(this.gc,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.An.on(this.Ec,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.An.on(this.Ec,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.An.on(this.Ec,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.An.on(this.Ec,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.An.on(this.Ec,(function(t){return r.pasteListener(t)}))}],this.fc=[new _s(this.j,this.cc),new Js(this.j,this.cc),new Gs,new Ms(this.cc)],this.Zn={},this.Pn()}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){var t=this.Lc();csArray.prototype.forEach.call(t,(function(t){return Hn(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.Lc();csArray.prototype.forEach.call(t,(function(t){return Vn(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.Tc.flushPending(),this.Rc.flushPending()},t.prototype.Lc=function(){return this.An.isMatchesSelectorSupported()?at(at([],this.Oc,!0),this.xc,!0):(J.warn("Element.matches is not implemented yet"),this.Oc)},t.prototype.resizeListener=function(t){var n=xs.getScrollContainer(),i=z(n);i&&(this.Nc=!0);var r={type:Jr.RESIZE,ts:0,x:i?n.clientWidth:oi.windowWidth(),y:i?n.clientHeight:oi.windowHeight()};void 0!==t&&(r.d=t),this.ai(r)},t.prototype.scrollListener=function(t,n){var i=xs.isEventOnScrollContainer(n);!this.Nc&&i&&this.resizeListener();var r={type:Jr.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:oi.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:oi.windowOffsetY(),d:t},s=Cs.build(n,r,this.fc);this.ai(s)},t.prototype.mouseMoveListener=function(t){var n={type:Jr.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Cs.build(t,n,this.fc);this.ai(i)},t.prototype.mouseDownListener=function(t){var n={type:Jr.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.mouseUpListener=function(t){var n={type:Jr.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.clickListener=function(t){var n={type:Jr.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.mouseOverListener=function(t){var n={type:Jr.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.mouseOutListener=function(t){var n={type:Jr.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.cc.getEventTargetPath(t)},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.focusInListener=function(t){var n={type:Jr.FOCUSIN,ts:0,tgt:this.cc.getEventTargetPath(t)},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.focusOutListener=function(t){var n={type:Jr.FOCUSOUT,ts:0,tgt:this.cc.getEventTargetPath(t)},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.changeListener=function(t){var n={type:Jr.CHANGE,ts:0,tgt:this.cc.getEventTargetPath(t)},i=Cs.build(t,n,this.fc);this._c(i)},t.prototype.copyListener=function(t){var n={type:Jr.COMMAND,ts:0,tgt:this.cc.getEventTargetPath(t),key:Fn.COPY};this._c(n)},t.prototype.cutListener=function(t){var n={type:Jr.COMMAND,ts:0,tgt:this.cc.getEventTargetPath(t),key:Fn.CUT};this._c(n)},t.prototype.pasteListener=function(t){var n={type:Jr.COMMAND,ts:0,tgt:this.cc.getEventTargetPath(t),key:Fn.PASTE};this._c(n)},t.prototype.keyUpListener=function(t){var n={type:Jr.KEYUP,ts:0,tgt:this.cc.getEventTargetPath(t),key:this.Cc(t)};this._c(n)},t.prototype.keyDownListener=function(t){var n={type:Jr.KEYDOWN,ts:0,tgt:this.cc.getEventTargetPath(t),key:this.Cc(t)};this._c(n)},t.prototype.Cc=function(t){var n=this.Zn[t.key];return void 0===n?jn.ALPHANUMERICAL:n},t.prototype._c=function(t){Is(t)&&t.tgt!==it.INVALID_ELEMENT&&this.ai(t)},t.prototype.Ic=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.Pn=function(){this.Zn[" "]=jn.SPACE,this.Zn.Spacebar=jn.SPACE,this.Zn.Enter=jn.ENTER,this.Zn.Backspace=jn.BACKSPACE,this.Zn.Delete=jn.DELETE,this.Zn.ArrowUp=jn.ARROWUP,this.Zn.ArrowDown=jn.ARROWDOWN,this.Zn.ArrowLeft=jn.ARROWLEFT,this.Zn.ArrowRight=jn.ARROWRIGHT,this.Zn.Up=jn.ARROWUP,this.Zn.Down=jn.ARROWDOWN,this.Zn.Left=jn.ARROWLEFT,this.Zn.Right=jn.ARROWRIGHT,this.Zn.CapsLock=jn.CAPSLOCK,this.Zn.Shift=jn.SHIFT,this.Zn.Tab=jn.TAB},ot([G("Event handler type: resize")],t.prototype,"resizeListener",null),ot([G("Event handler type: scroll")],t.prototype,"scrollListener",null),ot([G("Event handler type: mouseMove"),ii()],t.prototype,"mouseMoveListener",null),ot([G("Event handler type: mouseDown"),ii()],t.prototype,"mouseDownListener",null),ot([G("Event handler type: mouseUp"),ii()],t.prototype,"mouseUpListener",null),ot([G("Event handler type: click"),ii()],t.prototype,"clickListener",null),ot([G("Event handler type: mouseOver"),ii()],t.prototype,"mouseOverListener",null),ot([G("Event handler type: mouseOut"),ii()],t.prototype,"mouseOutListener",null),ot([G("Event handler type: focusIn")],t.prototype,"focusInListener",null),ot([G("Event handler type: focusOut")],t.prototype,"focusOutListener",null),ot([G("Event handler type: change")],t.prototype,"changeListener",null),ot([G("Event handler type: copy")],t.prototype,"copyListener",null),ot([G("Event handler type: cut")],t.prototype,"cutListener",null),ot([G("Event handler type: paste")],t.prototype,"pasteListener",null),ot([G("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([G("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Bs=function(){function t(){var t=this;this.Mc=100,this.Pc=0,this.Dc=oi.documentHeight(),this.Uc={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){Hn(this.Uc),this.reset()},t.prototype.stop=function(){Vn(this.Uc)},t.prototype.reset=function(){this.Dc=oi.documentHeight();var t=xs.getScrollContainer();if(null===t)this.Pc=this.qc(oi.documentHeight());else{var n=this.jc(t);this.Pc=this.Fc(t,n)}this.ai()},t.prototype.maxScrollRateListener=function(t){var n,i;if(xs.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.jc(r);n=this.Hc(r,s),i=this.Fc(r,s)}else n=oi.documentHeight(),i=this.qc(n);(i>this.Pc||n>this.Dc)&&(this.Pc=i,n>this.Dc&&(this.Dc=n),this.ai())},t.prototype.qc=function(t){var n=Math.round(this.Vc()/t*100);return Math.min(n,this.Mc)},t.prototype.Vc=function(){var t=oi.windowHeight();return oi.windowOffsetY()+t},t.prototype.Fc=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.Hc(t,n),s=Math.round(i/r*100);return Math.min(s,this.Mc)},t.prototype.jc=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.Hc=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Pc),mdh:"".concat(this.Dc)}},ot([G("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Ks=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m){this.J=t,this.zc=n,this.th=i,this.Jc=r,this.Gc=s,this.Wc=e,this.Bc=u,this.Kc=h,this.Yc=o,this.xi=c,this.st=f,this.mr=a,this.Xc=v,this.$c=l,this.Zc=d,this.Qc=w,this.tf=y,this.nf=p,this.if=m,this.zi=new wi}return t.prototype.init=function(){var t,n,i,r,s=this;this.zc.onEvent((function(t){return s.Ki(t)})),this.th.onEvent((function(t){return s.Ki(t)})),this.Jc.onEvent((function(){s.Wc.setRequestParametersFromProvider(s.Jc)})),this.$c.onEvent((function(t){return s.rf(t)})),this.Zc.onEvent((function(){var t,n;null===(t=s.tf)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=s.if)||void 0===n||n.flushPendingTextHighlightEvent(),s.Wc.isEmpty()||s.Kc.send()})),null===(t=this.Qc)||void 0===t||t.onEvent((function(t){return s.Ki(t)})),null===(n=this.nf)||void 0===n||n.onEvent((function(t){return s.Ki(t)})),null===(i=this.tf)||void 0===i||i.onEvent((function(t){return s.Ki(t)})),null===(r=this.if)||void 0===r||r.onEvent((function(t){return s.Ki(t)})),this.sf()},t.prototype.sf=function(){var t=this;this.Bc.setRequestParametersProviders(this.Wc),this.Bc.before((function(){t.Wc.setRequestParametersFromProvider(t.Gc),t.Wc.enableCompression()})),this.Bc.after((function(){t.Wc.setRequestParametersFromProvider(t.Yc)})),this.Bc.setRequestPayloadProvider(this.Wc),this.Bc.afterProvidersCalled((function(){return t.Wc.clearEvents()})),this.Kc.setRequestParametersProviders(this.Wc),this.Kc.setRequestPayloadProvider(this.Wc),this.Kc.before((function(){t.Wc.setRequestParametersFromProvider(t.Gc),t.Wc.disableCompression()})),this.Kc.onBeaconSuccess((function(){t.Wc.clearEvents(),t.Wc.setRequestParametersFromProvider(t.Yc)})),this.Kc.onBeaconFailure((function(){t.ef()}))},t.prototype.initStates=function(){this.Wc.setRequestParametersFromProvider(this.Yc),this.uf()},t.prototype.start=function(t){var n,i,r,s;this.Zc.start(),this.zc.start(),this.Jc.start(),this.th.start(),null===(n=this.Qc)||void 0===n||n.start(),null===(i=this.if)||void 0===i||i.start(),null===(r=this.nf)||void 0===r||r.start(),t||this.$c.start(),null===(s=this.tf)||void 0===s||s.start()},t.prototype.collectInitialEvents=function(){var t,n;null===(t=this.nf)||void 0===t||t.collectInitialEvent(),null===(n=this.Qc)||void 0===n||n.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.tr(t)},t.prototype.rf=function(t){this.st.hasValidSession()&&this.tr(t)},t.prototype.Ki=function(t){this.xi.isSessionValid()&&this.tr(t)},t.prototype.tr=function(t){this.Wc.addEvent(this.hf(t)),this.Wc.isFull()&&this.sendEvents(),this.J.emitDebugEvents&&this.zi.emit("analysisEvent",ht(ht({},t),{typeName:Jr[t.type]}))},t.prototype.hf=function(t){return t.ts=this.cf(),t},t.prototype.sendEvents=function(){this.Wc.isEmpty()||this.Bc.send()},t.prototype.stop=function(){var t,n,i,r;this.Zc.stop(),this.zc.stop(),this.Jc.stop(),this.th.stop(),this.$c.stop(),null===(t=this.Qc)||void 0===t||t.stop(),null===(n=this.nf)||void 0===n||n.stop(),null===(i=this.tf)||void 0===i||i.stop(),null===(r=this.if)||void 0===r||r.stop(),this.Wc.empty()},t.prototype.clearStates=function(){var t,n;this.zc.flushPendingDebouncedListeners(),null===(t=this.tf)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=this.if)||void 0===n||n.flushPendingTextHighlightEvent(),this.sendEvents(),this.Jc.reset(),this.$c.stop()},t.prototype.uf=function(){this.ff=xt()},t.prototype.cf=function(){return xt()-this.ff},t.prototype.ef=function(){try{this.Wc.isEmpty()||this.mr.save({events:this.Wc.getEvents(),metadata:this.Wc.getMetadata()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===Gr.SUCCESS||t===Gr.FAILURE||t===Gr.ATTEMPT}(t))if(z(n)){var i={status:t,type:Jr.SUBMIT,ts:0,tgt:this.Xc.getElementPath(n)};i.tgt!==it.INVALID_ELEMENT&&this.rf(i)}else J.warn("AnalysisEvents Service: invalid element: ".concat(n));else J.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Ys=function(){function t(t){var n=t.events,i=void 0===n?[]:n,r=t.requestParameters,s=void 0===r?{}:r,e=t.stringCompression;this.af=!0,this.yi=[],this.pi={},this.yi=i,this.pi=s,this.vf=e}return t.prototype.getRequestPayload=function(){return this.lf()?this.vf.compressSync(csJSON.stringify(this.yi)):csJSON.stringify(this.yi)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.yi,t)},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.pi[i]=n[i])},t.prototype.eventsCount=function(){return this.yi.length},t.prototype.clearEvents=function(){this.yi=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.yi.length},t.prototype.getEvents=function(){return this.yi},t.prototype.getMetadata=function(){return this.pi},t.prototype.getRequestParameters=function(){return ht(ht({},this.pi),{ct:this.lf()?this.vf.algorithm:On.UNCOMPRESSED})},t.prototype.enableCompression=function(){this.af=!0},t.prototype.disableCompression=function(){this.af=!1},t.prototype.lf=function(){return this.af},t}(),Xs=function(){function t(t,n,i){var r=this;this.df=t,this.mr=n,this.vf=i,this.wf=function(){"visible"===document.visibilityState&&r.yf()}}return t.prototype.start=function(){this.yf(),this.pf()},t.prototype.stop=function(){this.mf()},t.prototype.getRecoveryStorage=function(){return this.mr},t.prototype.yf=function(){var t=this.mr.recover();if(null!==t){var n=t,i=n.metadata,r=n.events,s=new Ys({events:r,requestParameters:i,stringCompression:this.vf});this.df.setRequestParametersProviders(s),this.df.before((function(){s.enableCompression()})),this.df.setRequestPayloadProvider(s),this.df.afterProvidersCalled((function(){return s.clearEvents()})),this.df.send()}},t.prototype.pf=function(){document.addEventListener("visibilitychange",this.wf)},t.prototype.mf=function(){document.removeEventListener("visibilitychange",this.wf)},t}(),$s=function(){function t(t){this.vs=t}return t.prototype.save=function(t){localStorage.setItem(this.vs,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.vs)},t.prototype.recover=function(){var t=localStorage.getItem(this.vs);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){J.error("Invalid item in localStorage.\n         (key:".concat(this.vs,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Zs=function(){function t(t){var n=this;this.gf=t,this.Af=function(t){return n.processMetric(t)},this.$e=!1}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){this.$e||(this.$e=!0,this.gf.onFCP(this.Af),this.gf.onCLS(this.Af),this.gf.onFID(this.Af),this.gf.onLCP(this.Af),this.gf.onTTFB(this.Af))},t.prototype.stop=function(){this.$e=!1},t.prototype.processMetric=function(t){if(this.$e){var n={type:Jr.PERFORMANCE,name:t.name,val:t.value,ts:0};this.ai(n)}},ot([G("Performance metric handler")],t.prototype,"processMetric",null),t}(),Qs=function(t,n){return{name:t,value:void 0===n?-1:n,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},te=function(t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver((function(t){return t.getEntries().map(n)}));return i.observe({type:t,buffered:!0}),i}}catch(t){}},ne=function(t,n){var i=function i(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),n&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},ie=function(t){addEventListener("pageshow",(function(n){n.persisted&&t(n)}),!0)},re=function(t,n,i){var r;return function(s){n.value>=0&&(s||i)&&(n.delta=n.value-(r||0),(n.delta||void 0===r)&&(r=n.value,t(n)))}},se=-1,ee=function(){return"hidden"===document.visibilityState?0:1/0},ue=function(){ne((function(t){var n=t.timeStamp;se=n}),!0)},he=function(){return se<0&&(se=ee(),ue(),ie((function(){setTimeout((function(){se=ee(),ue()}),0)}))),{get firstHiddenTime(){return se}}},oe=function(t,n){var i,r=he(),s=Qs("FCP"),e=function(t){"first-contentful-paint"===t.name&&(h&&h.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=t.startTime,s.entries.push(t),i(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],h=u?null:te("paint",e);(u||h)&&(i=re(t,s,n),u&&e(u),ie((function(r){s=Qs("FCP"),i=re(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,i(!0)}))}))})))},ce=!1,fe=-1,ae={passive:!0,capture:!0},ve=new Date,le=function(t,n){qs||(qs=n,js=t,Fs=new Date,ye(removeEventListener),de())},de=function(){if(js>=0&&js<Fs-ve){var t={entryType:"first-input",name:qs.type,target:qs.target,cancelable:qs.cancelable,startTime:qs.timeStamp,processingStart:qs.timeStamp+js};Hs.forEach((function(n){n(t)})),Hs=[]}},we=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){le(t,n),s()},r=function(){s()},s=function(){removeEventListener("pointerup",i,ae),removeEventListener("pointercancel",r,ae)};addEventListener("pointerup",i,ae),addEventListener("pointercancel",r,ae)}(n,t):le(n,t)}},ye=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,we,ae)}))},pe={},me=function(){function t(){}return t.prototype.onFCP=function(t){oe(t,!0)},t.prototype.onCLS=function(t){!function(t,n){ce||(oe((function(t){fe=t.value})),ce=!0);var i,r=function(n){fe>-1&&t(n)},s=Qs("CLS",0),e=0,u=[],h=function(t){if(!t.hadRecentInput){var n=u[0],r=u[u.length-1];e&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,u.push(t)):(e=t.value,u=[t]),e>s.value&&(s.value=e,s.entries=u,i())}},o=te("layout-shift",h);o&&(i=re(r,s,n),ne((function(){o.takeRecords().map(h),i(!0)})),ie((function(){e=0,fe=-1,s=Qs("CLS",0),i=re(r,s,n)})))}(t,!0)},t.prototype.onFID=function(t){!function(t,n){var i,r=he(),s=Qs("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),i(!0))},u=te("first-input",e);i=re(t,s,n),u&&ne((function(){u.takeRecords().map(e),u.disconnect()}),!0),u&&ie((function(){var r;s=Qs("FID"),i=re(t,s,n),Hs=[],js=-1,qs=null,ye(addEventListener),r=e,Hs.push(r),de()}))}(t,!0)},t.prototype.onLCP=function(t){!function(t,n){var i,r=he(),s=Qs("LCP"),e=function(t){var n=t.startTime;n<r.firstHiddenTime&&(s.value=n,s.entries.push(t),i())},u=te("largest-contentful-paint",e);if(u){i=re(t,s,n);var h=function(){pe[s.id]||(u.takeRecords().map(e),u.disconnect(),pe[s.id]=!0,i(!0))};["keydown","click"].forEach((function(t){addEventListener(t,h,{once:!0,capture:!0})})),ne(h,!0),ie((function(r){s=Qs("LCP"),i=re(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,pe[s.id]=!0,i(!0)}))}))}))}}(t,!0)},t.prototype.onTTFB=function(t){!function(t){var n,i=Qs("TTFB");n=function(){try{var n=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,n={entryType:"navigation",startTime:0};for(var i in t)"navigationStart"!==i&&"toJSON"!==i&&(n[i]=Math.max(t[i]-t.navigationStart,0));return n}();if(i.value=i.delta=n.responseStart,i.value<0||i.value>performance.now())return;i.entries=[n],t(i)}catch(t){}},"complete"===document.readyState?setTimeout(n,0):addEventListener("load",(function(){return setTimeout(n,0)}))}(t)},t}(),ge=function(){function t(){var t=this;this.$e=!1,this.Ef=function(n){try{if(("pagehide"===n.type||"visibilitychange"===n.type)&&"hidden"!==document.visibilityState)return;t.Sf()}catch(t){}}}return t.prototype.start=function(){this.$e||(this.$e=!0,this.pf(),this.bf(),this.Nf())},t.prototype.stop=function(){this.$e&&(this.$e=!1,this.mf(),this.Tf(),this.Rf())},t.prototype.onEvent=function(t){this.Sf=t},t.prototype.pf=function(){document.addEventListener("visibilitychange",this.Ef)},t.prototype.mf=function(){document.removeEventListener("visibilitychange",this.Ef)},t.prototype.bf=function(){window.addEventListener("pagehide",this.Ef)},t.prototype.Tf=function(){window.removeEventListener("pagehide",this.Ef)},t.prototype.Nf=function(){window.addEventListener("blur",this.Ef)},t.prototype.Rf=function(){window.removeEventListener("blur",this.Ef)},t}(),Ae=function(){function t(){var t=this;this.Sc=500,this.kf=500,this.Of=yr((function(n,i){return t.onResize(i)}),this.Sc),this.If=null,this.xf=!0}return t.prototype.start=function(){var n=this;this.If||(this.Lf=t.scheduleStart((function(){n.run()}),this.kf))},t.prototype.stop=function(){this.If&&(Vn(this.If),this.If=null),this.Lf()},t.scheduleStart=function(t,n){var i=0,r=null,s=function(){i=window.setTimeout((function(){i=0,t()}),n)};return"visible"===document.visibilityState?s():Hn(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),Vn(r),r=null)}}),function(){i>0&&(window.clearTimeout(i),i=0),null!==r&&(Vn(r),r=null)}},t.prototype.onEvent=function(t){this.ai=t},t.prototype.run=function(){var n,i=this;0!==window.outerWidth&&(this._f=this.Cf=t.Mf(),this.Pf=window.devicePixelRatio,this.Df=this.Pf,this.Uf=window.outerWidth,this.qf=window.innerWidth,this.jf=window.innerHeight,this.Ff=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1,this.If={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return i.Of(t)}},Hn(this.If),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.If){var n={type:Jr.ZOOM,ts:0,val:t.Hf(this.Cf)};if(this.ai(n),window.visualViewport){var i={type:Jr.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.ai(i)}}},t.prototype.onResize=function(t){var n,i=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1;this.Vf(i),window.visualViewport&&this.zf(i),this.Uf=window.outerWidth,this.qf=window.innerWidth,this.jf=window.innerHeight,this.Ff=i},t.prototype.Vf=function(n){var i;window.devicePixelRatio!==this.Df?(i=window.devicePixelRatio/this.Pf*this._f,this.Df=window.devicePixelRatio,this.xf=!1):this.Uf===window.outerWidth&&this.jf!==window.innerHeight&&this.qf!==window.innerWidth&&this.Ff===n&&this.xf&&(i=window.outerWidth/window.innerWidth/n);if(void 0!==i){this.Cf=i;var r={type:Jr.ZOOM,ts:0,val:t.Hf(i)};this.ai(r)}},t.prototype.zf=function(t){if(t!==this.Ff){var n={type:Jr.VIEWPORT_SCALE,ts:0,val:t};this.ai(n)}},t.Mf=function(){return t.Jf()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.Jf=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.Hf=function(t){return 100*t<<0},ot([G("ZoomTracker.run")],t.prototype,"run",null),ot([G("ZoomTracker.onResize")],t.prototype,"onResize",null),ot([G("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}();!function(t){t[t.MUTATION=0]="MUTATION",t[t.WINDOW_PROPERTY=1]="WINDOW_PROPERTY"}(Vs||(Vs={})),function(t){t[t.COLOR_ENHANCER=0]="COLOR_ENHANCER",t[t.OTHER=1]="OTHER"}(zs||(zs={}));var Ee,Se=function(){function t(t){this.Gf=t,this.Wf=500}return t.prototype.start=function(){var n=this;this.Lf=t.Bf((function(){n.initialDetection()}),this.Wf)},t.prototype.stop=function(){var t;null===(t=this.ti)||void 0===t||t.disconnect(),this.ti=null,this.Lf()},t.prototype.onEvent=function(t){this.ai=t},t.prototype.initialDetection=function(){var n=this;this.Kf=[],this.Yf=[],csArray.prototype.forEach.call(this.Gf,(function(i){for(var r=i.id,s=!1,e={id:r,attributesBasedDetectors:{},childListBasedDetectors:{}},u=0,h=i.detectors;u<h.length;u++){var o=h[u],c=o.type;switch(c){case Vs.MUTATION:(s=!!document.querySelector(o.selector))||t.Xf(e,o);break;case Vs.WINDOW_PROPERTY:s=o.property in window;break;default:}if(s){csArray.prototype.push.call(n.Yf,r);break}}s||csArray.prototype.push.call(n.Kf,e)})),this.de(),this.collectInitialEvent()},t.prototype.collectInitialEvent=function(){this.Yf.length>0&&this.$f(this.Yf)},t.prototype.$f=function(t){var n={type:Jr.EXTENSION,ts:0,ids:at([],t,!0)};this.ai(n)},t.prototype.de=function(){var t=this;0!==this.Kf.length&&(this.ti=new csMutationObserver((function(n){return t.handleMutations(n)})),this.ti.observe(document.documentElement,{childList:!1,attributes:!0}),this.ti.observe(document.head,{childList:!0,attributes:!1}),this.ti.observe(document.body,{childList:!0,attributes:!0}))},t.prototype.handleMutations=function(t){var n,i=this,r=[];csArray.prototype.forEach.call(t,(function(t){"childList"===t.type?i.handleChildListMutation(t,r):"attributes"===t.type&&i.handleAttributesMutation(t,r)})),r.length>0&&((n=csArray.prototype.push).call.apply(n,at([this.Yf],r,!1)),this.$f(r)),0===this.Kf.length&&this.stop()},t.prototype.handleChildListMutation=function(n,i){var r=this;if(0!==n.addedNodes.length){var s=n.target;ei(n.addedNodes,(function(n){if(a(n))for(var e=0;e<r.Kf.length;e++){var u=r.Kf[e];if(t.Zf(u,s.localName))if(null==u.childListBasedDetectors[s.localName]?void 0:csArray.prototype.some.call(u.childListBasedDetectors[s.localName],(function(t){return n.matches(t.selector)}))){csArray.prototype.push.call(i,u.id),csArray.prototype.splice.call(r.Kf,e,1);break}}}))}},t.prototype.handleAttributesMutation=function(n,i){for(var r=n.target,s=0;s<this.Kf.length;s++){var e=this.Kf[s];if(t.Qf(e,r.localName))if(null==e.attributesBasedDetectors[r.localName]?void 0:csArray.prototype.some.call(e.attributesBasedDetectors[r.localName],(function(t){return r.matches(t.selector)}))){csArray.prototype.push.call(i,e.id),csArray.prototype.splice.call(this.Kf,s,1);break}}},t.Zf=function(t,n){return n in t.childListBasedDetectors},t.Qf=function(t,n){return n in t.attributesBasedDetectors},t.Xf=function(t,n){var i=t.attributesBasedDetectors;"childList"===n.mutationType&&(i=t.childListBasedDetectors),n.target in i?csArray.prototype.push.call(i[n.target],n):i[n.target]=[n]},t.Bf=function(t,n){var i,r=0,s=function(){r=0,t()};return window.requestIdleCallback?(r=window.requestIdleCallback(s,{timeout:n}),i=window.cancelIdleCallback):(r=window.setTimeout(s,n),i=window.clearTimeout),function(){r>0&&(i.call(window,r),r=0)}},t.isSupported=function(){return/Chrome/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)},ot([G("ExtensionsTracker.initialDetection")],t.prototype,"initialDetection",null),ot([G("ExtensionsTracker.handleMutations")],t.prototype,"handleMutations",null),ot([G("ExtensionsTracker.handleChildListMutation")],t.prototype,"handleChildListMutation",null),ot([G("ExtensionsTracker.handleAttributesMutation")],t.prototype,"handleAttributesMutation",null),t}(),be=[{id:zs.COLOR_ENHANCER,detectors:[{type:Vs.MUTATION,target:"html",selector:"html[data-darkreader-mode]",mutationType:"attributes"},{type:Vs.MUTATION,target:"body",selector:"#hc_extension_svg_filters",mutationType:"childList"},{type:Vs.MUTATION,target:"body",selector:"#cvd_extension_svg_filter",mutationType:"childList"},{type:Vs.MUTATION,target:"html",selector:"html[class~=ss-shaded-scrollbars]",mutationType:"attributes"}]},{id:zs.OTHER,detectors:[{type:Vs.MUTATION,target:"body",selector:"th-rw4gc",mutationType:"childList"},{type:Vs.MUTATION,target:"head",selector:'link[href*="cdnapgfjopgaggbmfgbiinmmbdcglnam"]',mutationType:"childList"},{type:Vs.MUTATION,target:"head",selector:'link[href*="dgmanlpmmkibanfdgjocnabmcaclkmod"]',mutationType:"childList"},{type:Vs.WINDOW_PROPERTY,property:"cvox"},{type:Vs.MUTATION,target:"body",selector:"#highlighter[style*=box-shadow]",mutationType:"childList"},{type:Vs.MUTATION,target:"head",selector:'link[href*="ddnpdohiipephjpdpohikkamhdikbldp"]',mutationType:"childList"},{type:Vs.MUTATION,target:"head",selector:'link[href*="emgfmfgandmhbgleikkoaebngboghfpe"]',mutationType:"childList"}]}],Ne=function(){function t(){this.ta=0,this.na=0,this.ia=0,this.ra=0,this.sa=0}return t.prototype.incrementFocusWithKeyboard=function(){this.ta+=1},t.prototype.incrementFocusWithMouse=function(){this.na+=1},t.prototype.incrementClickWithKeyboard=function(){this.ia+=1},t.prototype.incrementClickWithMouse=function(){this.ra+=1},t.prototype.incrementScrollWithKeyboard=function(){this.sa+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.ta,mouseCounter:this.na},click:{keyboardCounter:this.ia,mouseCounter:this.ra},scroll:{keyboardCounter:this.sa}}},t.prototype.reset=function(){this.ta=0,this.na=0,this.ia=0,this.ra=0,this.sa=0},t}(),Te=function(){function t(){var t=this;this.ea=ni((function(){return t.ua()}),5e3),this.Tc=yr((function(n,i){return t.scrollListener()}),150),this.ta=!1,this.ia=!1,this.sa=!1,this.ha=[{boundElement:document,type:"click",listener:function(n){return t.clickListener(n)}},{boundElement:document,type:"focus",listener:function(n){return t.focusListener(n)}},{boundElement:document,type:"keydown",listener:function(n){return t.keyDownListener(n)}},{boundElement:document,type:"mousedown",listener:function(){return t.oa()}},{boundElement:document,type:"mouseover",listener:function(n){return t.mouseOverListener(n)}},{boundElement:document,type:"scroll",listener:function(){return t.Tc()}},{boundElement:document,type:"wheel",listener:function(){return t.ca()}}],this.fa=new Ne}return t.prototype.start=function(){csArray.prototype.forEach.call(this.ha,(function(t){return Hn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.ha,(function(t){return Vn(t)}))},t.prototype.onEvent=function(t){this.ai=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.Tc.flushPending(),this.ea.flushPending()},t.prototype.clickListener=function(t){var n=Qn(t);z(n)&&fi.isElementFocusable(n)&&(this.ia?(this.fa.incrementClickWithKeyboard(),this.ia=!1):this.fa.incrementClickWithMouse(),this.ea())},t.prototype.focusListener=function(t){var n=Qn(t);this.ta&&z(n)&&fi.isElementFocusable(n)&&(this.fa.incrementFocusWithKeyboard(),this.ea(),this.ta=!1)},t.prototype.keyDownListener=function(t){this.ta||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.ta=!0),this.ia||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.ia=!0),this.sa||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.sa=!0)},t.prototype.oa=function(){this.ta=!1,this.ia=!1},t.prototype.mouseOverListener=function(t){var n=Qn(t);z(n)&&fi.isElementFocusable(n)&&(this.fa.incrementFocusWithMouse(),this.ea())},t.prototype.scrollListener=function(){this.sa&&(this.fa.incrementScrollWithKeyboard(),this.ea(),this.sa=!1)},t.prototype.ca=function(){this.sa=!1},t.prototype.ua=function(){var t={type:Jr.KEYBOARD_NAVIGATION,ts:0,val:this.fa.buildKeyboardNavigationCounters()};this.ai(t),this.fa.reset()},ot([G("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),ot([G("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),ot([G("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([G("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),ot([G("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Re=function(){function t(){var t=this;this.aa=null,this.va=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.va,(function(t){return Hn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.va,(function(t){return Vn(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.aa&&this.da(this.aa)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.aa){var n=this.aa,i=n.anchorNode,r=n.anchorOffset;if(i===t.anchorNode&&r===t.anchorOffset){if(v(t.anchorNode)){var s=t.toString().length;s>this.aa.length&&(this.aa.length=s)}}else this.da(this.aa)}else t.anchorNode&&v(t.anchorNode)&&0!==t.toString().length&&(this.aa={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.aa&&this.wa()},t.prototype.da=function(t){var n={type:Jr.TEXT_HIGHLIGHT,ts:0,len:t.length};this.ai(n),this.wa()},t.prototype.wa=function(){this.aa=null},ot([G("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),ot([G("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),ke="v2/events",Oe=["submit"],Ie=function(){function t(t,n,i,r,s,e,u,h,o,c){this.J=t,this.it=n,this.st=i,this.Xc=r,this.An=s,this.wo=e,this.xi=u,this.th=h,this.zo=o,this.vf=c}return t.prototype.init=function(){var t=this,n=new Ys({stringCompression:this.vf});this.ya=this.pa(),this.ma=this.ga(n,this.ya.getRecoveryStorage()),this.ma.init(),this.zo.addListeners(this.ma),this.wo.register(Oe,(function(n,i){t.ma.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.ya.start(),this.ma.start(t)},t.prototype.onAfterNaturalPageView=function(){this.ma.initStates()},t.prototype.onAfterArtificialPageView=function(){this.ma.initStates(),this.ma.collectInitialEvents()},t.prototype.onBeforeArtificialPageView=function(){this.ma.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.ma.clearStates(),this.ma.stop(),this.ya.stop()},t.prototype.onOptout=function(){this.ma.stop(),this.ya.stop()},t.prototype.ga=function(t,i){var r,s,e,u,h=new Os(window),o=new Bs,c=new Ws(this.J,this.Xc,this.An),f=new Ps(this.J,this.Xc,this.th),a=new Zs(new me),v=new ge;this.J.accessibilityEnabled&&(r=new Ae,s=new Te,e=new Re,Se.isSupported()&&(u=new Se(be)));var l=new qn(this.J.getTrackerUri(),ke),d=new br(this.J.getTrackerUri(),ke),w=new ji(this.J,this.it,this.st,o,h,n);return new Ks(this.J,c,f,o,h,t,l,d,w,this.xi,this.st,i,this.Xc,a,v,r,s,u,e)},t.prototype.pa=function(){var t=new qn(this.J.getTrackerUri(),ke);return new Xs(t,new $s("csAnalysisEventsPersisted"),this.vf)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ee||(Ee={}));var xe=function(){function t(){this.Aa=Ee.Natural}return t.prototype.setPageViewType=function(t){this.Aa=t},t.prototype.getRequestParameters=function(){return{pvt:this.Aa}},t}(),Le=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.ii=n,e.Ea=i,e.et=r,e.Sa=s,e}return ut(n,t),n.prototype.init=function(){this.ba()},n.prototype.onStart=function(t){t?this.Na():this.Ta()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Ra(t):this.et.overridePath(t)},n.prototype.Ta=function(){this.Sa.setPageViewType(Ee.Natural),this.ii.emitBeforeNaturalPageView(),this.Ea.send(),this.ii.emitAfterNaturalPageView()},n.prototype.Na=function(){this.Sa.setPageViewType(Ee.Renewal),this.ii.emitBeforeNaturalPageView(),this.Ea.send(),this.ii.emitAfterNaturalPageView()},n.prototype.Ra=function(t){this.Sa.setPageViewType(Ee.Artificial),this.ii.emitArtificialPageViewEnd(),t&&this.et.overridePath(t),this.ii.emitBeforeArtificialPageView(),this.Ea.send(),this.ii.emitAfterArtificialPageView()},n.prototype.ba=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Ra()}))},n}(yi),_e=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ce(){return{la:_e}}var Me,Pe=function(){function t(t){this.ka=t,this.Oa=[],this.Ia=!1}return t.prototype.getRequestParameters=function(){return{dr:this.xa()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.ka.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Oa,n)},t.prototype.enableRemoveQueryString=function(){this.Ia=!0},t.prototype.disableRemoveQueryString=function(){this.Ia=!1},t.prototype.xa=function(){var t=this.Ia?this.ka.removeQueryString(this.La()):this.La();return this.ka.anonymizeUrl(t,this.Oa)},t.prototype.La=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),t},t}(),De=function(){function t(t){this.st=t,this._a=this.Ca()&&"currentScript"in document}return t.prototype.Ma=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Pa(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Pa=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this._a||1!==this._o())return{};var t=this.Ma();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype._o=function(){var t;return(null===(t=this.st.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.Ca=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Ue=["trackPageview"],qe=["setPath"],je=["setQuery"],Fe=["referrer:maskUrl"],He=["referrer:removeQueryString"],Ve=["referrer:keepQueryString"],ze=function(){function t(t,n,i,r,s,e,u,h,o,c){this.J=t,this.wo=n,this.ii=i,this.it=r,this.st=s,this.vo=e,this._t=u,this.ka=h,this.et=o,this.mo=c}return t.prototype.init=function(){var t=this,r=new Et(this.J.getTrackerUri(),"pageview"),s=new xe;this.Da=new Le(this.ii,r,this.et,s);var e=new Pe(this.ka);this.Da.init(),r.setRequestParametersProviders(this.J,this.it,this.st,oi,e,this.et,this.vo,i,this._t,n,s,new De(this.st),this.mo),this.wo.register(Ue,(function(n){return t.Da.triggerArtificialPageView(n)})),this.wo.register(qe,(function(n){return t.et.overridePath(n)})),this.wo.register(je,(function(n){return t.et.overrideQuery(n)})),this.wo.register(Fe,(function(t){return e.addUrlMaskingPattern(t)})),this.wo.register(He,(function(){return e.enableRemoveQueryString()})),this.wo.register(Ve,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Da.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Da.stop()},t}(),Je=function(){function t(t){this.cc=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.cc.hasValidEventTarget(r)&&i.Ua(r,t)&&n(r)}},t.prototype.Ua=function(t,n){var i=Qn(t);return W.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!W},t}(),Ge=function(){function t(){}return t.prototype.onLoad=function(t){this.wn=t},t.prototype.onLoadCallbackExecute=function(){this.wn()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.qa(t)},t.prototype.qa=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},ot([G("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),We=["clearSession"],Be=["extendSession"],Ke=function(){function t(t,n,i){this.it=t,this.st=n,this.wo=i}return t.prototype.init=function(){var t=this;this.wo.register(We,(function(){return t.st.removeSession()})),this.wo.register(Be,(function(){return t.st.extendSessionPeriodically()}))},t.prototype.onBeforeNaturalPageView=function(){this.it.createOrUpdateVisitor(),this.st.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.st.abortQuotaServiceRequest(),this.it.createOrUpdateVisitor(),this.st.createOrUpdateSession()},t.prototype.onOptout=function(){this.it.removeVisitor(),this.st.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.st.updateRecordingState(t,n)},t}(),Ye=function(){function t(t,n){this.st=t,this.it=n,this.ja=!1}return t.prototype.onSessionExpired=function(t){this.Fa=t},t.prototype.isSessionValid=function(){if(this.ja)return!0;var t=this.st.hasValidSession(),n=!1;return this.st.pollCacheRefreshEvent()&&(n=this.it.isSessionRenewed()),t&&!n||!this.Ha()?t:(this.Va=xt(),this.ja=!0,this.Fa(),this.ja=!1,this.st.hasValidSession())},t.prototype.Ha=function(){return!F(this.Va)||xt()-this.Va>6e4},t}(),Xe=function(t){function n(n,i,r,s,e,u){var h=t.call(this)||this;return h.et=n,h.za=i,h.Zc=r,h.Ja=s,h.Ga=e,h.Wa=u,h}return ut(n,t),n.prototype.init=function(){this.Ja.init(),this.Ba(),this.Ka(),this.Ya()},n.prototype.collectInitialProducts=function(){var t=this.za.collectProductsAndAnchors(),n=t.products,i=t.anchors;this.Xa(i),this.Ja.send(this.$a(n))},n.prototype.Xa=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){n.Wa.track(t)}))},n.prototype.onIframeEmerchandisingMessage=function(t){this.Ja.send(t)},n.prototype.clearState=function(){this.Wa.clearState(),this.za.flushEvents(),this.Ga.isEmpty()||this.Za(!1)},n.prototype.initStates=function(){this.Ja.initStates()},n.prototype.onStart=function(){this.Zc.start(),this.za.start(),this.Wa.start()},n.prototype.onStop=function(){this.Zc.stop(),this.za.stop(),this.Wa.stop()},n.prototype.Ya=function(){var t=this;this.Wa.init(),this.Wa.onProductExposed((function(n){t.Ga.addProductExposure(n),t.Ga.isFull()&&t.Za(!1)}))},n.prototype.$a=function(t,n){void 0===n&&(n=[]);var i={products:t,targetUrl:this.et.getAnonymizedUrl(),windowWidth:oi.windowWidth(),windowHeight:oi.windowHeight()};return n.length>0&&(i.exposures=n),i},n.prototype.Ba=function(){var t=this;this.za.init(),this.za.onProductsDetection((function(n){var i=n.products,r=n.anchors;t.Ga.addProducts(i),t.Ga.isFull()&&t.Za(!1),t.Xa(r)}))},n.prototype.Ka=function(){var t=this;this.Zc.onEvent((function(){t.Wa.clearState(),t.Qa()}))},n.prototype.Qa=function(){this.Ga.isEmpty()||this.Za(!0)},n.prototype.Za=function(t){var n=this.$a(this.Ga.getProducts(),this.Ga.getProductsExposure());t?this.Ja.sendBeacon(n):this.Ja.send(n)},n}(yi),$e=function(){function t(t,n){this.configuration=t,this.projectPathComputation=n}return t.prototype.collectProductsAndAnchors=function(t){void 0===t&&(t=document);for(var n=[],i=this.getAllValidAnchors(this.configuration.hostnames,t),r=0,s=i;r<s.length;r++){var e=s[r];csArray.prototype.push.call(n,this.buildProductFromAnchor(e))}return{products:n,anchors:i}},t.prototype.getAllValidAnchors=function(t,n){var i=this;return void 0===n&&(n=document),csArray.prototype.filter.call(fi.findAllElements("a",n),(function(n){return i.isAnchorValid(n,t)}))},t.prototype.isAnchorValid=function(t,n){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Ht(t.hostname,n)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},ot([Zn("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),Ze=function(t){function n(n,i,r){var s=t.call(this,n,i)||this;return s.ti=r,s.tv={subtree:!0,childList:!0},s}return ut(n,t),n.prototype.init=function(){this.de()},n.prototype.start=function(){this.ti.start(),this.nv()},n.prototype.stop=function(){this.ti.stop()},n.prototype.flushEvents=function(){this.ti.flushPendingMutations()},n.prototype.onProductsDetection=function(t){this.iv=t},n.prototype.de=function(){this.ti.init(),this.rv()},n.prototype.rv=function(){var t=this;this.ti.onChildListMutation((function(n){return t.sv(n)})),this.ti.onAttachShadowMutation((function(n){return t.ev(n)}))},n.prototype.sv=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];if(l(i)&&this.isAnchorValid(i,this.configuration.hostnames)){var r=this.buildProductFromAnchor(i);this.uv({products:[r],anchors:[i]})}else if(z(i)){var s=this.collectProductsAndAnchors(i);this.uv(s)}}},n.prototype.ev=function(t){var n=t.shadowRoot;this.uv(this.collectProductsAndAnchors(n)),this.ti.observe(n,this.tv)},n.prototype.uv=function(t){t.products.length>0&&this.iv(t)},n.prototype.nv=function(){this.ti.observe(document,this.tv),this.hv(document)},n.prototype.hv=function(t){var n=this,i=hi.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){t.shadowRoot&&n.ti.observe(t.shadowRoot,n.tv)}))},n}($e),Qe=function(){function t(n){void 0===n&&(n=t.ov),this.pi={},this.cv=[],this.fv=[],this.av=new vi(n)}return t.prototype.addProducts=function(t){var n;this.av.addString(csJSON.stringify(t)),(n=csArray.prototype.push).call.apply(n,at([this.cv],t,!1))},t.prototype.addProductExposure=function(t){this.av.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.fv,t)},t.prototype.reset=function(){this.av.reset(),this.cv=[],this.fv=[]},t.prototype.isEmpty=function(){return 0===this.cv.length&&0===this.fv.length},t.prototype.isFull=function(){return this.av.isThresholdReached()},t.prototype.getProducts=function(){return this.cv},t.prototype.getProductsExposure=function(){return this.fv},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.pi[i]=n[i])},t.prototype.getRequestParameters=function(){return ht({},this.pi)},t.ov=10240,t}(),tu=function(){function t(){var t=this;this.$e=!1,this.vv="function"==typeof window.IntersectionObserver,this.isGetRootNodeSupported="getRootNode"in Node.prototype,this.lv=function(){"visible"===document.visibilityState?t.wv():t.yv()}}return t.prototype.init=function(){this.vv&&this.isGetRootNodeSupported&&(this.pv=new Map,this.mv=new Map,this.gv(),this.de())},t.prototype.start=function(){!this.$e&&this.vv&&this.isGetRootNodeSupported&&(document.addEventListener("visibilitychange",this.lv),this.$e=!0)},t.prototype.stop=function(){this.$e&&(this.We.disconnect(),this.ti.disconnect(),this.pv.clear(),this.mv.clear(),this.$e=!1,document.removeEventListener("visibilitychange",this.lv))},t.prototype.wv=function(){var t=this;this.mv.forEach((function(n,i){t.We.unobserve(i),t.We.observe(i)}))},t.prototype.yv=function(){var t=this;this.mv.forEach((function(n,i){var r=!1;t.mv.get(i)!==r&&(t.mv.set(i,r),t.Av(i,r))}))},t.prototype.onEvent=function(t){this.Ev=t},t.prototype.track=function(t){this.$e&&(this.We.observe(t),this.Sv(t))},t.prototype.gv=function(){var n=this;this.We=new IntersectionObserver((function(t){n.bv(t)}),t.Nv)},t.prototype.de=function(){var t=this;this.ti=new csMutationObserver((function(n){csArray.prototype.forEach.call(n,(function(n){return t.Be(n)}))}))},t.prototype.Sv=function(n){var i=n.getRootNode();this.ti.observe(i,t.Tv),this.Rv(n,i)},t.prototype.Rv=function(t,n){var i=this.pv.get(n);i?i.add(t):this.pv.set(n,new Set([t]))},t.prototype.bv=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processElementVisiblityFromIntersection(r.target,r.isIntersecting)}},t.prototype.Be=function(t){var n=this,i=t.target.getRootNode(),r=this.pv.get(i);r&&r.forEach((function(t){n.We.unobserve(t),n.We.observe(t)}))},t.prototype.processElementVisiblityFromIntersection=function(t,n){var i="visible"===document.visibilityState,r=this.mv.get(t),s=i&&n&&fi.isVisibleInViewportInForeground(t);r!==s&&(this.mv.set(t,s),this.Av(t,s))},t.prototype.Av=function(t,n){this.Ev({target:t,isVisible:n})},t.prototype.isSupported=function(){return this.vv&&this.isGetRootNodeSupported},t.kv=["style","class","hidden"],t.Tv={subtree:!0,childList:!0,attributes:!0,attributeFilter:t.kv},t.Nv={root:null,rootMargin:"0px",threshold:1},ot([Zn("processElementVisiblityFromIntersection")],t.prototype,"processElementVisiblityFromIntersection",null),t}(),nu=function(t){function n(n,i){var r=t.call(this)||this;return r.J=n,r.eu=i,r.Ov=r.eu.isSupported(),r}return ut(n,t),n.prototype.init=function(){this.Ov&&(this.Iv=new Map,this.xv())},n.prototype.onProductExposed=function(t){this.Lv=t},n.prototype.track=function(t){this.Ov&&this.eu.track(t)},n.prototype.clearState=function(){this.Ov&&this.isStarted&&this._v()},n.prototype.onStart=function(){this.Ov&&this.eu.start()},n.prototype.onStop=function(){this.Ov&&(this._v(),this.eu.stop())},n.prototype.xv=function(){var t=this;this.eu.init(),this.eu.onEvent((function(n){var i=n.target;n.isVisible?t.Cv(i):t.Mv(i)}))},n.prototype._v=function(){var t=this;this.Iv.forEach((function(n,i){t.Mv(i)})),this.Iv.clear()},n.prototype.Cv=function(t){this.Iv.set(t,xt())},n.prototype.Mv=function(t){var i=this.Iv.get(t);if(void 0!==i){var r=xt()-i;this.Iv.delete(t),r<n.EXPOSURE_DURATION_THRESHOLD||this.Lv(this.Pv(t,r))}},n.prototype.Pv=function(t,n){var i=t.href;return{targetPath:it.getElementPath(t,{dynamicIdRegex:this.J.dynamicIdRegex}),duration:n,href:i}},n.EXPOSURE_DURATION_THRESHOLD=150,n}(yi),iu=function(){function t(t,n,i,r,s){this.Dv=t,this.Uv=n,this.Ga=i,this.vn=r,this.qv=s}return t.prototype.init=function(){this.jv(),this.Fv()},t.prototype.initStates=function(){this.Hv(!0)},t.prototype.send=function(t){this.Vv(t)},t.prototype.sendBeacon=function(t){this.zv(t)},t.prototype.jv=function(){var t=this,n=hr.isCompressionEnabled();n&&this.Jv(),this.Dv.afterProvidersCalled((function(){t.Ga.reset()})),this.Dv.setRequestParametersProviders(this.Ga),this.Dv.after((function(){t.Hv(n)}))},t.prototype.Hv=function(t){var n=this;this.Ga.setRequestParametersFromProvider(new ji(this.qv,{getRequestParameters:function(){return{ct:t?n.vn.algorithm:On.UNCOMPRESSED}}}))},t.prototype.Fv=function(){var t=this;this.Uv.before((function(){t.Hv(!1)})),this.Uv.setRequestParametersProviders(this.Ga),this.Uv.after((function(){t.Ga.reset(),t.Hv(!0)}))},t.prototype.Vv=function(t){this.Dv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Dv.send()},t.prototype.zv=function(t){this.Uv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Uv.send()},t.prototype.Jv=function(){this.Dv.setCompressionOptions(this.vn,"base64"),this.Dv.setRequestHeader({name:"Content-type",value:"text/plain; charset=UTF-8"})},t}(),ru="display",su=function(){function t(t,n,i,r,s,e,u,h){this.J=t,this.Xc=n,this.vn=i,this.Gv=r,this._t=s,this.et=e,this.zo=u,this.wo=h}return t.prototype.init=function(){var t=new nr(new ur),n=new Ze(this.J,this.Xc,t),i=new ge,r=new tu,s=new nu(this.J,r),e=new Qe,u=new iu(new qn(this.J.getTrackerUri(),ru),new br(this.J.getTrackerUri(),ru),e,this.vn,new ji(this.Gv,this._t));this.Wv=new Xe(this.et,n,i,u,e,s),this.Wv.init(),this.zo.addListeners(this.Wv)},t.prototype.onStartTracking=function(){this.Wv.start(),this.Wv.collectInitialProducts()},t.prototype.onArtificialPageViewEnd=function(){this.Wv.clearState()},t.prototype.onAfterNaturalPageView=function(){this.Wv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Wv.initStates(),this.Wv.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.Wv.clearState(),this.Wv.stop()},t.prototype.onOptout=function(){this.Wv.stop()},ot([Zn("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function eu(t){return t.tagDeploymentMode===Me.DualCollectionReview||t.tagDeploymentMode===Me.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(Me||(Me={}));var uu,hu=function(){function t(t,n,i,r){this.J=t,this.it=n,this.st=i,this.Sn=r}return t.prototype.init=function(){this.Bv=!1,this.Kv=!1},t.prototype.loadClicktalePtc=function(){!this.Bv&&this.J.ptcDomain&&this.J.ptcGuid&&this.Yv()},t.prototype.getSessionData=function(){var t=this.J.projectId,n=this.it.getVisitor();null==n&&J.warn("Visitor is null. This happen when a snippet try to get Session Data before the tag was initialized");var i=null!=n?n:{};return{projectId:t,userId:i.id,sessionNumber:i.visitsCount,pageNumber:this.st.getSession().pageNumber}},t.prototype.startDataCollection=function(t){this.Kv||(this.J.tagDeploymentMode===Me.LoadClicktalePtc&&this.Xv()&&this.Sn.initCTPII(),eu(this.J)&&(this.Sn.initCTPII(),t(),this.Kv=!0))},t.prototype.Xv=function(){return this.J.useMalkaPipeline&&this.st.isReplayRecorded()},t.prototype.Yv=function(){this.Bv=!0;var t=this.$v();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.$v=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.J.ptcSha512&&this.J.ptcSnapshotPath?(t.integrity="sha512-".concat(this.J.ptcSha512),t.src="https://".concat(this.J.ptcDomain,"/").concat(this.J.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.J.ptcDomain,"/ptc/").concat(this.J.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(uu||(uu={}));var ou,cu=function(){function t(t,n,i,r,s,e,u){this.J=t,this.it=n,this.st=i,this.et=r,this.wo=s,this.Zv=e,this.Sn=u}return t.prototype.init=function(){var t=this;this.Qv=new hu(this.J,this.it,this.st,this.Sn),this.Qv.init(),this.tl(),this.wo.register(["getSessionData"],(function(){return t.Qv.getSessionData()})),this.wo.register(["startDataCollection"],(function(){t.Qv.startDataCollection(t.Zv)}))},t.prototype.tl=function(){eu(this.J)&&this.Qv.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.J.tagDeploymentMode===Me.LoadClicktalePtc&&(!this.J.useMalkaPipeline&&this.st.isReplayRecorded()||this.Qv.loadClicktalePtc())},t.prototype.onAfterArtificialPageView=function(){!this.st.isReplayRecorded()&&uu.isRecording()&&this.J.tagDeploymentMode===Me.LoadClicktalePtc&&uu.triggerLogicalPageView(this.et.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.st.isReplayRecorded()&&uu.isRecording()&&uu.triggerLogicalPageView(this.et.getAnonymizedUrl())},t.prototype.onOptout=function(){uu.isRecording()&&uu.stopRecording()},t}(),fu="@user-identifier@",au=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.J=n,u.nl=i,u.vn=r,u.il=s,u.rl=e,u.sl=[],u.el=[],u}return ut(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.sl,(function(n){return t.trackPageEvent(n)})),this.sl=[],csArray.prototype.forEach.call(this.el,(function(n){return t.trackEventTriggerRecording(n)})),this.el=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.ul(t)&&(this.hl(t)?this.rl.isSupported()&&this.ol(t):this.cl(t)):csArray.prototype.push.call(this.sl,t)},n.prototype.hl=function(t){return I(t,fu)},n.prototype.ol=function(t){return ct(this,void 0,void 0,(function(){var n,i;return ft(this,(function(r){switch(r.label){case 0:return this.J.customHashIdEnabled?(n=csString.prototype.slice.call(t,fu.length),this.rl.isValidInput(n)?[4,this.rl.digest(n,this.J.projectId)]:(J.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.al={eventName:i,isETR:!1,isCustomHashId:!0},this.vl()):J.warn("Page event: unable to compute customHashId"),this.J.encryptionEnabled?(this.il.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.cl=function(t){this.il.emitPageEvent(t),this.al={eventName:t,isETR:!1,isCustomHashId:!1},this.vl(),this.J.tagDeploymentMode===Me.LoadClicktalePtc&&uu.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.ul(t)&&(this.J.useMalkaPipeline&&this.J.malkaEtrEnabled?this.ll(t):this.dl(t)):csArray.prototype.push.call(this.el,t)},n.prototype.ll=function(t){I(t,"@ETP@")?this.il.emitEventTriggerRecording(t,on.ETR_PAGE):this.il.emitEventTriggerRecording(t,on.ETR_SESSION),this.al={eventName:t,isETR:!0,isCustomHashId:!1},this.vl()},n.prototype.dl=function(t){(function(t){return eu(t)||t.tagDeploymentMode===Me.LoadClicktalePtc})(this.J)&&(this.il.emitEventTriggerRecording(t,on.ETR_LEGACY),this.al={eventName:t,isETR:!0,isCustomHashId:!1},this.vl(),this.J.tagDeploymentMode===Me.LoadClicktalePtc&&uu.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.vn.compressSync(this.al.eventName),ct:this.vn.algorithm,isETR:"".concat(this.al.isETR),isCustomHashId:"".concat(this.al.isCustomHashId)}},n.prototype.vl=function(){this.nl.send()},n.ul=function(t){return q(t)&&!!csString.prototype.trim.call(t)},n}(yi),vu=function(){function t(t){this.wl=t,this.yl=!1}return t.prototype.init=function(){this.yl=this.pl(),this.yl&&(this._u=new TextEncoder)},t.prototype.pl=function(){return!!(this.wl&&this.wl.subtle&&this.wl.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.yl},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.ml=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t.prototype.digest=function(t,n){return ct(this,void 0,void 0,(function(){var i,r,s;return ft(this,(function(e){switch(e.label){case 0:if(!this.yl)return[2,null];i=this.ml(t,n),r=this._u.encode(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return s=e.sent(),[2,(u=s,h=csArray.from(new Uint8Array(u)),csArray.prototype.join.call(csArray.prototype.map.call(h,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return e.sent(),[2,null];case 4:return[2]}var u,h}))}))},t}(),lu=["trackPageEvent"],du=["trackEventTriggerRecording"],wu=function(){function t(t,n,i,r,s){this.J=t,this.wo=n,this.vn=i,this.do=r,this.il=s}return t.prototype.init=function(){var t=this,n=new Et(this.J.getTrackerUri(),"pageEvent"),i=new vu(window.crypto);i.init(),this.gl=new au(this.J,n,this.vn,this.il,i),n.setRequestParametersProviders(this.gl,this.do),this.wo.register(lu,(function(n){t.gl.trackPageEvent(n)})),this.wo.register(du,(function(n){t.gl.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.gl.start()},t}();!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(ou||(ou={}));var yu,pu=["value","checked","src","data","alt"],mu=["[data-cs-mask]","img[src^='data:']","script"],gu=[{selector:"input:not([type=button])",attrName:"value"}],Au=[".ctHidden, textarea"],Eu=[{selector:".ctHidden, input:not([type=button])",attrName:"value"}],Su=function(){function t(t){var n;this.J=t,this.Al=[],this.El="",this.bu=document.createElement("div"),eu(this.J)||(this.El=this.Sl(this.El,mu),(n=csArray.prototype.push).call.apply(n,at([this.Al],gu,!1)))}return t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return B(t,i.bu)}));this.El=this.Sl(this.El,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&B(t.selector,i.bu)&&!i.bl(t)&&csArray.prototype.push.call(i.Al,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.El],Attributes:this.Al}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.El=this.Sl(this.El,Au),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return B(t,r.bu)}));this.El=this.Sl(this.El,s),(t=csArray.prototype.push).call.apply(t,at([this.Al],Eu,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&B(t.rule,r.bu)&&csArray.prototype.push.call(r.Al,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(pu,n)||this.Nl(t,n,this.Al)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===ou.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===ou.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(a(t)||A(t)){this.Tl(t);var i=hi.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.Tl(t.shadowRoot)}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(a(t)||A(t)){this.Rl(t);var i=hi.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.Rl(t.shadowRoot)}))}},t.prototype.Rl=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.Tl=function(t){var n=this;if(this.kl(t))return this.Ol(t),void this.Il(t);this.xl(t,this.El)?(this.Ll(t),this.Il(t)):ei(t.querySelectorAll(this.El),(function(t){n._l(t)||(n.Ll(t),n.Il(t))}))},t.prototype._l=function(t){return w(t)&&I(t.src,"data:image/svg+xml")&&t.src.length<=1024},t.prototype.Ll=function(t){t.__contentsquare_sensitive=ou.Sensitive},t.prototype.Ol=function(t){t.__contentsquare_sensitive=ou.SensitiveChild},t.prototype.Il=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.Ol(i),i=n.nextNode()},t.prototype.kl=function(t){return!(!csNodeparentNode.apply(t)||!a(csNodeparentNode.apply(t))&&!A(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||S(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.xl=function(t,n){return a(t)&&W.call(t,n)},t.prototype.Nl=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&W.call(t,i.selector)}))},t.prototype.Sl=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=t,r=0,s=n;r<s.length;r++)for(var e=s[r],u=0,h=csString.prototype.split.call(e,",");u<h.length;u++){var o=h[u];-1===csString.prototype.indexOf.call(i,o)&&(i+=",".concat(o))}return i},t.prototype.bl=function(t){return csArray.prototype.some.call(this.Al,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),bu=function(){function t(t){this.wo=t}return t.prototype.init=function(){this.Cl(t.Ml,Dt),this.Cl(t.Pl,Pt)},t.prototype.Cl=function(t,n){this.wo.register([t],(function(t,i){q(t)&&q(i)&&J.error(i,"".concat(n).concat(t))}))},t.Pl="logSnippetError",t.Ml="logImplementationSnippetError",t}(),Nu=function(){function t(t,n,i,r){this.J=t,this.Vo=n,this.lo=i,this.zo=r}return t.prototype.init=function(){var t=this;this.Vo.onChildMessage((function(n,i,r){return t.zo.emitIframeEvent(n,i,r)})),this.Vo.setRecordingStatusCallback((function(){return t.lo.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.J.iframesTracking&&this.Vo.start()},t.prototype.onOptout=function(){this.J.iframesTracking&&this.Vo.stop()},t.prototype.onRecordingStatusChange=function(){this.J.iframesTracking&&this.Vo.onRecordingStatusChange(this.lo.getRecordingStatus())},t}(),Tu=function(t){function n(n,i){var r=t.call(this)||this;return r.J=n,r.Sn=i,r.Dl=0,r.Ul=new Map,r.ql={boundElement:window,type:"message",listener:function(t){return r.jl(t)}},r}return ut(n,t),n.prototype.onChildMessage=function(t){this.Fl=t},n.prototype.setRecordingStatusCallback=function(t){this.Hl=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Gt.buildBaseMessage(Jt.RecordingStatus,zt.Parent,this.J.projectId);i.content=t,this.Ul.forEach((function(t){!n.Vl(t)&&t.port&&Gt.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Gt.buildBaseMessage(t,zt.Parent,this.J.projectId);i.content=n,this.zl(i)},n.prototype.onStart=function(){Hn(this.ql,!1),this.Jl()},n.prototype.onStop=function(){this.Gl(),Vn(this.ql,!1),this.Wl()},n.prototype.Jl=function(){var t=this,n=this.Bl();this.Kl(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.Yl(n)){var i={iframe:n};t.Ul.set(t.Dl,i),t.Dl+=1}})),this.Xl()},n.prototype.Bl=function(){var t=this;return csArray.prototype.filter.call(fi.findAllElements("iframe"),(function(n){return t.$l(n)}))},n.prototype.Kl=function(t){var n=this;this.Ul.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Zl(r,i)}))},n.prototype.Zl=function(t,n){n.port&&Gt.closeChannelPort(n.port),this.Ul.delete(t)},n.prototype.Wl=function(){this.Ul.forEach((function(t){t.port&&Gt.closeChannelPort(t.port)})),this.Ul.clear()},n.prototype.Yl=function(t){var n=null;return this.Ul.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.$l=function(t){return t.id!==r&&(!t.src||Ht(Ft(t.src),this.J.hostnames))},n.prototype.zl=function(t){this.Ul.forEach((function(n){n.port&&Gt.sendChannelMessage(n.port,t)}))},n.prototype.Xl=function(){var t=this;this.Ul.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Ql(i);Gt.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Gl=function(){var t=this.td();this.Ul.forEach((function(n){n.port?Gt.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Gt.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Ql=function(t){return Gt.buildBaseMessage(Jt.Discovery,zt.Parent,this.J.projectId,t)},n.prototype.td=function(){return Gt.buildBaseMessage(Jt.Stop,zt.Parent,this.J.projectId)},n.prototype.nd=function(t,n){var i=this,r=this.Ul.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.rd(t,r)}):J.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Dl,")"))},n.prototype.sd=function(t){if(t.port){var n=Gt.buildBaseMessage(Jt.RecordingStatus,zt.Parent,this.J.projectId),i=this.Hl();this.Vl(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Gt.sendChannelMessage(t.port,n)}},n.prototype.rd=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===Jt.EndOfBufferedMessages?this.sd(n):this.Fl(n.iframe,i,r)}else J.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.jl=function(t){if(Gt.isMessageValid(t,zt.Child,this.J.projectId,this.J.hostnames))switch(t.data.type){case Jt.Discovery:if(void 0===t.data.id)return void this.Jl();if(t.ports&&1===t.ports.length&&this.Ul.has(t.data.id))return void this.nd(t.data.id,t.ports[0]);J.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Jt.ChildLogMessage:this.Fl(null,Jt.ChildLogMessage,t.data.content);break;default:J.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Vl=function(t){return this.Sn.isSensitive(t.iframe)||this.Sn.isSensitiveChild(t.iframe)},n}(yi),Ru=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.ud(n.x)-this.ud(t.x),r=this.ud(n.y)-this.ud(t.y),s=n.time-t.time;return{duration:s,distance:this.od(i,r),direction:this.ad(i,r),velocity:this.vd(i,r,s)}},t.prototype.computePinchMetrics=function(t,n){var i=this.ud(n.x)-this.ud(t.x),r=this.ud(n.y)-this.ud(t.y);return{duration:n.time-t.time,distance:this.od(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.ud=function(t){return t/window.devicePixelRatio},t.prototype.od=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.vd=function(t,n,i){var r=i/1e3,s=t/r,e=n/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.ad=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?gr.RIGHT:gr.LEFT:n>0?gr.DOWN:gr.UP},t}(),ku=function(){function t(){this.ld={},this.dd=new Ru,this.wd()}return t.prototype.onGesture=function(t){this.yd=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.pd(t)){this.md(t)&&this.wd();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:xt()};if(1===t.touches.length)this.ld.startPinchTime=n.time,this.ld.firstTouch=n;else if(2===t.touches.length&&(this.ld.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:xt()},this.ld.firstTouch&&this.ld.secondTouch)){var i=this.dd.computePinchMetrics(this.ld.firstTouch,this.ld.secondTouch);this.gd=i.distance}csArray.prototype.push.call(this.Ad,n),this.Ed=Qn(t)}},t.prototype.processActionMove=function(){this.Sd=!0},t.prototype.processActionUp=function(t){if(this.bd(t)){if(csArray.prototype.push.call(this.Ad,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:xt()}),this.Nd(t)&&this.ld.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.ld.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:xt()};this.ld.firstTouch&&(this.ld.firstTouch=n,this.ld.secondTouch=i),this.Td(t)}this.gd||this.Rd()&&this.kd(t)}},t.prototype.wd=function(){this.Ad=[],this.Ed=null,this.Sd=!1,this.gd=null},t.prototype.kd=function(t){var n=this.dd.compute(this.Ad[0],this.Ad[1]),i=this.Sd?this.Od(n):this.Id(n);this.yd(i,t)},t.prototype.Td=function(t){if(this.ld.firstTouch&&this.ld.secondTouch){var n=this.dd.computePinchMetrics(this.ld.firstTouch,this.ld.secondTouch),i=this.xd(n);i&&this.yd(i,t)}},t.prototype.xd=function(t){if(this.gd&&!(this.dd.getScale(this.gd,t.distance)<.1))return{type:this.gd>t.distance?mr.PINCH_IN:mr.PINCH_OUT,target:this.Ed,distance:t.distance}},t.prototype.Od=function(t){return{type:t.velocity<100?mr.DRAG:mr.FLICK,target:this.Ed,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.Id=function(t){return{type:t.duration<1e3?mr.TAP:mr.LONG_PRESS,target:this.Ed}},t.prototype.md=function(t){return 1===t.touches.length},t.prototype.Rd=function(){return 2===this.Ad.length},t.prototype.pd=function(t){return t.touches.length>0},t.prototype.bd=function(t){return t.changedTouches.length>0},t.prototype.Nd=function(t){return this.Sd&&!!this.gd&&1===t.changedTouches.length&&1===t.touches.length},t}(),Ou=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),Iu=function(t){function n(n){var i=t.call(this)||this;return i.Ld=n,i.Ds=[{boundElement:document,type:"touchstart",listener:function(t){return i.tr(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.tr(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.tr(t)}}],i._d=new ku,i._d.onGesture((function(t,n){return i.ih(t,n)})),i}return ut(n,t),n.prototype.ih=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,(function(t){return Hn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,(function(t){return Vn(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.tr=function(t){var n=this;this.Ld.tryToExecute("process gesture event",(function(){if(n._d.isValidTouchEvent(t))switch(t.type){case"touchstart":n._d.processActionDown(t);break;case"touchmove":n._d.processActionMove();break;case"touchend":n._d.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===mr.FLICK||t.type===mr.DRAG},n}(Ou),xu=function(t){function n(n,i){var r=t.call(this)||this;return r.Dv=n,r.Cd=i,r.Md=0,r}return ut(n,t),n.prototype.onStart=function(){var t=this;J.isLoggingActive()&&(this.Pd=window.setInterval((function(){return t.Dd()}),n.Ud))},n.prototype.onStop=function(){J.isLoggingActive()&&(this.Dd(),clearInterval(this.Pd))},n.prototype.Dd=function(){if(!(zn.isEmpty()||this.Md>=n.qd)){var t=zn.getAll();this.Md++;var i=ht({a:n.jd,l:n.Fd},this.Cd.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return ht(ht({},t),i)}));this.Dv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(r)}}),this.Dv.after((function(){zn.clear()})),this.Dv.send(!1)}},n.jd="uxa",n.Fd="perf",n.Ud=5e3,n.qd=5,n}(yi),Lu=function(){function t(t,n){this.J=t,this.Cd=n}return t.prototype.init=function(){this.Hd=new xu(new qn(this.J.getLoggerUri(),""),this.Cd)},t.prototype.onStartTracking=function(){this.Hd.start()},t.prototype.onOptout=function(){this.Hd.stop()},t}(),_u=function(){function t(){this.Vd=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r){this.Vd=!0,this.Ro=t,this.Sn=n,this.bo=i,this.Ao=r},t.prototype.getRecordingStatus=function(){return this.Vd?{isRecording:this.Ro.isRecording(),isMutationTrackerStarted:this.Ro.isMutationTrackerStarted(),PIISelectors:this.Sn.getPIISelectors(),capturedElementSelector:this.Ao.getWhitelistedElementsSelector(),useAnonymization:this.bo.shouldUseAnonymization()}:{isRecording:!1}},t}(),Cu=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b,N,T,R){var k=this;this.Gv=t,this.vn=n,this.it=i,this.st=r,this.ii=s,this.wo=e,this.zd=u,this.J=h,this.Jd=o,this.Gd=c,this.Wd=f,this.vo=a,this.G=v,this.Xc=l,this.ka=d,this.et=w,this.Bd=y,this.il=p,this._i=m,this.Ci=g,this.Mi=A,this.Di=E,this.zo=S,this._t=b,this.Kd=N,this.mo=T,this.Yd=R,this.Xd=function(t){void 0===t&&(t=!1),k.$d.start(t),k.Zd.start()}}return t.prototype.start=function(){var t=this;if(this.Jd.init(),this.Gd.init(),!this.Gd.isActive()){var n=new Ye(this.st,this.it),i=new Je(this.Xc),r=new Iu(J),s=new Ie(this.J,this.it,this.st,this.Xc,i,this.wo,n,r,this.zo,this.vn),e=new ps(this.wo,this.st,this.J,this.Gv,this.vn,this.G),u=new Su(this.J),h=new _u,o=new Tu(this.J,u),c=new Nu(this.J,o,h,this.zo);c.init();var f=new vs(this.it,this.st,this.wo,this.zo,o,this.J),a=new ks(this.J,this.it,this.st,this.wo,this.G,n,this.et);this.$d=new ze(this.J,this.wo,this.ii,this.it,this.st,this.vo,this._t,this.ka,this.et,this.mo);var v=new Ke(this.it,this.st,this.wo),l=new cu(this.J,this.it,this.st,this.et,this.wo,this.Xd,u),d=new wu(this.J,this.wo,this.vn,this.Gv,this.il),w=new bu(this.wo),y=new Lu(this.J,new Mt(this.J,this.G));if(this.Zd=new Ge,this.Wd.init(),f.init(),e.init(),a.init(),this.Kd.init(),this.$d.init(),v.init(),l.init(),d.init(),this.Bd.init(),w.init(),y.init(),this.Yd.init(),this.ii.addListeners(v,this.zd,s,this.Wd,f,this.Kd,this.$d,l,d,e,c,y),ts.isRecordingSupported()&&this.vn.isSupported()){var p=new es(h,this.st,this.J,this.vn,i,this.vo,this.Gv,this.wo,this.G,n,this.et,u,this._i,this.Ci,this.Mi,r,this.Di,this.ii,this.il,this.zo,this.mo);p.init(),this.ii.addListeners(p)}if(this.J.eMerchandisingEnabled){var m=new su(this.J,this.Xc,this.vn,this.Gv,this._t,this.et,this.zo,this.wo);m.init(),this.ii.addListeners(m)}s.init(),n.onSessionExpired((function(){t.ii.emitBeforeSessionRenewal(),t.Qd(!0),t.ii.emitAfterSessionRenewal()})),this.Qd()}},t.prototype.Qd=function(t){var n=this;void 0===t&&(t=!1),this.wo.start(),this.Zd.onLoad((function(){n.ii.emitStartTracking(t)})),eu(this.J)&&!t||this.Xd(t)},t}(),Mu=function(){function t(t,n,i,r,s,e,u,h){this.J=t,this.it=n,this.Lt=i,this.tw=r,this.nw=s,this.iw=e,this.Mt=u,this.rw=h}return t.prototype.compute=function(t){var n=this;this.J.crossDomainTracking&&!this.J.cookielessTrackingEnabled?this.J.crossDomainSingleIframeTracking?this.Mt.start((function(){return n.ew(t)})):this.iw.applyUpToDate((function(){return n.ew(t)})):this.ew(t)},t.prototype.ew=function(t){this.nw.handle(),this.tw.clear(),this.uw()?(this.tw.restoreClearedVisitor(),t(!0)):(this.Lt.exclude(this.J),t(!1))},t.prototype.uw=function(){var t=_.boolean(this.J.sampleRate);return this.rw.isForceIncluded()||!this.Lt.isExcluded()&&this.it.doesVisitorExist()||!this.Lt.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(yu||(yu={}));var Pu,Du=function(){function t(t,n,i){this.J=t,this.hw=n,this.st=i}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.ow(),this.st.removeSession()),this.cw(t),this.setVisitor(t)},t.prototype.ow=function(){return{id:yu.generate(),visitsCount:0,appliedTrackingDraw:this.J.lastTrackingDraw,creationTimestamp:Lt(),lastVisitTimestamp:0,hitTimestamp:0,expires:xt()+this.J.visitorCookieTimeout}},t.prototype.cw=function(t){var n=Lt();this.st.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.J.lastTrackingDraw,this.fw=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.hw.get()},t.prototype.setVisitor=function(t){this.hw.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.hw.get()},t.prototype.removeVisitor=function(){this.hw.remove()},t.prototype.handleSubdomainChange=function(){this.hw.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.fw&&t.visitsCount!==this.fw},t}(),Uu=function(){function t(t,n){this.configuration=t,this.compressor=n}return t.prototype.isCompressionSupported=function(){return this.compressor.isSupported()},t}(),qu=function(t){function n(n,i,r,s){var e=t.call(this,n,i)||this;return e.configuration=n,e.compressor=i,e.rw=r,e.et=s,e}return ut(n,t),n.prototype.sanitizeSessionRecordingState=function(t){return t},n.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&(this.rw.isForceLegacyReplayRecorded()||_.percentage()<this.configuration.replayRecordingRate&&ts.isRecordingSupported())?en.REPLAY_RECORDING_ENABLED:en.REPLAY_RECORDING_DISABLED},n.prototype.updateRecordingState=function(t){return t.recordingState},n.prototype.isReplayRecorded=function(t){return t.recordingState===en.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},n.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==en.REPLAY_RECORDING_ENABLED){var n=this.et.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(n)}return!1},n.prototype.getDisabledRecordingState=function(){return en.REPLAY_RECORDING_DISABLED},n.prototype.setVisitorService=function(t){},n}(Uu),ju=function(t){function n(n,i,r,s,e,u){var h=t.call(this,n,i)||this;return h.configuration=n,h.compressor=i,h.aw=r,h.ii=s,h.rw=e,h.et=u,h.lw=[],h}return ut(n,t),n.prototype.init=function(){this.yw()},n.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===un.TEMPORARILY_RECORDED&&(t.recordingState=un.NOT_RECORDED),t},n.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&ts.isRecordingSupported()?(this.lw=[],_.percentage()<this.configuration.replayRecordingRate||this.rw.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.lw,un.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.lw,un.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.lw,un.ETR_SAMPLING),this.lw.length>0?(this.pw(t),un.TEMPORARILY_RECORDED):un.NOT_RECORDED):un.NOT_RECORDED},n.prototype.updateRecordingState=function(t){return this.isCompressionSupported()&&ts.isRecordingSupported()?t.recordingState===un.GLOBAL_SAMPLING?un.GLOBAL_SAMPLING:(this.lw=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.lw,un.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.lw,un.ETR_SAMPLING)),this.lw.length>0?(this.pw(t),un.TEMPORARILY_RECORDED):un.NOT_RECORDED):un.NOT_RECORDED},n.prototype.pw=function(t){var n,i=this,r=null===(n=this.it)||void 0===n?void 0:n.getVisitor();this.aw.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify({recordingTypes:csArray.prototype.map.call(i.lw,Number),url:i.et.getAnonymizedUrl(),projectId:i.configuration.projectId,uu:(null==r?void 0:r.id)||"",sn:(null==r?void 0:r.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})}}),this.aw.send()},n.prototype.abortQuotaServiceRequest=function(){this.aw.abort()},n.prototype.isReplayRecorded=function(t){return t.recordingState===un.TEMPORARILY_RECORDED||t.recordingState===un.GLOBAL_SAMPLING||t.recordingState===un.URL_SAMPLING||t.etrState===hn.ETR_ON},n.prototype.yw=function(){var t=this;this.aw.setRequestHeader({name:"Content-Type",value:"application/json"}),this.aw.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.aw.onTimeout(3e3,(function(){return t.quotaServiceTimeoutHandler()})),this.aw.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},n.prototype.quotaServiceErrorHandler=function(t){this.mw(),J.warn("Quota Service: request error - ".concat(t))},n.prototype.quotaServiceTimeoutHandler=function(){this.mw(),J.warn("Quota Service: request timeout")},n.prototype.mw=function(){var t=un.NOT_RECORDED;this.gw(this.lw)&&(t=un.GLOBAL_SAMPLING),this.ii.emitRecordingStateChange(t,hn.ETR_OFF)},n.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=hn.ETR_OFF,s=un.NOT_RECORDED;this.gw(i)?s=un.GLOBAL_SAMPLING:this.Aw(i)&&(s=un.URL_SAMPLING),this.Ew(i)&&(r=hn.ETR_ON),this.ii.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},n.prototype.gw=function(t){return csArray.prototype.some.call(t,(function(t){return t===un.GLOBAL_SAMPLING}))},n.prototype.Aw=function(t){return csArray.prototype.some.call(t,(function(t){return t===un.URL_SAMPLING}))},n.prototype.Ew=function(t){return csArray.prototype.some.call(t,(function(t){return t===un.ETR_SAMPLING}))},n.prototype.setVisitorService=function(t){this.it=t},n.prototype.getDisabledRecordingState=function(){return un.NOT_RECORDED},ot([G("Quota Service: onerror")],n.prototype,"quotaServiceErrorHandler",null),ot([G("Quota Service: ontimeout")],n.prototype,"quotaServiceTimeoutHandler",null),ot([G("Quota Service: onload")],n.prototype,"quotaServiceLoadHandler",null),n}(Uu),Fu=function(){function t(t,n){this.Sw=t,this.bw=n,this.Nw=!1,this.Tw=null,this.Rw=0}return t.prototype.setDynamicVariablesService=function(t){this.kw=t},t.prototype.createOrUpdateSession=function(){this.Ow(),this.Iw=xt(),this.Rw=0;var t=this.xw();null===t?(t=this.Lw(),this._w(t),t.recordingState=this.bw.computeInitialRecordingState(t)):(t=this.bw.sanitizeSessionRecordingState(t),this._w(t),t.recordingState=this.bw.updateRecordingState(t)),this.setSession(t),this.Cw(t)},t.prototype.Lw=function(){return{pageNumber:0,recordingState:this.bw.getDisabledRecordingState(),etrState:hn.ETR_OFF}},t.prototype.Cw=function(t){this.bw instanceof qu?this.Nw=this.bw.computeTriggerSessionReplayStatus(t):this.Nw=!1},t.prototype.Mw=function(){var t=this.Lw();return this._w(t),t.recordingState=this.bw.computeInitialRecordingState(t),this.Cw(t),t},t.prototype._w=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.bw.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===un.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.bw instanceof ju&&this.bw.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber),this.bw instanceof qu&&(t.re=this.Nw?en.TRIGGER_REPLAY_RECORDING_ENABLED:n.recordingState)),t},t.prototype.getSession=function(){return this.Sw.get()},t.prototype.xw=function(){return this.Sw.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.Sw.get()},t.prototype.setSession=function(t){this.Sw.set(t)},t.prototype.removeSession=function(){this.Sw.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==un.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===hn.ETR_ON&&csArray.prototype.push.call(n,un.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.Sw.getRawSession();return this.Sw.isValid(t)},t.prototype.handleSubdomainChange=function(){this.Sw.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.Sw.isCacheRefreshed();return t&&this.Sw.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.Tw||this.Pw()},t.prototype.Pw=function(){if(this.Dw())this.Ow();else{var t=this.getSession();null===t&&(t=this.Mw()),this.Sw.set(t,174e4),this.Uw(),this.qw()}},t.prototype.qw=function(){var t=this;this.Tw=window.setTimeout((function(){t.Pw()}),174e4)},t.prototype.Dw=function(){return 1434e4-(xt()+yn-this.Iw)<0},t.prototype.Ow=function(){this.Tw&&(window.clearTimeout(this.Tw),this.Tw=null)},t.prototype.Uw=function(){this.Rw+=1,this.kw.trackDynamicVariable("session_expiry_update",this.Rw)},t}(),Hu=function(){function t(t,n,i){this.J=t,this.it=n,this.Lt=i}return t.prototype.clear=function(){this.jw()&&(this.Fw=this.it.getVisitor(),this.it.removeVisitor()),this.Hw()&&this.Lt.removeExclusion()},t.prototype.jw=function(){return this.it.doesVisitorExist()&&this.it.getVisitor().appliedTrackingDraw!==this.J.lastTrackingDraw},t.prototype.Hw=function(){return this.Lt.getAppliedTrackingDraw()!==this.J.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Fw&&this.it.setVisitor(this.Fw)},t}(),Vu=function(){function t(t,n){this.it=t,this.st=n}return t.prototype.handle=function(){this.Vw(),this.zw()},t.prototype.Vw=function(){this.it.handleSubdomainChange()},t.prototype.zw=function(){this.st.handleSubdomainChange()},t}(),zu=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(t=csArray.prototype.push).call.apply(t,at([this.listeners],n,!1))},t}(),Ju=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onStartTracking&&r.onStartTracking(t)}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onArtificialPageViewEnd&&i.onArtificialPageViewEnd()}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentGranted&&i.onConsentGranted()}},n.prototype.emitConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentWithdrawn&&i.onConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onRecordingStateChange&&s.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},ot([Zn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(zu),Gu="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Pu||(Pu={}));var Wu,Bu=function(){function t(t,n,i){this.J=t,this.Ct=n,this.Jw=i}return t.prototype.get=function(){var t;return null===(t=this.J.cookielessTrackingEnabled?this.Jw.getItem(Gu):this.Ct.get(Gu))?t:Number(t)},t.prototype.set=function(t){this.J.cookielessTrackingEnabled?this.Jw.setItem(Gu,csString(t)):this.Ct.set(Gu,csString(t),L)},t.prototype.remove=function(){this.J.cookielessTrackingEnabled?this.Jw.removeItem(Gu):this.Ct.delete(Gu)},t.prototype.handleSubdomainChange=function(){this.J.cookielessTrackingEnabled||(this.J.allowSubdomains?this.Ct.delete(Gu,Qt.CURRENT_DOMAIN):this.Ct.delete(Gu,this.Ct.getRootDomain()))},t}(),Ku=["trackConsentGranted"],Yu=["trackConsentWithdrawn"],Xu=function(){function t(t,n){this.wo=t,this.Xo=n}return t.prototype.init=function(){this.Xo.handleSubdomainChange(),this.Xo.setInitialConsent(),this.Gw()},t.prototype.Gw=function(){var t=this;this.wo.register(Ku,(function(){t.Xo.grantConsent()})),this.wo.register(Yu,(function(){t.Xo.withdrawConsent()}))},t.prototype.onOptout=function(){this.Xo.removeConsent()},t}(),$u=function(){function t(t,n,i){this.J=t,this.hw=n,this.ii=i}return t.prototype.setInitialConsent=function(){var t=this.hw.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.J.consentRequired;return n&&t===Pu.NOT_REQUIRED||!n&&t!==Pu.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.hw.handleSubdomainChange()},t.prototype.setDefault=function(){var t=this.J.consentRequired?Pu.NOT_EXPRESSED:Pu.NOT_REQUIRED;this.hw.set(t)},t.prototype.grantConsent=function(){this.J.consentRequired&&(this.hw.set(Pu.GRANTED),this.ii.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.J.consentRequired&&(this.hw.set(Pu.WITHDRAWN),this.ii.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.hw.remove()},t.prototype.isAllowedByConsent=function(){return!this.J.consentRequired||this.hw.get()===Pu.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.hw.get())}},t}(),Zu=function(){function t(t,n,i,r,s,e,u){this.ii=t,this.wo=n,this.zd=i,this.Jd=r,this.Gd=s,this.Ww=e,this.Wd=u}return t.prototype.start=function(){this.ii.addListeners(this.Ww,this.Wd,this.zd),this.Wd.init(),this.Jd.init(),this.Gd.init(),this.Gd.isActive()||this.wo.start()},t}(),Qu=function(){function t(t,n){this.Bt=t,this.hw=n}return t.prototype.exclude=function(t){this.hw.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.hw.remove()},t.prototype.isExcluded=function(){return this.Bw()||this.Kw()},t.prototype.Bw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.hw.get()},t.prototype.Kw=function(){return csString.prototype.indexOf.call(this.Bt.href,Sn)>0},t}(),th=function(){function t(t){this.Xo=t}return t.prototype.onOptout=function(){this.Xo.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Wu||(Wu={}));var nh,ih=function(){function t(t){this.et=t,this.Yw=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Yw=new RegExp(t)},t.prototype.Xw=function(){return this.Yw.test(this.et.getAnonymizedUrl())?Wu.SessionReplay:Wu.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Xw()===Wu.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Xw()}},t}(),rh=["excludeURLforReplay"],sh=function(){function t(t,n){this.Xo=t,this.wo=n}return t.prototype.init=function(){var t=this;this.wo.register(rh,(function(n){q(n)&&t.Xo.setExcludeUrlForSessionReplay(n)}))},t}(),eh="_cs_inc",uh=function(){function t(t,n){this.Bt=t,this.Ct=n}return t.prototype.isForceIncluded=function(){return this.$w()||this.Zw()},t.prototype.isForceLegacyReplayRecorded=function(){return this.Qw(en.REPLAY_RECORDING_ENABLED)||this.ty(en.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.Qw(un.GLOBAL_SAMPLING)},t.prototype.$w=function(){return null!==this.Ct.get(eh)},t.prototype.Qw=function(t){return this.Ct.get(eh)===t},t.prototype.Zw=function(){return csString.prototype.indexOf.call(this.Bt.href,eh)>0},t.prototype.ty=function(t){return csString.prototype.indexOf.call(this.Bt.href,"".concat(eh,"=").concat(t))>0},t}(),hh="_cs_optout",oh=function(){function t(t,n,i){this.J=t,this.Ct=n,this.Jw=i}return t.prototype.get=function(){return this.J.cookielessTrackingEnabled?this.Jw.getItem(hh):this.Ct.get(hh)},t.prototype.set=function(t){this.J.cookielessTrackingEnabled?this.Jw.setItem(hh,t):this.Ct.set(hh,t,L)},t}(),ch=function(){function t(t,n,i){this.ii=t,this.Bt=n,this.hw=i}return t.prototype.init=function(){!this.isActive()&&this.ny()&&this.activate()},t.prototype.isActive=function(){return"1"===this.hw.get()},t.prototype.activate=function(){this.ii.emitOptout(),this.hw.set("1")},t.prototype.ny=function(){return csString.prototype.indexOf.call(this.Bt.href,hh)>0},t}(),fh=["optout"],ah=function(){function t(t,n){this.wo=t,this.Gd=n}return t.prototype.init=function(){var t=this;this.wo.register(fh,(function(){t.Gd.activate()}))},t}();function vh(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),vh)[0]}(t,n);return i||r}}(nh||(nh={}));var lh=function(){function t(t,n,i){this.J=t,this.iy=n,this.sy=i}return t.prototype.applyUpToDate=function(t){var n=this;this.sy.retrieve(this.J.hostnames,(function(i){var r=at([n.iy.get()],i,!0),s=nh.select(r,n.J.lastTrackingDraw);n.iy.apply(s),t()}))},t}(),dh=function(){function t(t,n){this.wo=t,this.zo=n}return t.prototype.init=function(){this.zo.addListeners(this.wo)},t.prototype.onOptout=function(){this.wo.stop()},t.prototype.onBeforeSessionRenewal=function(){this.wo.stop()},t}();var wh,yh=function(t){function n(){var n=t.call(this)||this;return n.ey={},n}return ut(n,t),n.prototype.register=function(t,n){for(var i=0,r=t;i<r.length;i++){var s=r[i];this.ey[s]=n,this.ey}},n.prototype.onStart=function(){this.uy(),this.hy()},n.prototype.onStop=function(){window._uxa=[]},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.oy(r.name,r.params,t.iframePath)}},n.prototype.oy=function(t,n,i){var r=this;J.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.ey[t])return(i=r.ey)[t].apply(i,n)}))()},n.prototype.uy=function(){var t=this;window._uxa.forEach((function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}))},n.prototype.hy=function(){var t=this;window._uxa={push:function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}}},n.prototype.apply=function(t,n){var i;if(this.ey[t])return(i=this.ey)[t].apply(i,n)},ot([G("Commands.apply")],n.prototype,"apply",null),n}(yi),ph=function(){function t(){var t=this;this.If={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.onEvent=function(t){this.ai=t},t.prototype.start=function(){Hn(this.If)},t.prototype.stop=function(){Vn(this.If)},t.prototype.vy=function(n){if(!n)return!1;var i=n.disposition;return q(n.sourceFile)&&csArray.prototype.some.call(t.ly,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.vy(t)&&this.ai({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.ly=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],ot([G("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),mh=function(){function t(t){this.wy=t}return t.prototype.init=function(){var t=this;this.wy.onEvent((function(n){return t.tr(n)}))},t.prototype.start=function(){this.wy.start()},t.prototype.stop=function(){this.wy.stop()},t.prototype.tr=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);J.warn(n)},t}(),gh=function(t){function n(n,i,r,s,e,u){var h=t.call(this)||this;return h._i=n,h.yy=i,h.Gv=r,h.Ci=s,h.yo=e,h.et=u,h.py=[],h.Fi=0,h.my=[],h}return ut(n,t),n.prototype.init=function(){this.gy()},n.prototype.initStates=function(){this.ff=xt(),this.py=[],this.Fi=0},n.prototype.onStart=function(){var t=this;this._i.subscribe(n.nr,(function(n){return t.tr(n)})),this.Ay()},n.prototype.onStop=function(){this._i.unsubscribe(n.nr)},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.py})},n.prototype.onIframeJavascriptError=function(t){this.tr(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Ey(n)},n.prototype.Ey=function(t){var n=this;this.isStarted?this.tr(t,(function(t){return n.yo.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.my,t)},n.prototype.Ay=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.my,(function(n){return t.Ey(n)})),this.my=[])},n.prototype.tr=function(t,n){if(this.isStarted&&this.Fi<20){var i=ht(ht({},t),{pageUrl:this.et.getAnonymizedUrl(),rt:this.cf()});this.Ci.anonymize(i),csArray.prototype.push.call(this.py,i),this.Sy(),n&&n(i)}},n.prototype.gy=function(){var t=this;this.yy.setRequestParametersProviders(this.Gv),this.yy.setRequestPayloadProvider(this),this.yy.after((function(){t.py=[],t.Fi+=1}))},n.prototype.cf=function(){return xt()-this.ff},n.prototype.Sy=function(){this.yy.send()},n.nr="JavaScriptErrorsService",n}(yi),Ah=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Mi=n,e.by=i,e.Gv=r,e.Di=s,e.Ny=[],e.Hi=0,e}return ut(n,t),n.prototype.init=function(){this.Mi.init(),this.gy()},n.prototype.initStates=function(){this.Ny=[],this.Hi=0,this.uf()},n.prototype.uf=function(){this.ff=xt()},n.prototype.cf=function(){return xt()-this.ff},n.prototype.onStart=function(){var t=this;this.Mi.subscribe(n.nr,(function(n){return t.tr(n)}))},n.prototype.onStop=function(){this.Mi.unsubscribe(n.nr)},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.Ny})},n.prototype.onIframeApiError=function(t){this.tr(t)},n.prototype.tr=function(t){this.isStarted&&this.Hi<n.Ty&&(t.relativeTime=this.cf(),csArray.prototype.push.call(this.Ny,this.Di.anonymize(t)),this.Sy())},n.prototype.gy=function(){var t=this;this.by.setRequestParametersProviders(this.Gv),this.by.setRequestPayloadProvider(this),this.by.after((function(){t.Ny=[],t.Hi+=1}))},n.prototype.Sy=function(){this.by.send()},n.nr="ApiErrorsService",n.Ty=20,n}(yi),Eh=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Ry=n,e.Gv=i,e.ky=r,e.il=s,e.Oy=[],e.Vi=0,e.my=[],e}return ut(n,t),n.prototype.init=function(){this.gy()},n.prototype.initStates=function(){this.ff=xt(),this.Oy=[],this.Vi=0},n.prototype.trackCustomError=function(t,n){if(void 0===n&&(n={}),q(t)&&j(n)){var i={message:csString.prototype.slice.call(t,0,300),errorType:"customError"};this.Iy(n)&&(i.attributes=n),this.Ey(i)}},n.prototype.Iy=function(t){var n=Object.keys(t).length;if(0===n||n>5)return!1;for(var i in t)if(i.length>30||t[i].length>30)return!1;return!0},n.prototype.onStart=function(){this.Ay()},n.prototype.onStop=function(){},n.prototype.Ay=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.my,(function(n){return t.Ey(n)})),this.my=[])},n.prototype.Ey=function(t){if(this.isStarted){var n=this.xy(t);this.tr(n),this.il.emitCustomErrorEvent(n)}else csArray.prototype.push.call(this.my,t)},n.prototype.tr=function(t){this.isStarted&&this.Vi<20&&(csArray.prototype.push.call(this.Oy,t),this.Sy())},n.prototype.xy=function(t){var n=ht(ht({},t),{rt:this.cf()});return n.message=this.ky.anonymizeEmail(t.message),n},n.prototype.gy=function(){var t=this;this.Ry.setRequestParametersProviders(this.Gv),this.Ry.setRequestPayloadProvider(this),this.Ry.after((function(){t.Oy=[],t.Vi+=1}))},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.Oy})},n.prototype.cf=function(){return xt()-this.ff},n.prototype.Sy=function(){this.Ry.send()},n}(yi);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(wh||(wh={}));var Sh,bh=["trackError"],Nh=["api-errors:maskUrl"],Th=function(){function t(t,n,i,r,s,e,u,h,o,c,f){this._i=t,this.Ci=n,this.Mi=i,this.Di=r,this.ky=s,this.J=e,this.Gv=u,this.zo=h,this.wo=o,this.yo=c,this.et=f}return t.prototype.init=function(){this.Ly=new mh(new ph),this.Ly.init();var t=new qn(this.J.getTrackerUri(),"errors");this._y=new gh(this._i,t,this.Gv,this.Ci,this.yo,this.et),this._y.init(),this.zo.addListeners(this._y);var n=new qn(this.J.getTrackerUri(),"api-errors");this.Mi.excludeDomains([wh.CONTENTSQUARE,wh.CLICKTALE,wh.FAKE_TRACKER]),this.Cy=new Ah(this.Mi,n,this.Gv,this.Di),this.Cy.init(),this.zo.addListeners(this.Cy);var i=new qn(this.J.getTrackerUri(),"custom-errors");this.My=new Eh(i,this.Gv,this.ky,this.yo),this.My.init(),this.Gw()},t.prototype.Gw=function(){var t=this;this.wo.register(Nh,(function(n){return t.Di.addUrlMaskingPattern(n)})),this.wo.register(bh,(function(n,i){t.J.customErrorsEnabled?t.My.trackCustomError(n,i):t.J.jsCustomErrorsEnabled&&t._y.trackCustomError(n)}))},t.prototype.onInitTracking=function(){this.Ly.start()},t.prototype.onStartTracking=function(){this.J.jsErrorsEnabled&&this._y.start(),this.J.apiErrors.enabled&&this.Cy.start(),this.J.customErrorsEnabled&&this.My.start()},t.prototype.onAfterNaturalPageView=function(){this._y.initStates(),this.Cy.initStates(),this.My.initStates()},t.prototype.onAfterArtificialPageView=function(){this._y.initStates(),this.Cy.initStates(),this.My.initStates()},t.prototype.onBeforeSessionRenewal=function(){this._y.stop(),this.Cy.stop(),this.My.stop()},t.prototype.onOptout=function(){this.Ly.stop(),this._y.stop(),this.Cy.stop(),this.My.stop()},t}(),Rh="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Sh||(Sh={}));var kh=function(){function t(t,n){this.J=t,this.Ct=n,this.Py=Yt.None,this.Dy=!1,this.Uy=[],this.qy=[]}return t.prototype.init=function(){this.Py=this.Ct.isSameSiteSupported()?Yt.None:Yt.NotSet},t.prototype.setStates=function(t,n){this.iy=t,this.jy=n},t.prototype.start=function(t){var n=this;this.jy.init(this.Fy(),(function(i,r){var s=[n.iy.get()];r&&csArray.prototype.push.call(s,i);var e=nh.select(s,n.J.lastTrackingDraw);n.Dy=!0,n.iy.apply(e),t()})),this.Hy=this.jy.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.Dy){var r={name:t,value:n,samesite:this.Py,secure:Xt.Yes};i&&(r.expires=Bt.toExpireDate(i).getTime()),this.Vy(r)}},t.prototype.removeCookie=function(t){this.Dy&&this.zy(t)},t.prototype.zy=function(t){this.qy=csArray.prototype.filter.call(this.qy,(function(n){return n!==t})),this.Uy=csArray.prototype.filter.call(this.Uy,(function(n){return n.name!==t})),csArray.prototype.push.call(this.qy,t),this.setBatchReadyCall()},t.prototype.Vy=function(t){this.qy=csArray.prototype.filter.call(this.qy,(function(n){return n!==t.name})),this.Uy=csArray.prototype.filter.call(this.Uy,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.Uy,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.Jy()},t.prototype.Jy=function(){if(this.Uy.length>0){var t=this.Gy(Sh.Set,this.Uy);this.Wy(t),this.Uy=[]}if(this.qy.length>0){var n=this.Gy(Sh.Remove,this.qy);this.Wy(n),this.qy=[]}},t.prototype.Gy=function(t,n){return{command:t,cookies:n,domain:null,pid:this.J.projectId}},t.prototype.Wy=function(t){var n="https://".concat(this.Fy());this.Hy.contentWindow&&this.Hy.contentWindow.postMessage(t,n)},t.prototype.Fy=function(){return this.J.dualCollectionTagDomain&&this.J.dualCollectionTagDomain!==Rh?"cdnssl.".concat(this.J.dualCollectionTagDomain):"csxd.".concat(Rh)},ot([pr(),G("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),Oh=function(){function t(t,n){this.J=t,this.Wt=n}return t.prototype.init=function(t,n){this.By="https://".concat(t),this.Kt=n},t.prototype.openIframe=function(){var t=this;this.Wt.onMessage((function(n){t.$t(n)})),this.Wt.onTimeout((function(){t.Zt()})),this.Wt.start();var n=this.Ky(this.By);return this.Wt.open(n)},t.prototype.$t=function(t){if(this.Qt(t)){var n=t.data,i=!0;if(this.Yy(t))return void J.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!En.isRawDomainState(n))return void J.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));En.isValid(n)||(J.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this.Wt.stop(),this.Kt(i?gn.fromRaw(n):{},i)}},t.prototype.Zt=function(){J.warn("xdframe single domain: all messages not received")},t.prototype.Qt=function(t){return t.origin===this.By&&j(t.data)},t.prototype.Yy=function(t){return!!t.data.error},t.prototype.Ky=function(t){var n=this.J.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.1.1",".html?pid=").concat(n)},t}(),Ih=function(){function t(t,n,i){this.J=t,this.it=n,this.st=i}return t.prototype.getRequestParameters=function(){var t=this.st.getSession();if(!t)return{};var n=this.it.getVisitor();return n?ht(ht(ht({},{v:"dev"}),this.J.getRequestParameters()),{uu:n.id,sn:"".concat(n.visitsCount),pn:"".concat(t.pageNumber)}):{}},t}(),xh=function(t){function n(){var n=t.call(this)||this;return n.Xy=!1,n.If={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return ut(n,t),n.prototype.onStartTracking=function(){Hn(this.If,this.Xy)},n.prototype.onStopTracking=function(){Vn(this.If,this.Xy)},n.prototype.errorListener=function(t){var n=this.$y(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.Zy=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=n.Qy?t:csString.prototype.slice.call(t,0,n.Qy-n.truncatedErrorMessageMarker.length)+n.truncatedErrorMessageMarker},n.prototype.$y=function(t){return{errorType:"jsError",message:this.Zy(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="",n.Qy=1024,ot([G("Event handler type: error")],n.prototype,"errorListener",null),n}(Ou),Lh=function(){function t(t,n){this.wo=t,this.j=n}return t.prototype.init=function(){var t=this;this.wo.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.j.updateDynamicFields("emitDebugEvents",n)}))},t}();function _h(t,n,i){if(!F(n)&&!F(i))return t.href;var r=F(n)?function(t){return I(t,"/")?t:"/".concat(t)}(n):t.pathname,s=F(i)?function(t){return I(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var Ch=function(){function t(t,n){this.Bt=t,this.ka=n}return t.prototype.overridePath=function(t){F(t)&&q(t)&&(this.tp=""===t?void 0:t)},t.prototype.overrideQuery=function(t){F(t)&&q(t)&&(this.np=t)},t.prototype.computeOverriddenUrl=function(t){return this.ip(t)?this.getAnonymizedUrl():t},t.prototype.ip=function(t){var n=this.rp(this.Bt.href);return this.rp(t)===n},t.prototype.rp=function(t){return x(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=_h(this.Bt,this.tp,this.np);return this.ka.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Bt.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Mh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(zu),Ph=function(t){function n(n,i){var r=t.call(this)||this;return r.sp=n,r.ep=i,r.up=[],r}return ut(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.sp.onEvent((function(n){return t.hp(n)})),this.ep.onEvent((function(n){return t.hp(n)}))},n.prototype.onStartTracking=function(){this.sp.start(),this.ep.start()},n.prototype.onStopTracking=function(){this.sp.stop(),this.ep.stop()},n.prototype.hp=function(t){if(t.url&&t.statusCode){if(this.op(t.url))return;if(t.statusCode>=400)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.cp(t));else i(this.fp(t))}}},n.prototype.fp=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},n.prototype.cp=function(t){var n=this.fp(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),n},n.prototype.op=function(t){return csArray.prototype.some.call(this.up,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,at([this.up],t,!1))},n.truncatedErrorMessageMarker="",n}(Ou),Dh=function(){function t(){this.ap=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.isValidBodyType=function(t){var n=t["content-type"];if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.ap,(function(t){return I(i,t)}))},t}(),Uh=function(t){function n(n,i,r){var s=t.call(this)||this;return s.qr=n,s.vp=i,s.J=r,s.$e=!1,s.lp=null,s.dp=null,s.wp=null,s.je=[],s.yp=function(t){var n=t.context,i=t.args,r=t.callerName;return s.interceptOpen(n,i,r)},s.pp=function(t){var n=t.context,i=t.args;return s.interceptSetRequestHeader(n,i)},s.mp=function(t){var n=t.context,i=t.args;return s.interceptSend(n,i)},s}return ut(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},n.prototype.start=function(){this.$e||(this.gp(),this.lp&&this.lp.activate(),this.dp&&this.dp.activate(),this.wp&&this.wp.activate(),this.$e=!0)},n.prototype.stop=function(){this.$e&&(this.lp&&this.lp.deactivate(),this.dp&&this.dp.deactivate(),this.$e=!1)},n.prototype.gp=function(){this.lp||(this.lp=this.qr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"open",hook:this.yp,options:{withCallerName:!0}})),this.dp||(this.dp=this.qr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.pp})),this.wp||(this.wp=this.qr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"send",hook:this.mp}))},n.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&q(n[1])){var s=csString.prototype.split.call(n[1],"?"),e=s[0],u=s[1],h=jt(e);t.apiCall={url:h,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:xt(),responseTime:0,statusCode:0,library:i},u&&this.isValidUrl(h,this.J.apiErrors.validUrls)&&this.J.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},n.prototype.readyStateChangeListener=function(t){var n=this;t.apiCall&&t.readyState===XMLHttpRequest.DONE&&t.status>=400&&(t.apiCall.responseTime=xt(),t.apiCall.statusCode=t.status,this.Ap()&&csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(i){var r=csString.prototype.split.call(i,/:(.*)/),s=r[0],e=r[1];n.J.apiErrors.collectStandardHeaders&&n.vp.isValidStandardHeader(s)?t.apiCall.standardResponseHeaders[s]=csString.prototype.trim.call(e):n.vp.isValidCustomHeader(s)&&(t.apiCall.customResponseHeaders[s]=csString.prototype.trim.call(e))})),this.isValidUrl(t.apiCall.url,this.J.apiErrors.validUrls)&&this.J.apiErrors.collectResponseBody&&this.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.je,(function(n){return n(t.apiCall)})))},n.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.Ap()){var i=n[0],r=n[1];this.J.apiErrors.collectStandardHeaders&&this.vp.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.vp.isValidCustomHeader(i)&&r&&(t.apiCall.customRequestHeaders[i]=r.trim())}},n.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.isValidUrl(t.apiCall.url,this.J.apiErrors.validUrls)&&this.J.apiErrors.collectRequestBody&&this.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},n.prototype.Ap=function(){return this.J.apiErrors.collectStandardHeaders||this.J.apiErrors.validCustomHeaders&&0!==this.J.apiErrors.validCustomHeaders.length},ot([G("XhrRequestTracker.interceptOpen")],n.prototype,"interceptOpen",null),ot([G("XhrRequestTracker.readyStateChangeListener")],n.prototype,"readyStateChangeListener",null),ot([G("XhrRequestTracker.interceptSetRequestHeader")],n.prototype,"interceptSetRequestHeader",null),ot([G("XhrRequestTracker.interceptSend")],n.prototype,"interceptSend",null),n}(Dh),qh=function(t){function n(n,i,r){var s=t.call(this)||this;return s.qr=n,s.vp=i,s.J=r,s.$e=!1,s.Ep=null,s.je=[],s.Sp=function(t){var n=t.result,i=t.args,r=t.callerName;s.interceptFetch(n,i,r)},s}return ut(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},n.prototype.start=function(){this.$e||this.bp()&&(this.Np(),this.Ep&&this.Ep.activate(),this.$e=!0)},n.prototype.stop=function(){this.$e&&(this.Ep&&this.Ep.deactivate(),this.$e=!1)},n.prototype.bp=function(){return!!window.csFetch&&"function"==typeof window.csFetch},n.prototype.Tp=function(t,n){var i=at([],n,!0);return i[0]&&"function"==typeof i[0].clone&&(i[0]=n[0].clone()),{context:t,args:i}},n.prototype.Np=function(){this.Ep||(this.Ep=this.qr.createAsyncFunctionInterceptor({target:window,methodName:"fetch",hook:this.Sp,hookPrepareArgs:this.Tp,options:{withCallerName:!0}}))},n.prototype.Rp=function(t,n,i){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:return r=csString.prototype.split.call(n.url,"?"),s=r[0],e=r[1],u=jt(s),h=ht(ht({},t),{url:u,method:n.method,responseTime:xt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.J.apiErrors.collectStandardHeaders&&(h.standardRequestHeaders=this.kp(n.headers),h.standardResponseHeaders=this.kp(i.headers)),this.J.apiErrors.validCustomHeaders&&0!==this.J.apiErrors.validCustomHeaders.length&&(h.customRequestHeaders=this.Op(n.headers),h.customResponseHeaders=this.Op(i.headers)),this.isValidUrl(s,this.J.apiErrors.validUrls)?(this.J.apiErrors.collectQueryParam&&e&&(h.queryParameters=e),this.J.apiErrors.collectResponseBody&&this.isValidBodyType(h.standardResponseHeaders)?i.bodyUsed?[3,2]:(o=h,[4,i.clone().text()]):[3,2]):[3,4];case 1:o.responseBody=f.sent(),f.label=2;case 2:return this.J.apiErrors.collectRequestBody&&this.isValidBodyType(h.standardRequestHeaders)?(c=h,[4,n.text()]):[3,4];case 3:c.requestBody=f.sent(),f.label=4;case 4:return csArray.prototype.forEach.call(this.je,(function(t){return t(h)})),[2]}}))}))},n.prototype.interceptFetch=function(t,n,i){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:if(r=n[0],s=n[1],!q((e=new Request(r,s)).url))return[2];u=xt(),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t];case 2:return h=f.sent(),[3,4];case 3:if(o=f.sent(),this.Ip(o)||this.xp(o)||this.Lp(o))return[2];throw o;case 4:return c=-1,-1===h.type.indexOf("opaque")&&(c=h.status),c>=400?[4,this.Rp({statusCode:c,library:i,requestTime:u},e,h)]:[3,6];case 5:f.sent(),f.label=6;case 6:return[2]}}))}))},n.prototype.kp=function(t){var n=this,i={};return t.forEach((function(t,r){n.vp.isValidStandardHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.Op=function(t){var n=this,i={};return t.forEach((function(t,r){n.vp.isValidCustomHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.Ip=function(t){return t instanceof TypeError},n.prototype.xp=function(t){return t instanceof DOMException&&"AbortError"===t.name},n.prototype.Lp=function(t){return t instanceof DOMException&&csArray.prototype.some.call(n._p,(function(n){return n===t.name}))},n._p=["NoModificationAllowedError","InvalidStateError","OperationError"],ot([G("FetchRequestTracker.interceptFetch")],n.prototype,"interceptFetch",null),n}(Dh),jh="|iframe|",Fh=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Cp=n,e.Mp=i,e.Pp=r,e.Dp=s,e}return ut(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.qp(n)&&null===t)J.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Jt.ChildLogMessage:this.jp(i);break;case Jt.AnalysisEvent:var r=this.Cp.transformEvent(t,i);this.Fp(r);break;case Jt.RecordingEvent:var s=i,e=this.Dp.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Hp(e.events):this.Vp(e.events);break;case Jt.JavascriptError:this.zp(i);break;case Jt.ApiError:this.Jp(i);break;case Jt.DetailedApiError:this.Gp(i);break;case Jt.EmerchandisingMessage:var u=this.Pp.transformEvent(t,i);this.Wp(u);break;case Jt.Commands:var h=this.Mp.transformEvent(t,i);this.Bp(h);break;case Jt.IntegrationCallback:this.Kp(i);break;default:J.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.qp=function(t){var n=[Jt.AnalysisEvent,Jt.RecordingEvent,Jt.EmerchandisingMessage,Jt.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.jp=function(t){var n=t.message,i=t.errorCode;switch(t.level){case M.debug:J.debug(n,i);break;case M.warn:J.warn(n,i);break;case M.error:J.error(n,i);break;case M.critical:J.critical(n,i)}},n.prototype.Fp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Hp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Vp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.zp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.Jp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Gp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Wp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.Bp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Kp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n}(zu),Hh=function(){self.addEventListener("message",(function(t){var n=t.data,i=n[0],r=n[1],s=n[2],e=n[3];if(i===WORKER_SIGNATURE){var u=compress(r,s);u.then?u.then((function(t){return self.postMessage([WORKER_SIGNATURE,e,t])})):self.postMessage([WORKER_SIGNATURE,e,u])}}))},Vh="CS_WORKER_SIGNATURE",zh=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Yp=n,r.Xp=r.$p(),r.je={},r.Zp=0,r.Qp=n(),r}return ut(n,t),n.prototype.isSupported=function(){return!0},n.prototype.compress=function(t,n,i){if(this.Xp){var r=this.tm();this.je[r]=i,this.Xp.postMessage([Vh,t,n,r])}else{var s=this.Qp(t,n);s.then?s.then(i):i(s)}},n.prototype.compressSync=function(t){return this.Qp("base64",t)},n.prototype.handleWorkerMessage=function(t){var n=t.data,i=n[0],r=n[1],s=n[2];i===Vh&&(this.je[r](s),delete this.je[r])},n.prototype.tm=function(){return this.Zp+=1},n.prototype.$p=function(){try{var t=csArray.prototype.join.call(["\nvar WORKER_SIGNATURE = ".concat(csJSON.stringify(Vh),";"),"var compress = (".concat(this.Yp.toString(),")();"),"(".concat(Hh.toString(),")()\n\n//compression algo")],"\n");return this.nm(t)}catch(t){return null}},n.prototype.nm=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker;if(!i||!r||!s)return null;var e=new r([t],{type:"application/javascript"}),u=new s(i.createObjectURL(e));return u.onerror=function(t){return n.im(t)},u.onmessage=function(t){return n.handleWorkerMessage(t)},u},n.prototype.im=function(t){var n="WorkerError: ".concat(t.message?t.message:"No message");return this.onError(n)},ot([G("Worker message handler")],n.prototype,"handleWorkerMessage",null),n}(Dn);function Jh(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var f=new Array(60);t(f);var a=new Array(512);t(a);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,s){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?a[t]:a[256+(t>>>7)]},E=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},S=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){S(t,i[2*n],i[2*n+1])},N=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},T=function(t,n,i){var r,e,u=new Array(16),h=0;for(r=1;r<=s;r++)u[r]=h=h+i[r-1]<<1;for(e=0;e<=n;e++){var o=t[2*e+1];0!==o&&(t[2*e]=N(u[o]++,o))}},R=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},k=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},O=function(t,n,i,r){var s=2*n,e=2*i;return t[s]<t[e]||t[s]===t[e]&&r[n]<=r[i]},I=function(t,n,i){for(var r=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&O(n,t.heap[s+1],t.heap[s],t.depth)&&s++,!O(n,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},x=function(t,i,r){var s,h,o,c,f=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],h=t.pending_buf[t.l_buf+f],f++,0===s?b(t,h,i):(o=v[h],b(t,o+n+1,i),0!==(c=e[o])&&(h-=l[o],S(t,h,c)),s--,o=A(s),b(t,o,r),0!==(c=u[o])&&(s-=p[o],S(t,s,c)))}while(f<t.last_lit);b(t,256,i)},L=function(t,n){var i,r,e,u=n.dyn_tree,h=n.stat_desc.static_tree,o=n.stat_desc.has_stree,c=n.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=f=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[e]=0,t.opt_len--,o&&(t.static_len-=h[2*e+1]);for(n.max_code=f,i=t.heap_len>>1;i>=1;i--)I(t,u,i);e=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*e]=u[2*i]+u[2*r],t.depth[e]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,e,u,h,o,c=n.dyn_tree,f=n.max_code,a=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>f||(t.bl_count[u]++,h=0,r>=d&&(h=l[r-d]),o=c[2*r],t.opt_len+=o*(u+h),v&&(t.static_len+=o*(a[2*r+1]+h)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--i])>f||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,n),T(u,f,t.bl_count)},_=function(t,n,i){var r,s,e=-1,u=n[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)s=u,u=n[2*(r+1)+1],++h<o&&s===u||(h<c?t.bl_tree[2*s]+=h:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4))},C=function(t,n,i){var r,s,e=-1,u=n[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),r=0;r<=i;r++)if(s=u,u=n[2*(r+1)+1],!(++h<o&&s===u)){if(h<c)do{b(t,s,t.bl_tree)}while(0!=--h);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),h--),b(t,16,t.bl_tree),S(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),S(t,h-3,3)):(b(t,18,t.bl_tree),S(t,h-11,7));h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4)}},M=!1,P=function(t,n,i,r){S(t,0+(r?1:0),3),function(t,n,i,r){k(t),r&&(E(t,i),E(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){M||(!function(){var t,n,o,g,A,E=new Array(16);for(o=0,g=0;g<28;g++)for(l[g]=o,t=0;t<1<<e[g];t++)v[o++]=g;for(v[o-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)a[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)a[256+A++]=g;for(n=0;n<=s;n++)E[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(T(c,287,E),t=0;t<r;t++)f[2*t+1]=5,f[2*t]=N(t,5);d=new m(c,e,257,i,s),w=new m(f,u,0,r,s),y=new m(new Array(0),h,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,R(t)},U=function(t,i,r,s){var e,u,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),L(t,t.l_desc),L(t,t.d_desc),h=function(t){var n;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*o[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==i?P(t,i,r,s):4===t.strategy||u===e?(S(t,2+(s?1:0),3),x(t,c,f)):(S(t,4+(s?1:0),3),function(t,n,i,r){var s;for(S(t,n-257,5),S(t,i-1,5),S(t,r-4,4),s=0;s<r;s++)S(t,t.bl_tree[2*o[s]+1],3);C(t,t.dyn_ltree,n-1),C(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),x(t,t.dyn_ltree,t.dyn_dtree)),R(t),s&&k(t)},q=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},j=function(t){S(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},F={_tr_init:D,_tr_stored_block:P,_tr_flush_block:U,_tr_tally:q,_tr_align:j},H=function(t,n,i,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{e=e+(s=s+n[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},V=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),z=function(t,n,i,r){var s=V,e=r+i;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^n[u])];return-1^t},J={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,W=2,B=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=F._tr_init,nt=F._tr_stored_block,it=F._tr_flush_block,rt=F._tr_tally,st=F._tr_align,et=G,ut=1,ht=B,ot=K,ct=5,ft=Y,at=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,Et=2,St=Q,bt=258,Nt=262,Tt=103,Rt=113,kt=666,Ot=function(t,n){return t.msg=J[n],n},It=function(t){return(t<<1)-(t>4?9:0)},xt=function(t){for(var n=t.length;--n>=0;)t[n]=0},Lt=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},_t=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Ct=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,_t(t.strm)},Mt=function(t,n){t.pending_buf[t.pending++]=n},Pt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,h=t.nice_match,o=t.strstart>t.w_size-Nt?t.strstart-(t.w_size-Nt):0,c=t.window,f=t.w_mask,a=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),h>t.lookahead&&(h=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[e]&&c[++i]===c[e+1]){e+=2,i++;do{}while(c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=n,u=r,r>=h)break;l=c[e+u-1],d=c[e+u]}}}while((n=a[n&f])>o&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,s,e,u,h,o,c,f,a=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-Nt)){t.window.set(t.window.subarray(a,a+a),0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=a?r-a:0}while(--i);n=i=a;do{r=t.prev[--n],t.prev[n]=r>=a?r-a:0}while(--i);s+=a}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,o=t.strstart+t.lookahead,c=s,f=void 0,(f=u.avail_in)>c&&(f=c),i=0===f?0:(u.avail_in-=f,h.set(u.input.subarray(u.next_in,u.next_in+f),o),1===u.state.wrap?u.adler=H(u.adler,h,f,o):2===u.state.wrap&&(u.adler=z(u.adler,h,f,o)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=i,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=Lt(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=Lt(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Nt&&0!==t.strm.avail_in)},qt=function(t,n){for(var i,r;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2},jt=function(t,n){for(var i,r,s;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Ct(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Ct(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2};function Ft(t,n,i,r,s){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=s}var Ht=[new Ft(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Ct(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Nt&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ct(t,!1),t.strm.avail_out),1)})),new Ft(4,4,8,4,qt),new Ft(4,5,16,8,qt),new Ft(4,6,32,32,qt),new Ft(4,4,16,16,jt),new Ft(8,16,32,32,jt),new Ft(8,16,128,128,jt),new Ft(8,32,128,256,jt),new Ft(32,128,258,1024,jt),new Ft(32,258,258,4096,jt)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zt=function(t){if(!t||!t.state)return Ot(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Rt,t.adler=2===n.wrap?0:1,n.last_flush=et,tt(n),ft},Jt=function(t){var n=zt(t);return n===ft&&function(t){t.window_size=2*t.w_size,xt(t.head),t.max_lazy_match=Ht[t.level].max_lazy,t.good_match=Ht[t.level].good_length,t.nice_match=Ht[t.level].nice_length,t.max_chain_length=Ht[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,s,e){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||i!==St||r<8||r>15||n<0||n>9||e<0||e>gt)return Ot(t,vt);8===r&&(r=9);var h=new Vt;return t.state=h,h.strm=t,h.wrap=u,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=n,h.strategy=e,h.method=i,Jt(t)},Wt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?Ot(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===kt&&n!==ot)return Ot(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=n,42===s.status)if(2===s.wrap)t.adler=0,Mt(s,31),Mt(s,139),Mt(s,8),s.gzhead?(Mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Mt(s,255&s.gzhead.time),Mt(s,s.gzhead.time>>8&255),Mt(s,s.gzhead.time>>16&255),Mt(s,s.gzhead.time>>24&255),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Mt(s,255&s.gzhead.extra.length),Mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=z(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,3),s.status=Rt);else{var u=St+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Rt,Pt(s,u),0!==s.strstart&&(Pt(s,t.adler>>>16),Pt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending!==s.pending_buf_size));)Mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.status=Tt)}else s.status=Tt;if(s.status===Tt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&_t(t),s.pending+2<=s.pending_buf_size&&(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),t.adler=0,s.status=Rt)):s.status=Rt),0!==s.pending){if(_t(t),0===t.avail_out)return s.last_flush=-1,ft}else if(0===t.avail_in&&It(n)<=It(e)&&n!==ot)return Ot(t,dt);if(s.status===kt&&0!==t.avail_in)return Ot(t,dt);if(0!==t.avail_in||0!==s.lookahead||n!==et&&s.status!==kt){var h=s.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===et)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(s,n):s.strategy===mt?function(t,n){for(var i,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(s,n):Ht[s.level].func(s,n);if(3!==h&&4!==h||(s.status=kt),1===h||3===h)return 0===t.avail_out&&(s.last_flush=-1),ft;if(2===h&&(n===ut?st(s):n!==ct&&(nt(s,0,0,!1),n===ht&&(xt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),_t(t),0===t.avail_out))return s.last_flush=-1,ft}return n!==ot?ft:s.wrap<=0?at:(2===s.wrap?(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),Mt(s,t.adler>>16&255),Mt(s,t.adler>>24&255),Mt(s,255&t.total_in),Mt(s,t.total_in>>8&255),Mt(s,t.total_in>>16&255),Mt(s,t.total_in>>24&255)):(Pt(s,t.adler>>>16),Pt(s,65535&t.adler)),_t(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?ft:at)},Bt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=H(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===s&&(xt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(n.subarray(i-r.w_size,i),0),n=e,i=r.w_size}var u=t.avail_in,h=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,f=r.lookahead-2;do{r.ins_h=Lt(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--f);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=h,t.input=o,t.avail_in=u,r.wrap=s,ft},Kt={deflateInit:function(t,n){return Gt(t,n,St,15,8,At)},deflateInit2:Gt,deflateReset:Jt,deflateResetKeep:zt,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,ft):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Tt&&n!==Rt&&n!==kt?Ot(t,vt):(t.state=null,n===Rt?Ot(t,lt):ft)},deflateSetDictionary:Bt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Xt=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Yt(i,r)&&(t[r]=i[r])}}return t},$t=function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var s=new Uint8Array(n),e=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];s.set(u,e),e+=u.length}return s},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Qt=new Uint8Array(256),tn=0;tn<256;tn++)Qt[tn]=tn>=252?6:tn>=248?5:tn>=240?4:tn>=224?3:tn>=192?2:1;Qt[254]=Qt[254]=1;var nn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},rn=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,s,e,u=t.length,h=0;for(s=0;s<u;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(h),e=0,s=0;e<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?n[e++]=i:i<2048?(n[e++]=192|i>>>6,n[e++]=128|63&i):i<65536?(n[e++]=224|i>>>12,n[e++]=128|i>>>6&63,n[e++]=128|63&i):(n[e++]=240|i>>>18,n[e++]=128|i>>>12&63,n[e++]=128|i>>>6&63,n[e++]=128|63&i);return n};var sn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,un=G,hn=W,on=B,cn=K,fn=Y,an=X,vn=$,ln=Z,dn=Q;function wn(t){this.options=Xt({level:vn,method:dn,chunkSize:16384,windowBits:15,memLevel:8,strategy:ln},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sn,this.strm.avail_out=0;var i=Kt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==fn)throw new Error(J[i]);if(n.header&&Kt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?rn(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Kt.deflateSetDictionary(this.strm,r))!==fn)throw new Error(J[i]);this._dict_set=!0}}function yn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new wn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||J[i.err];return i.result}(t,n)}return wn.prototype.push=function(t,n){var i,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?cn:un,"string"==typeof t?s.input=rn(t):"[object ArrayBuffer]"===en.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===hn||r===on)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((i=Kt.deflate(s,r))===an)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),i=Kt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===fn;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},wn.prototype.onData=function(t){this.chunks.push(t)},wn.prototype.onEnd=function(t){t===fn&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n){var i=yn(n);return"base64"===t?btoa(nn(i)):i}}var Gh=function(t){function n(n){var i=t.call(this,Jh,n)||this;return i.algorithm=On.GZIP,i}return ut(n,t),n}(zh),Wh=function(t){function n(n){var i=t.call(this,Bh,n)||this;return i.rm=Jh(),i.algorithm=On.GZIP,i}return ut(n,t),n.prototype.compressSync=function(t){return this.rm("base64",t)},n}(zh);function Bh(){return function(t,n){var i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();return"base64"===t?r.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})):r}}var Kh,Yh,Xh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n}("undefined"!=typeof CompressionStream?Wh:Gh),$h=function(){function t(){}return t.create=function(t){return this.instance?this.instance:hr.isCompressionEnabled()?this.instance=new Xh(t):new Un(t)},t}(),Zh=function(){function t(t){this.ka=t,this.Oa=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.ka.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Oa,n)},t.prototype.anonymize=function(t){var n=this.ka.removeQueryString(t.url);return ht(ht({},t),{url:this.ka.anonymizeUrl(n,this.Oa),library:t.library?this.ka.anonymizeUrl(t.library,this.Oa):void 0})},t}(),Qh=function(){function t(t,n){this.G=t,this.et=n}return t.prototype.anonymize=function(t){return q(t.message)&&(t.message=this.sm(t.message),t.message=this.G.anonymizeEmail(t.message)),q(t.filename)&&(t.filename=this.et.computeOverriddenUrl(t.filename)),t},t.prototype.sm=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),to=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),no=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),io=["visit",2],ro=["page",3],so=["nextPageOnly",4],eo=function(){function t(t,n){this.G=t,this.hw=n,this.um={},this.hm={}}return t.prototype.set=function(t,n,i,r){var s,e;if(t>0&&H(n)&&H(i)&&!V(n)&&!V(i)){var u=this.G.anonymizeEmail(csString(n)),h=this.G.anonymizeEmail(csString(i));if(s=[u.slice(0,512),h.slice(0,255)],e=""!==i,!F(r)||csArray.prototype.indexOf.call(io,r)>=0){var o=this.getCustomVariablesSession();e?o[t]=s:delete o[t],this.setCustomVariableSession(o)}(!F(r)||csArray.prototype.indexOf.call(ro,r)>=0)&&(e?this.um[t]=s:delete this.um[t]),F(r)&&csArray.prototype.indexOf.call(so,r)>=0&&(e?this.hm[t]=s:delete this.hm[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.hw.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&j(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.hw.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.hw.remove()},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.hm)this.hm.hasOwnProperty(n)&&(this.um[n]=this.hm[n]);for(var n in this.um)this.um.hasOwnProperty(n)&&(t[n]=this.um[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.om(t)};return this.um&&window.csJSON.stringify(this.um).length>2&&(i.cvarp=this.om(this.um)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.hm).length>0)for(var t in this.hm)this.hm[t]===this.um[t]&&(delete this.um[t],delete this.hm[t])},t.prototype.om=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],s=r[0],e=r[1];h=1,o=20,(!(U(u=i)&&u>=h&&u<=o)||s.length>512||e.length>255)&&delete t[n]}var u,h,o,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),uo=["setCustomVariable"],ho=function(){function t(t,n){this.wo=t,this._t=n}return t.prototype.init=function(){var t=this;this.wo.register(uo,(function(n,i,r,s){t._t.set(n,i,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this._t.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this._t.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this._t.removeCustomVariablesSession()},t}(),oo=function(){function t(t){this.J=t,this.fm=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.fm,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.J.apiErrors.validCustomHeaders)return!1;var n=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.J.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===n}))},t}(),co=function(){function t(t){this.G=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,s=csString.prototype.split.call(n,"/");r<s.length;r++){var e=s[r];I(e,t.am)?csArray.prototype.push.call(i,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(i,{key:e,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.G.anonymizeEmail(t);return i=this.G.anonymizeJwt(i),n.length>0?this.vm(i,n):i},t.prototype.removeQueryString=function(t){var n=this.lm(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.lm=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.vm=function(t,n){for(var i=this.lm(t),r=i.path,s=i.queryString,e=csString.prototype.split.call(r,"/"),u=0,h=n;u<h.length;u++){var o=h[u],c=this.dm(e,o);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.dm=function(n,i){if(n.length<i.length)return null;for(var r="",s=0;s<n.length;s+=1)if(s>=i.length)r+="".concat(n[s],"/");else if(I(i[s].key,t.am))r+="".concat(i[s].value,"/");else{if(n[s]!==i[s].key)return null;r+="".concat(n[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.am=":",t}(),fo=function(){function t(t,n){this.cc=t,this.J=n}return t.prototype.getEventTargetPath=function(t){var n=Qn(t);return this.cc.getElementPath(n,ht({dynamicIdRegex:this.J.dynamicIdRegex},this.J.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Qn(t),i=this.cc.getElementPathAndFirstAnchorParent(n,ht({dynamicIdRegex:this.J.dynamicIdRegex},this.J.pathComputationRules)),r=i.path,s=i.firstAnchorParent;return{path:r,targetLink:this.wm(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Qn(t);return this.cc.isValidElement(n)},t.prototype.getElementPath=function(t){return this.cc.getElementPath(t,ht({dynamicIdRegex:this.J.dynamicIdRegex},this.J.pathComputationRules))},t.prototype.wm=function(t){var n;return null!==t&&t.hasAttribute("href")&&!I(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),ao=function(){function t(t){this.Xc=t}return t.prototype.transformEvent=function(t,n){var i=this.ym(t,n),r=this.Xc.getElementPath(t);return this.pm(r,i)},t.prototype.ym=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+oi.windowOffsetX()),n.y=Math.round(i.top+n.y+oi.windowOffsetY())}return n},t.prototype.pm=function(t,n){return Is(n)&&(n.tgt="".concat(t).concat(jh).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(jh).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(jh).concat(n.tgtLk)),n},t}(),vo=function(){function t(t){this.Xc=t}return t.prototype.transformEvent=function(t,n){var i=this.Xc.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(jh).concat(n.iframePath):i,commands:n.commands}},t}(),lo=function(){function t(t){this.Xc=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Xc.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return ht(ht({},t),{targetPath:"".concat(i).concat(jh).concat(t.targetPath)})}));return ht(ht({},n),{products:r})},t}(),wo=function(){function t(t){this.En=t,this.gm={clientX:2,clientY:3},this.Am={clientX:1,clientY:2},this.Em=[Cn.POINTER_DOWN,Cn.POINTER_MOVE,Cn.POINTER_UP],this.Sm=[Cn.TOUCH_START,Cn.TOUCH_MOVE,Cn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!fi.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==Cn.VISIBILITY_CHANGE})),0===n.events.length||(J.warn("IframeRecordingEventsTransformer received event ".concat(Jt.RecordingEvent," \n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.En.getId(t);if(void 0===r)return J.error("IframeRecordingEventsTransformer received event ".concat(Jt.RecordingEvent," \n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var s=null;csArray.prototype.some.call(n.events,(function(t){return i.bm(t)||i.Nm(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=n.events;e<u.length;e++){var h=u[e];this.bm(h)?this.Tm(s,h):this.Nm(h)&&this.Rm(s,h),h.context=h.context&&h.context.length>0?"".concat(r,"/").concat(h.context):"".concat(r)}return n},t.prototype.Rm=function(t,n){this.km(this.Am,t,n)},t.prototype.Tm=function(t,n){this.km(this.gm,t,n)},t.prototype.km=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.bm=function(t){return-1!==csArray.prototype.indexOf.call(this.Em,t.type)},t.prototype.Nm=function(t){return-1!==csArray.prototype.indexOf.call(this.Sm,t.type)},t}(),yo=["img","link"],po={1:"Style",3:"Import",5:"Font"},mo=function(t){var n,i,r=csString.prototype.match.call(t,/url\(['"]?(?<url>[^\)]+)['"]?\)/);if(null===(n=null==r?void 0:r.groups)||void 0===n?void 0:n.url)return r.groups.url;var s=csString.prototype.match.call(t,/@import\s(?<url>.+)\s/);return(null===(i=null==s?void 0:s.groups)||void 0===i?void 0:i.url)||""},go=function(){function t(){}return t.prototype.serializeAttribute=function(t,n){var i=csString.prototype.toLowerCase.call(t.localName);if(csArray.prototype.some.call(yo,(function(t){return t===i}))){var r="img"===i?"src":"href",s=n.name,e=n.value;s===r&&("link"===i&&this.processLink(t),this.sendAsset(i,e))}},t.prototype.processLink=function(t){var n,i=this;try{var r=csArray.prototype.flat.call(csArray.from((null===(n=t.sheet)||void 0===n?void 0:n.cssRules)||[]));csArray.prototype.forEach.call(r,(function(t){var n=po[t.type]||"Unknown",r="process".concat(n);i[r].apply(i,[t])}))}catch(t){}},t.prototype.processStyle=function(t){var n=mo(t.style.backgroundImage);n&&this.sendAsset("img",n)},t.prototype.processImport=function(t){var n=mo(t.href);n&&this.sendAsset("link",n)},t.prototype.processFont=function(t){var n=mo(t.style.src);n&&this.sendAsset("font",n)},t.prototype.sendAsset=function(t,n){var i=-1!==csString.prototype.indexOf.call(n,"://"),r=new csURL(i?n:"invalid:".concat(n)).pathname,s={type:t,fileName:csArray.prototype.pop.call(csString.prototype.split.call(r,"/"))||"",assetPath:"/"===r[0]?r:"/".concat(r),app_framework:"framework",app_version:"version",app_bundle_id:"bundle_id"};console.log("got asset toSend",s)},t}(),Ao=["trackWebView"],Eo=function(){function t(t){this.wo=t}return t.prototype.init=function(){var t=this;this.wo.register(Ao,(function(n){var i="track".concat(n),r=t[i];"function"==typeof r&&r.apply(t,[])}))},t.prototype.trackSnapshot=function(){var t=new go,n=new Fr([t]).serialize(document.getRootNode());console.log("serialisation done",n)},t}(),So=function(){function t(t,n,i){this.J=t,this.ut=n,this.W=i}return t.prototype.init=function(){var t,n,i,r=this,s="boot";(null===(t=window.performance)||void 0===t?void 0:t.mark)&&window.performance.mark("cs-start-".concat(s));var e=new Ju,u=new kt,h=new co(u),o=new Ch(window.location,h),c=new Qt(this.J,o,this.ut);c.init();var f=new to,a=new no,v=new uh(window.location,c),l=new kh(this.J,c);l.init();var d,w=$h.create(J.warn);if(this.J.useMalkaPipeline){var y=new qn(this.J.getQuotaServiceUri(),"quota");(d=new ju(this.J,w,y,e,v,o)).init()}else d=new qu(this.J,w,v,o);var p=new An(this.J,c,l,f),m=new Fu(p,d),g=new ln(this.J,c,l,f),A=new Du(this.J,g,m);this.W.setContext(A,m),d.setVisitorService(A);var E=new Vu(A,m),S=new Tn(this.J,c,l,f),b=new Qu(window.location,S),N=new th(b),T=new Hu(this.J,A,b),R=new Ri,k=new fo(it,this.J),O=new ao(k),I=new vo(k),x=new lo(k),L=new wo(R),_=new Fh(O,I,x,L),C=new yh,M=new dh(C,_),P=new ih(o),D=new sh(P,C),U=new kn(this.J,c,l,f),q=new eo(u,U),j=new ho(C,q),F=new fn(A,m,b,q,this.J),H=new xn,V=new In(H,window.location),z=new lh(this.J,F,V),G=new Oh(this.J,H);l.setStates(F,G),new Mu(this.J,A,b,T,E,z,l,v).compute((function(t){var n;M.init();var i=new Mh,f=new Bu(r.J,c,a),v=new $u(r.J,f,e),l=new Xu(C,v),d=new oh(r.J,c,a),y=new ch(e,window.location,d),p=new ah(C,y),g=new Lh(C,r.J),E=new Ih(r.J,A,m),S=new xh,b=new ur,T=new oo(r.J),R=new Uh(b,T,r.J),O=new qh(b,T,r.J),I=new Ph(R,O),x=new Zh(h),L=new Qh(u,o),U=new Th(S,L,I,x,u,r.J,E,_,C,i,o);(U.init(),(null===(n=window.performance)||void 0===n?void 0:n.mark)&&window.performance.mark("cs-step2-".concat(s)),e.addListeners(U),new Eo(C).init(),t)?(e.emitInitTracking(),new Cu(E,w,A,m,e,C,M,r.J,p,y,l,v,u,k,h,o,g,i,S,L,I,x,_,q,j,P,D).start()):new Zu(e,C,M,p,y,N,l).start()})),(null===(n=window.performance)||void 0===n?void 0:n.mark)&&(null===(i=window.performance)||void 0===i?void 0:i.measure)&&(window.performance.mark("cs-end-".concat(s)),window.performance.measure("cs-measure-".concat(s),"cs-start-".concat(s),"cs-end-".concat(s)))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var h=t.source,o=t.data;if(e(o)){var a=function(){var n,i,r,e=s("{domain}/tag/tag.bundle.js?v={version}",o);n=e,i=function(){return h.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=o.token,f(r.loadBundle),u(t.origin)?a():function(t,n){var r=s(i,t),e=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(f(u),e.remove(),n())};c(u),document.head.appendChild(e)}(o,a)}}};function s(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&o(t.version)&&h(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function h(t){return/^[a-zA-Z0-9]+$/.test(t)}function o(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function f(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=h,t.isAuthorizedTagVersion=o,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=f}(Kh||(Kh={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(n=t.origin,o(s.ping),h(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(o(s.insertMessageScript),u(n))}))};function e(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function h(t){window.addEventListener("message",t,!1)}function o(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Kh.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){h(s.ping),Kh.waitForBundleInjection()},t.listen=h,t.removeListener=o,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(Yh||(Yh={}));var bo,No,To=window.CSFrameCommunication||Yh,Ro=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n}(zu),ko=function(){function t(t){this.Om=t}return t.prototype.init=function(){this.Om.register(ys),this.Om.register(uo),this.Om.register(qe),this.Om.register(je),this.Om.register(Ue),this.Om.register(bs),this.Om.register(Ns),this.Om.register(Ts),this.Om.register(Rs),this.Om.register(We),this.Om.register(Be),this.Om.register(fh),this.Om.register(lu),this.Om.register(du),this.Om.register(Ku),this.Om.register(Yu),this.Om.register(Nh),this.Om.register(bh)},t.prototype.onStartTracking=function(){this.Om.start()},t.prototype.onOptout=function(){this.Om.stop()},t}(),Oo=function(t){function n(n,i){var r=t.call(this)||this;return r.wo=n,r.Im=i,r.Bo=[],r}return ut(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.Bo=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.wo.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,s=0,e=t;s<e.length;s++){i(e[s])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.Bo,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.Bo.length){var t={commands:this.Bo};this.Im.sendToParent(Jt.Commands,t),this.Bo=[]}},ot([G("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),ot([pr(),G("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(yi),Io=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.J=n,e.ii=i,e.xm=r,e.Lm=s,e._m=null,e.Cm=25,e.Mm=[],e.Pm={boundElement:window,type:"message",listener:function(t){return e.jl(t)}},e}return ut(n,t),n.prototype.onStart=function(){Hn(this.Pm,!1),this.Dm()},n.prototype.onStop=function(){Vn(this.Pm,!1),this._m&&(Gt.closeChannelPort(this._m),this._m=null)},n.prototype.sendToParent=function(t,n){var i=this.Um(t,n);this.Wy(i)},n.prototype.Dm=function(){var t=this.Um(Jt.Discovery);Gt.sendPostMessage(window.parent,"*",t)},n.prototype.Um=function(t,n){var i=Gt.buildBaseMessage(t,zt.Child,this.J.projectId);return n&&(i.content=n),i},n.prototype.Wy=function(t){null!==this._m?Gt.sendChannelMessage(this._m,t):this.qm(t)},n.prototype.jm=function(t,n){var i=this,r=new MessageChannel;this._m=r.port1,this._m.onmessage=function(t){i.rd(t)};var s=this.Um(Jt.Discovery);s.id=n,Gt.sendPostMessage(window.parent,t,s,[r.port2]),this.Fm()},n.prototype.rd=function(t){switch(t.data.type){case Jt.IntegrationCallback:var n=t.data.content;n.initiator===Vt.AfterPageView?this.Lm.emitAfterPageViewCallback(n):n.initiator===Vt.GetSessionKey?this.Lm.emitIntegrationSessionKeyCallback(n):J.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case Jt.Stop:this.ii.emitOptout();break;case Jt.RecordingStatus:var i=t.data.content;this.xm.setRecordingStatus(i),this.Lm.emitParentRecordingStatusChange(i);break;default:J.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.jl=function(t){if(null===this._m&&Gt.isMessageValid(t,zt.Parent,this.J.projectId,this.J.hostnames))switch(t.data.type){case Jt.Stop:this.ii.emitOptout();break;case Jt.Discovery:if(!U(t.data.id)||t.data.id<0)return void J.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.jm(t.origin,t.data.id);break;default:J.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.qm=function(t){this.Mm.length<this.Cm&&csArray.prototype.push.call(this.Mm,t)},n.prototype.Fm=function(){if(null!==this._m){for(var t=0,n=this.Mm;t<n.length;t++){var i=n[t];Gt.sendChannelMessage(this._m,i)}this.Hm(),this.Mm=[]}},n.prototype.Hm=function(){var t=Gt.buildBaseMessage(Jt.EndOfBufferedMessages,zt.Child,this.J.projectId);Gt.sendChannelMessage(this._m,t)},n}(yi),xo=function(t){function n(n,i){var r=t.call(this)||this;return r.Mi=n,r.Im=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this.Mi.subscribe(n.nr,(function(n){return t.tr(n)}))},n.prototype.onStop=function(){this.Mi.unsubscribe(n.nr)},n.prototype.tr=function(t){this.isStarted&&this.Im.sendToParent(Jt.ApiError,t)},n.nr="ChildApiErrorsService",n}(yi),Lo=function(t){function n(n,i){var r=t.call(this)||this;return r.Mi=n,r.Im=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this.Mi.subscribe(n.nr,(function(n){return t.tr(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.Mi.unsubscribe(n.nr)},n.prototype.tr=function(t){this.isStarted&&this.Im.sendToParent(Jt.DetailedApiError,t)},n.nr="ChildDetailedApiErrorsService",n}(yi),_o=function(t){function n(n,i){var r=t.call(this)||this;return r._i=n,r.Im=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this._i.subscribe(n.nr,(function(n){return t.tr(n)}))},n.prototype.onStop=function(){this._i.unsubscribe(n.nr)},n.prototype.tr=function(t){this.isStarted&&this.Im.sendToParent(Jt.JavascriptError,t)},n.nr="ChildJavaScriptErrorsService",n}(yi),Co=function(){function t(t,n,i,r){this._i=t,this.Mi=n,this.J=i,this.Im=r}return t.prototype.init=function(){this.Vm=new _o(this._i,this.Im),this.Mi.excludeDomains([wh.CONTENTSQUARE,wh.CLICKTALE,wh.FAKE_TRACKER]),this.zm=new xo(this.Mi,this.Im),this.Jm=new Lo(this.Mi,this.Im),this.Mi.init()},t.prototype.onStartTracking=function(){this.J.jsErrorsEnabled&&this.Vm.start(),this.J.apiErrors.enabled&&this.zm.start()},t.prototype.onParentRecordingStatusChange=function(t){this.J.apiErrors.enabled&&(t.isRecording?this.Jm.start():this.Jm.stop())},t.prototype.onOptout=function(){this.Vm.stop(),this.zm.stop(),this.Jm.stop()},t}(),Mo=function(){function t(t){this.Im=t}return t.prototype.onStartTracking=function(){this.Im.start()},t.prototype.onOptout=function(){this.Im.stop()},t}(),Po=function(){function t(t,n,i,r){this.Vo=t,this.zo=n,this.Im=i,this.xm=r}return t.prototype.init=function(){var t=this;this.Vo.onChildMessage((function(n,i,r){return t.zo.emitIframeEvent(n,i,r)})),this.Vo.setRecordingStatusCallback((function(){return t.xm.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Vo.start()},t.prototype.onOptout=function(){this.Vo.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.Im.sendToParent(Jt.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.Im.sendToParent(Jt.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.Im.sendToParent(Jt.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.Im.sendToParent(Jt.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.Im.sendToParent(Jt.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.Im.sendToParent(Jt.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.Im.sendToParent(Jt.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.Im.sendToParent(Jt.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.Im.sendToParent(Jt.IntegrationCallback,t)},t.prototype.onAfterPageViewCallback=function(t){this.Vo.sendToChildren(Jt.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Vo.sendToChildren(Jt.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Vo.sendToChildren(Jt.RecordingStatus,t)},t}(),Do=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.zc=n,u.th=i,u.Im=r,u.tf=s,u.if=e,u}return ut(n,t),n.prototype.init=function(){var t,n,i=this;this.zc.onEvent((function(t){return i.tr(t)})),this.th.onEvent((function(t){return i.tr(t)})),null===(t=this.tf)||void 0===t||t.onEvent((function(t){return i.tr(t)})),null===(n=this.if)||void 0===n||n.onEvent((function(t){return i.tr(t)}))},n.prototype.onStart=function(){var t,n;this.zc.start(),this.th.start(),null===(t=this.tf)||void 0===t||t.start(),null===(n=this.if)||void 0===n||n.start()},n.prototype.onStop=function(){var t,n;this.zc.stop(),this.th.stop(),null===(t=this.tf)||void 0===t||t.stop(),null===(n=this.if)||void 0===n||n.stop()},n.prototype.tr=function(t){this.isStarted&&t.type!==Jr.RESIZE&&this.Im.sendToParent(Jt.AnalysisEvent,t)},n}(yi),Uo=function(){function t(t,n,i,r){this.J=t,this.Xc=n,this.An=i,this.Im=r}return t.prototype.init=function(){var t,n;this.J.accessibilityEnabled&&(t=new Te,n=new Re);var i=new Ws(this.J,this.Xc,this.An),r=new Ps(this.J,this.Xc,new Iu(J));this.Gm=new Do(i,r,this.Im,t,n),this.Gm.init()},t.prototype.onStartTracking=function(){this.Gm.start()},t.prototype.onOptout=function(){this.Gm.stop()},t}(),qo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n}($e),jo=function(){function t(t,n,i){this.et=t,this.Wm=n,this.Im=i,this.cv=[]}return t.prototype.collect=function(){var t=this.Wm.collectProductsAndAnchors().products;this.cv=t,this.Bm=this.et.getAnonymizedUrl(),this.Km()},t.prototype.clearProducts=function(){this.cv=[]},t.prototype.Km=function(){var t={targetUrl:this.Bm,windowWidth:oi.windowWidth(),windowHeight:oi.windowHeight(),products:this.cv};this.Im.sendToParent(Jt.EmerchandisingMessage,t)},t}(),Fo=function(){function t(t,n,i,r){this.J=t,this.Xc=n,this.et=i,this.Im=r}return t.prototype.init=function(){var t=new qo(this.J,this.Xc);this.Ym=new jo(this.et,t,this.Im)},t.prototype.onStartTracking=function(){this.Ym.clearProducts(),this.Ym.collect()},t.prototype.onAfterPageViewCallback=function(){this.Ym.clearProducts(),this.Ym.collect()},t}(),Ho=function(t){function n(n,i,r,s,e,u,h,o,c,f,a,v){var l=t.call(this)||this;return l.J=n,l.Ti=i,l.Ri=r,l.ki=s,l.Oi=e,l.Ii=u,l.ni=h,l.Li=o,l.Pi=c,l.bn=f,l.qi=a,l.Im=v,l.zi=new wi,l.Ji=!1,l.bi=[],l.Xm=!1,l.Wi=function(t){return l.rf(t)},l.Bi=function(t){return l.Ki(t)},l}return ut(n,t),n.prototype.init=function(){this.Xi()},n.prototype.Xi=function(){this.Ti.onEvent(this.Wi),this.Ri.onEvent(this.Wi),this.Oi.onEvent(this.Wi),this.ki.onEvent(this.Bi),this.ni.onEvent(this.Wi),this.Li.onEvent(this.Wi),this.Pi.onEvent(this.Wi),this.Ii.onEvent(this.Bi),this.bn.onTextNodeToEncrypt(this.Wi),this.qi.onEvent(this.Wi)},n.prototype.blockSendingEventsFromSerialization=function(){this.Ji=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ji=!0},n.prototype.rf=function(t){this.$m(t),this.Zm()},n.prototype.Ki=function(t){this.Qm(t),this.Zm()},n.prototype.Qm=function(t){csArray.prototype.push.call(this.bi,t),this.Xm=!0},n.prototype.$m=function(t){csArray.prototype.push.call(this.bi,t)},n.prototype.Zm=function(){if(this.Ji){var t={containsUserEvent:this.Xm,events:this.bi};this.Im.sendToParent(Jt.RecordingEvent,t),this.bi=[],this.Xm=!1}},n.prototype.onStart=function(){this.qi.start(),this.Li.start(),this.Ri.start(),this.Ti.start(),this.Pi.start(),this.Oi.start(),this.Ii.start(),this.J.emitDebugEvents&&this.zi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Ti.stop(),this.Ri.stop(),this.Oi.stop(),this.ki.stop(),this.Pi.stop(),this.Ii.stop(),this.qi.stop()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.bi.length;n+=1){if(this.bi[n].date>t.date)return csArray.prototype.splice.call(this.bi,n,0,t),this.Xm=!0,void this.Zm()}this.Qm(t),this.Zm()},n}(yi),Vo=function(){function t(t,n,i,r,s,e,u,h,o,c,f){this.J=t,this.vn=n,this.An=i,this.G=r,this.En=s,this.Sn=e,this.th=u,this.ii=h,this.Im=o,this.xm=c,this.wo=f}return t.prototype.init=function(){var t=this,n=new ur,i=new Oi(this.Sn);this.Ao=new Pi(this.G,this.J),this.Ao.init();var r=new Zi,s=new ir(n,this.En),e=new Ir(window.crypto),u=new Lr(window.crypto);u.init(),e.init();var h=new Rr,o=new Rr,c=new Rr,f=new Rr,a=new Rr,v=new Nr(this.En,this.J,u,e,h,o,c,a,f,this.vn);v.init();var l=new Tr(v),d=[i,this.Ao,l,r],w=new Sr(this.Sn,1e3);this.J.textVisibilityEnabled&&csArray.prototype.push.call(d,w);var y,p=new Yr;if(p.isSupported()&&csArray.prototype.push.call(d,p.getProcessor()),this.Eo()){var m=new Vr(this.En);y=new Br(d,this.En,m)}else y=new Kr(d);this.Qn=new Ni(y,this.En,this.Ao,v),this.ki=new ri(this.An,this.En,this.Sn,v),this.ki.init(),this.Ri=new ai(this.Qn,s,r,this.ii,this.En,this.Sn),this.tg=new Ho(this.J,new Ti(n,this.En,this.Sn,r),this.Ri,this.ki,new zi(window.location,this.G),new _r(this.th,this.En,this.Sn),r,new Qi(window),w,v,p,this.Im),this.wo.register(ss,(function(){return t.xm.getRecordingStatus().isRecording})),this.wo.register(is,(function(n){t.Ao.setWhitelistedElementsSelector(n)})),this.wo.register(rs,(function(n){t.Sn.setPIISelectors(n)})),s.init(),this.tg.init()},t.prototype.onParentRecordingStatusChange=function(t){t.PIISelectors&&this.Sn.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.Ao.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.Qn.setAnonymization(t.useAnonymization),t.isRecording?this.tg.start():this.tg.stop(),t.isMutationTrackerStarted?this.Ri.start():this.Ri.stop()},t.prototype.onInitialDomStart=function(){this.tg.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.ki.start(),this.tg.allowSendingEventsFromSerialization(),this.tg.addInitialDom(t)},t.prototype.Eo=function(){return ts.isAsyncSerializationSupported()&&this.J.asyncSerializerEnabled},t}(),zo=function(){function t(t){this.Im=t,this.Po={}}return t.prototype.handleCommand=function(t){V(t)&&this.Do(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.Po[t.callbackId];i&&this.Uo(i,n)}else for(var r in this.Po)this.Uo(this.Po[r],n)},t.prototype.Do=function(t){var n=_.integer(),i={callbackId:n,initiator:Vt.AfterPageView};this.Po[n]=t,this.Im.sendToParent(Jt.IntegrationCallback,i)},t.prototype.Uo=function(t,n){setTimeout((function(){t(n)}))},t}(),Jo=function(){function t(t){this.Im=t,this.qo={}}return t.prototype.handleCommand=function(t){j(t)&&V(t.callback)&&this.Fo(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.qo[i];r&&(delete this.qo[i],this.Uo(r,n.sessionKey))}},t.prototype.Fo=function(t){var n=_.integer(),i={callbackId:n,initiator:Vt.GetSessionKey};this.qo[n]=t,this.Im.sendToParent(Jt.IntegrationCallback,i)},t.prototype.Uo=function(t,n){setTimeout((function(){t(n)}))},t}(),Go=function(){function t(t,n){this.wo=t,this.Im=n}return t.prototype.init=function(){var t=this;this.ng=new zo(this.Im),this.ig=new Jo(this.Im),this.wo.register(fs,(function(n){t.ng.handleCommand(n)})),this.wo.register(as,(function(n){return t.ig.handleCommand(n)}))},t.prototype.onAfterPageViewCallback=function(t){this.ng.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.ig.executePendingCallbacks(t)},t}(),Wo=function(){function t(t,n,i,r,s,e){var u=this;this.rg=t,this.ii=n,this.J=i,this.Im=r,this.xm=s,this.wo=e,this.Xd=function(){u.wo.start(),u.Zd.start()}}return t.prototype.start=function(){var t=this,n=new fo(it,this.J),i=new Je(n),r=new kt,s=$h.create(J.warn),e=new Uo(this.J,n,i,this.Im),u=new Mo(this.Im);if(this.J.eMerchandisingEnabled){var h=new kt,o=new co(h),c=new Ch(window.location,o),f=new Fo(this.J,n,c,this.Im);this.rg.addListeners(f),this.ii.addListeners(f),f.init()}var a=new Go(this.wo,this.Im);this.rg.addListeners(a),a.init();var v=new Ri,l=new Su(this.J);if(ts.isRecordingSupported()&&s.isSupported()){var d=new Iu(J),w=new Vo(this.J,s,i,r,v,l,d,this.ii,this.Im,this.xm,this.wo);this.ii.addListeners(w),this.rg.addListeners(w),w.init()}var y=new Tu(this.J,l),p=new ao(n),m=new vo(n),g=new lo(n),A=new wo(v),E=new Fh(p,m,g,A),S=new Po(y,E,this.Im,this.xm);E.addListeners(S),this.rg.addListeners(S),this.ii.addListeners(u,S,e),S.init(),e.init(),this.Zd=new Ge,this.Zd.onLoad((function(){t.ii.emitStartTracking()})),this.Xd()},t}(),Bo=function(){function t(){this.sg=null}return t.prototype.getRecordingStatus=function(){return null===this.sg?{isRecording:!1}:this.sg},t.prototype.setRecordingStatus=function(t){this.sg=t},t}(),Ko=function(){function t(t){this.J=t}return t.prototype.init=function(){var t=new Ju,n=new Ro,i=new Bo,r=new Io(this.J,t,i,n),s=new yh,e=new Oo(s,r),u=new ko(e);u.init();var h=new xh,o=new oo(this.J),c=new ur,f=new Uh(c,o,this.J),a=new qh(c,o,this.J),v=new Ph(f,a),l=new Co(h,v,this.J,r);l.init(),n.addListeners(l),t.addListeners(u,l),t.emitInitTracking(),new Wo(n,t,this.J,r,i,s).start()},t}(),Yo=function(){function t(t,n,i){this.J=t,this.St=n,this.W=i}return t.prototype.start=function(){var t,n;if(!window.UXAnalytics){var i=new nn(this.St,this.J);i.init();var r=new cn(this.J,i);if(this.St.isTopWindowTracker()&&r.canTrack()){if((null===(t=window.CSProtectnativeFunctionsLogs)||void 0===t?void 0:t.Warning)&&J.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(n=window.CSProtectnativeFunctionsLogs)||void 0===n?void 0:n.Critical)return void J.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new So(this.J,i,this.W).init()}else if(!this.St.isTopWindowTracker()&&r.canTrackInChild()){new Ko(this.J).init()}window.UXAnalytics={},!window.CSFrameCommunication&&To.isActivable()&&(window.CSFrameCommunication=To,To.waitForConnection())}},ot([Zn("main.start"),G("main.start")],t.prototype,"start",null),t}();try{(null===(bo=window.performance)||void 0===bo?void 0:bo.mark)&&window.performance.mark("cs-start-tag");var Xo=new lt(window.CS_CONF);window._uxa=window._uxa||[],Xo.processOptionOverrides(window._uxa);var $o=new dt(window,Xo);$o.init();var Zo=new Zt;if(J.computeIsActive(Xo.validationRate),$o.isTopWindowTracker()){var Qo=new Ut(Xo,Zo);J.setStrategy(Qo)}else{var tc=new $t(Xo);J.setStrategy(tc)}void 0===No&&(No=50),Gn=J.isLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Gn&&(Jn=No),new Yo(Xo,$o,Zo).start()}catch(t){}}();