/*! For license information please see tracking-tag-dev.min.js.LICENSE.txt */
!function(){"use strict";var t={d:function(i,n){for(var r in n)t.o(n,r)&&!t.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:n[r]})},o:function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{get:function(){return bt},getRequestParameters:function(){return Nt}});var n={};t.r(n),t.d(n,{getRequestParameters:function(){return xe}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",fetch:"csFetch"}};function e(t,i,n){var r=function(t,i){for(var n,r=t;r&&!(n=Object.getOwnPropertyDescriptor(r,i));)r=Object.getPrototypeOf(r);return n}(t,i);if(!r)return function(){return this[i]};switch(n){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(i){window[s.constructors[i]]=t[i]instanceof Function&&null==t[i].prototype?t[i].bind(window):t[i]})),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),h("csNode",s.nodeProperties,t.Node.prototype,"get"),h("csElement",s.elementProperties,t.Element.prototype,"get"),h("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),h("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),h("csEvent",s.eventProperties,t.Event.prototype,"get"),h("csNavigator",s.navigatorProperties,t.navigator,"value")}function h(t,i,n,r,s){void 0===s&&(s=!0),i.forEach((function(i){var u="string"!=typeof i&&"binding"in i,h=u?i.propertyName:i;(s||h in n)&&(window["".concat(t+h)]=e(n,h,r),u&&(window["".concat(t+h)]=window["".concat(t+h)].bind(i.binding)))}))}function o(t,i){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=i}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank");var i=document.createElement("cs-native-frame-holder");if(i.setAttribute("hidden",""),document.body.appendChild(i),Element.prototype.attachShadow){var n=i.attachShadow({mode:"closed"});return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return o("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(Ds){o("Critical","failed to copy references from window: ".concat(Ds.message))}function c(t,i){var n=f(csString.prototype.toLowerCase.call(t.localName));return i?csString.prototype.replace.call(n,i,"$1".concat("-static")):n}function f(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function a(t){return t.nodeType===Node.ELEMENT_NODE}function v(t){return t.nodeType===Node.TEXT_NODE}function l(t){return a(t)&&"a"===t.localName}function d(t){return function(t){return a(t)&&"link"===t.localName}(t)&&"stylesheet"===t.rel}function w(t){return a(t)&&"img"===t.localName}function y(t){return a(t)&&"style"===t.localName}function p(t){return a(t)&&"input"===t.localName}function m(t){return a(t)&&"textarea"===t.localName}function g(t){return a(t)&&"script"===t.localName}function A(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}function E(t){return t.nodeType===Node.DOCUMENT_NODE}function S(t){return A(t)&&"host"in t&&"mode"in t}var b=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function T(t){for(var i=t,n=[i];null!==csNodeparentNode.apply(i);)i=csNodeparentNode.apply(i),csArray.prototype.push.call(n,i);return R(i)&&csArray.prototype.push.call(n,N),{ancestors:n,selectionRoot:i}}function R(t){return nt.isValidElement(t)}var k=Number.MAX_SAFE_INTEGER||9007199254740991;function O(){}function I(t,i){return 0===csString.prototype.lastIndexOf.call(t,i,0)}function L(t,i){return-1!==csString.prototype.indexOf.call(t,i,t.length-i.length)}var x=34164e6,_={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=k),Math.floor(Math.random()*t)}},C="function"==typeof Symbol?Symbol("json"):null;var M,P=C?function(t){if(t[C])return t[C];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var i="["+P(t[0]),n=1;n<t.length;n++)i+=","+P(t[n]);return i+"]"}return t[C]=csJSON.stringify(t)}:csJSON.stringify;function D(t){return F(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function U(t){return t===parseInt(t,10)}function j(t){return F(t)&&("string"==typeof t||t instanceof csString)}function q(t){return"object"==typeof t}function F(t){return void 0!==t}function H(t){return F(t)&&null!==t}function V(t){return"function"==typeof t}function z(t){return t instanceof Element}!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(M||(M={}));var J=function(){function t(){}return t.setStrategy=function(i){t.t=i},t.computeIsActive=function(i){t.i=_.boolean(i)},t.isLoggingActive=function(){return t.i},t.getStrategy=function(){return t.t},t.debug=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,M.debug)},t.warn=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,M.warn)},t.error=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,M.error)},t.critical=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,M.critical)},t.tryToExecute=function(t,i){var n=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=i.apply(void 0,r);return F(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(i){return n.error(i,t)})):e}catch(i){try{n.error(i,t)}catch(t){}}}},t.i=!1,t}(),W=function(t){return function(i,n,r){var s=(null==n?void 0:n.toString())||"",e=t||"".concat(i.constructor&&i.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return J.tryToExecute(e,u.bind(this)).apply(void 0,t)}}}},G=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector;function B(t,i){if(!(!!t&&j(t)))return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return G.call(i,t),!0}catch(i){return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}function K(t,i){return!!i&&csArray.prototype.some.call(i,(function(i){return G.call(t,i)}))}var Y=[/\d{4}/,/^ember\d+$/],X="data-cs-override-id",$="data-cs-dynamic-id";function Z(t,i,n,r){var s=r.dynamicIdRegex||null,e=c(t,r.dynamicElementNameRegex);if(function(t,i){var n=Q(t);return n&&csString.prototype.match.call(n,/^[\w-]+$/)&&tt(X,n,i)}(t,n)){var u=Q(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"[").concat(X,'="').concat(u,'"]')}}var h=function(t,i,n){if(!n.uniqueAttributes)return{success:!1};for(var r=0,s=n.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(tt(e,u,i))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,n,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var o=function(t,i,n){if(!n.uniqueCssSelectors)return;for(var r=0,s=n.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(G.call(t,e)&&it(e,i))return e}return}(t,n,r);if(o)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UCS[").concat(o,"]")};var a=function(t){var i=t.getAttribute("id");return i?f(i):i}(t);if(function(t,i,n,r){return i&&!function(t){return null!==Q(t)}(t)&&!function(t,i,n){return t.hasAttribute($)||function(t,i){var n=!1;t&&i&&(n=i.test(t));return t&&(csArray.prototype.some.call(Y,(function(i){return i.test(t)}))||n)}(i,n)}(t,i,r)&&function(t,i){return t&&tt("id",t,i)}(i,n)}(t,a,n,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#").concat(a)};var v=function(t,i){if(!i.reliableSelectors)return;for(var n=0,r=i.reliableSelectors;n<r.length;n++){var s=r[n];if(G.call(t,s))return s}return}(t,r);if(v){var l=function(t,i,n){if(t===N||9===t.nodeType)return 0;for(var r=0,s=i.previousElementSibling;s;)G.call(s,n)&&(r+=1),s=s.previousElementSibling;return r}(i,t,v);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,"[").concat(v,"](").concat(l,")")}}var d=function(t,i,n){if(t===N||9===t.nodeType)return 0;for(var r=n.dynamicElementNameRegex,s=c(i,r),e=0,u=i.previousElementSibling;u;)c(u,r)!==s||K(u,n.reliableSelectors)||(e+=1),u=u.previousElementSibling;return e}(i,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,":eq(").concat(d,")")}}function Q(t){return t.getAttribute(X)}function tt(t,i,n){try{return 1===n.querySelectorAll("[".concat(t,'="').concat(i,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function it(t,i){try{return 1===i.querySelectorAll(t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var nt;function rt(t,i,n){var r=csArray.prototype.shift.call(t);if(0===t.length)return st(r,n);var s=Z(r,t[0],i,n),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!n.fullPath&&u){var h=t[t.length-1];return"".concat(st(h,n)).concat(e)}var o=rt(t,i,n);return"".concat(o?"".concat(o,">"):"").concat(e)}function st(t,i){if(t===N)return"|detached|";if(t.host){var n=T(t.host),r=n.ancestors,s=n.selectionRoot;return"".concat(rt(r,s,i),"|shadow-root|")}return 11===t.nodeType?"|fragment|":""}!function(t){function i(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function n(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=i,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=n(r);if(e===document)return"";if(!i(e))return t.INVALID_ELEMENT;var u=T(e);return rt(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=n(r);if(e===document)return{path:"",firstAnchorParent:null};if(!i(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var i=t,n=[i],r=null;null!==csNodeparentNode.apply(i);)null===r&&l(i)&&(r=i),csArray.prototype.push.call(n,csNodeparentNode.apply(i)),i=csNodeparentNode.apply(i);return R(i)&&csArray.prototype.push.call(n,N),{firstAnchorParent:r,ancestors:n,selectionRoot:i}}(e),h=u.firstAnchorParent;return{path:rt(u.ancestors,u.selectionRoot,s),firstAnchorParent:h}}}(nt||(nt={})),window.CSPathComputation=window.CSPathComputation||nt;var et=function(t,i){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},et(t,i)};function ut(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}et(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var ht=function(){return ht=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t},ht.apply(this,arguments)};function ot(t,i,n,r){var s,e=arguments.length,u=e<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,i,n,r);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(u=(e<3?s(u):e>3?s(i,n,u):s(i,n))||u);return e>3&&u&&Object.defineProperty(i,n,u),u}function ct(t,i,n,r){return new(n||(n=Promise))((function(s,e){function u(t){try{o(r.next(t))}catch(t){e(t)}}function h(t){try{o(r.throw(t))}catch(t){e(t)}}function o(t){var i;t.done?s(t.value):(i=t.value,i instanceof n?i:new n((function(t){t(i)}))).then(u,h)}o((r=r.apply(t,i||[])).next())}))}function ft(t,i){var n,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(e){return function(h){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=i.call(t,u)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,h])}}}Object.create;function at(t,i,n){if(n||2===arguments.length)for(var r,s=0,e=i.length;s<e;s++)!r&&s in i||(r||(r=Array.prototype.slice.call(i,0,s)),r[s]=i[s]);return t.concat(r||Array.prototype.slice.call(i))}Object.create;var vt,lt=function(){function t(t){var i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||x,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=ht({enabled:null!==(i=t.apiErrorsEnabled)&&void 0!==i?i:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.h(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.h(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.h(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled}return t.prototype.getTrackerUri=function(){return"".concat(this.g(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.g(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.g(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.g(),"://").concat(this.loggerDomain)},t.prototype.g=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var i=this;t&&t.forEach&&t.forEach((function(t){var n=t[0],r=t.slice(1);if("setOption"===n){var s=r[0],e=r[1];i.A(s,e)}}))},t.prototype.A=function(t,i){"trackerDomain"===t&&(this.trackerDomain=i),"recordingDomain"===t&&(this.recordingDomain=i),"loggerDomain"===t&&(this.loggerDomain=i),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=i),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=i),"minLogLevel"===t&&(this.minLogLevel=i),"useHttps"===t&&(this.useHttps=!!i)},t.prototype.h=function(t){return t?this.S(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,i){"emitDebugEvents"===t&&(this.emitDebugEvents=i),"minLogLevel"===t&&(this.minLogLevel=i)},t.prototype.S=function(t){try{var i=/^\/(.*)\/([gim]*)$/.exec(t);if(i){var n=i[1],r=i[2];return new RegExp("^".concat(n,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),dt=function(){function t(t,i){this.N=t,this.T=i}return t.prototype.init=function(){this.R=this.N.self!==this.N.top,this.T.iframesTracking&&this.R?this.O=!1:this.O=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.O},t}();!function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(i){return"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(t[i]))})),"&")}}(vt||(vt={}));var wt=function(){function t(t,i){this.domainUri=t,this.path=i,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,i){return ht(ht({},t),i)})):{}},t}(),yt=function(t){function i(i,n){return t.call(this,i,n)||this}return ut(i,t),i.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.I(t);var i=vt.toQuery(t);this.L(i),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},i.prototype.L=function(t){var i=new window.Image(1,1);i.onload=O,i.onerror=O,csHTMLImageElementsrc.call(i,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},i.prototype.I=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},i}(wt),pt=function(){function t(t,i){this._=t,this.C=i}return t.prototype.init=function(){this.M=new yt(this._.getLoggerUri()),this.M.setRequestParametersProviders(this,this.C)},t.prototype.send=function(t){this.P=t,this.M.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),mt=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,gt=/[a-zA-Z0-9+_-](?:@|%40)/,At="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Et=new RegExp("(ey".concat(At,"\\.ey").concat(At,"\\.").concat(At,")"),"g"),St=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&gt.test(t)?csString.prototype.replace.call(t,mt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,Et,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,i){var n=this;return csArray.prototype.forEach.call(i,(function(i){t[i]=n.anonymizeEmail(t[i])})),t},t}();function bt(){return"dev"}function Nt(){return{v:"dev"}}var Tt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Rt(){return Math.floor(Tt()/1e3)}var kt,Ot,It=function(){function t(t,i){this.D=t,this.U=i}return t.prototype.getRequestParameters=function(){return ht(ht({d:"".concat(Tt()),p:this.U.anonymizeEmail(window.location.href),u:navigator.userAgent},this.D.getRequestParameters()),{v:"dev"})},t}(),Lt="snippet-",xt="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(kt||(kt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ot||(Ot={}));var _t=function(){function t(t,i,n){var r;this.j=i,this.U=new St,this.q=Ot[M.warn],this.q=Ot[t.minLogLevel||M.warn],this.M=n||new pt(t,new It(t,this.U)),this.F=((r={})[M.debug]=[],r[M.warn]=[],r[M.error]=[],r[M.critical]=[],r),this.H={implementation:{},dynamic:{}},this.M.init()}return t.prototype.send=function(t,i,n){if(void 0===i&&(i=""),void 0===n&&(n=M.warn),this.V(n,i)){csArray.prototype.push.call(this.F[n],i||"");var r={message:this.J(t,i),stacktrace:this.W(t),app:"uxa",level:n};this.M.send(r)}},t.prototype.J=function(t,i){var n=t instanceof Error?this.U.anonymizeEmail(t.message||t.toString()):t;return i&&(n+=" ErrorCode: ".concat(i)),n},t.prototype.W=function(t){return t instanceof Error?"".concat(t.stack||"No stacktrace"," ").concat(this.G()):this.G()},t.prototype.G=function(){var t=this.j.getVisitorService(),i=null==t?void 0:t.getVisitor();if(!i)return"No context";var n=this.j.getSessionService(),r=n&&n.getSession(),s={userId:i.id,sessionNumber:i.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.V=function(t,i){if(Ot[t]<this.q)return!1;if(0===(null==i?void 0:csString.prototype.indexOf.call(i,xt,0)))return this.B(i,kt.IMPLEMENTATION);if(0===(null==i?void 0:csString.prototype.indexOf.call(i,Lt,0)))return this.B(i,kt.DYNAMIC);var n=this.F[t];return!(n.length>=5)&&(!i||!csArray.prototype.some.call(n,(function(t){return t===i})))},t.prototype.B=function(t,i){return t in this.H[i]?!(this.H[i][t]>=5)&&(this.H[i][t]+=1,!0):(this.H[i][t]=1,!0)},t}(),Ct=document.createElement("a");function Mt(t){return Ct.href=t,Ct.href}function Pt(t){if(!I(t,"http://")&&!I(t,"https://"))return"";var i=document.createElement("a");return i.href=t,decodeURIComponent(i.hostname)}function Dt(t,i){return csArray.prototype.some.call(i,(function(i){return L(t,".".concat(i))||t===i||""===i}))}var Ut,jt,qt,Ft,Ht="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Ut||(Ut={})),function(t){t.Parent="parent",t.Child="child"}(jt||(jt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback"}(qt||(qt={})),function(t){t.buildBaseMessage=function(t,i,n,r){var s={type:t,from:i,pid:n,signature:Ht};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,i,n,r){var s=Pt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===Ht&&t.data.from===i&&t.data.pid===n&&Dt(s,r)},t.sendPostMessage=function(t,i,n,r){r?t.postMessage(n,i,r):t.postMessage(n,i)},t.sendChannelMessage=function(t,i){t.postMessage(i)},t.closeChannelPort=function(t){t.close()}}(Ft||(Ft={}));var Vt,zt,Jt,Wt,Gt=function(){function t(t){this.D=t}return t.prototype.send=function(t,i,n){void 0===i&&(i=""),void 0===n&&(n=M.warn);var r={message:t,errorCode:i,level:n},s=Ft.buildBaseMessage(qt.ChildLogMessage,jt.Child,this.D.projectId);s.content=r,Ft.sendPostMessage(window.parent,"*",s)},t}(),Bt=function(){function t(){}return t.prototype.setContext=function(t,i){this.K=t,this.Y=i},t.prototype.getVisitorService=function(){return this.K},t.prototype.getSessionService=function(){return this.Y},t}();!function(t){function i(t){var i=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return i?decodeURIComponent(i[2]):null}function n(i,n,s,e,u,h){var o=encodeURIComponent("".concat(n)),c=s===t.CURRENT_DOMAIN?void 0:s,f=r(e),a=f?";expires=".concat(f.toUTCString()):"",v=H(c)?";domain=".concat(c):"",l="".concat(i,"=").concat(o).concat(a).concat(";path=/").concat(v);return F(u)&&u!==Jt.NotSet&&(l="".concat(l,";SameSite=").concat(u)),F(h)&&h===Wt.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return D(t)?new csDate(Tt()+t):t}function s(t,r){i(t)&&n(t,"",r,new csDate(0)),i(t)&&n(t,"",r,new csDate(0),Jt.None,Wt.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=i,t.set=n,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=i(e);if(null!==u&&"1"!==u)return u;for(var h=csString.prototype.split.call(window.location.hostname,"."),o=csArray.prototype.pop.call(h);h.length&&(null===u||"1"===u);)n(e,o=csArray.prototype.join.call([csArray.prototype.pop.call(h),o],"."),o,void 0,t,r),u=i(e);return s(e,o),o}}(Vt||(Vt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(zt||(zt={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Jt||(Jt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Wt||(Wt={}));var Kt=function(){function t(t,i,n){this.D=t,this.X=i,this.$=n,this.Z=!1,this.tt=Jt.NotSet,this.it=Wt.No}return t.prototype.getSameSiteFlag=function(){return this.tt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.nt},t.prototype.getRootDomain=function(){return this.st},t.prototype.init=function(){if(!this.D.cookielessTrackingEnabled){var t=this.et(),i=this.ut();this.Z=this.ht(t,i),this.Z?(this.tt=t,this.it=i):this.D.secureCookiesEnabled&&"https:"===this.X.getUrlProtocol()&&(this.it=Wt.Yes),this.st=this.ot(),this.nt=this.ft(this.st)}},t.prototype.ht=function(i,n){return!zt.browserIsSafariV12()&&(Vt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,i,n),!!Vt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(Vt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.et=function(){return"http:"===this.X.getUrlProtocol()?Jt.Lax:this.$.isSameSiteNoneSecureNeeded()||this.D.crossDomainTracking?Jt.None:Jt.Lax},t.prototype.ut=function(){return"http:"===this.X.getUrlProtocol()?Wt.No:this.D.secureCookiesEnabled||this.D.crossDomainTracking||this.$.isSameSiteNoneSecureNeeded()?Wt.Yes:Wt.No},t.prototype.isSameSiteSupported=function(){return this.Z},t.prototype.set=function(t,i,n){var r=Vt.toExpireDate(n);Vt.set(t,i,this.nt,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var i=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return i?decodeURIComponent(i[2]):null},t.prototype.delete=function(t,i){var n=i||this.nt;Vt.remove(t,n)},t.prototype.ot=function(){var t=this.$.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),i=t?Jt.None:void 0,n=t?Wt.Yes:void 0;return Vt.getRootDomain(i,n)},t.prototype.ft=function(t){return this.D.allowSubdomains?t:Vt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),Yt="_cs_t",Xt=function(){function t(t,i){this.vt=t,this.D=i,this.lt=!1,this.wt=!1}return t.prototype.init=function(){if(!this.D.cookielessTrackingEnabled&&this.vt.isTopWindowTracker()&&"cookie"in document){if(!this.vt.isInIframeContext()&&Vt.isCookiePresent())return this.lt=!0,void(this.wt=!1);if(Vt.set(Yt,"1",Vt.CURRENT_DOMAIN),null!==Vt.get(Yt))return this.lt=!0,this.wt=!1,void Vt.remove(Yt,Vt.CURRENT_DOMAIN);Vt.set(Yt,"1",Vt.CURRENT_DOMAIN,void 0,Jt.None,Wt.Yes),null!==Vt.get(Yt)&&(this.lt=!0,this.wt=!0,Vt.remove(Yt,Vt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.lt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.wt},t}();function $t(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.getItem(t)!==t?!1:(localStorage.removeItem(t),!0)}catch(t){return!1}}var Zt=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.yt()},t.yt=function(){try{var t={},i=Object.assign(t,{a:1},{b:2,c:{d:4}}),n={a:1,b:2,c:{d:4}};return csJSON.stringify(i)===csJSON.stringify(n)&&csJSON.stringify(t)===csJSON.stringify(n)}catch(t){return!1}},t}();var Qt,ti,ii,ni,ri=function(){function t(t,i){this.D=t,this.$=i}return t.prototype.canTrack=function(){return this.gt()&&this.At()&&this.Et()},t.prototype.canTrackInChild=function(){return this.gt()&&this.At()},t.prototype.Et=function(){return this.D.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}()&&$t():this.$.areCookiesEnabled()&&$t()},t.prototype.At=function(){return this.D.isProjectActive()&&Dt(window.location.hostname,this.D.hostnames)},t.prototype.gt=function(){return!this.St()&&this.bt()&&Zt.check()},t.prototype.St=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.bt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),si=function(){function t(t,i,n,r,s){this.K=t,this.Y=i,this.Nt=n,this.Tt=r,this.D=s}return t.prototype.get=function(){return{exclusion:this.Nt.getAppliedTrackingDraw(),visitor:this.K.getVisitor(),session:this.Y.getSession(),cvars:this.Tt.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.Nt.exclude(this.D),this.K.removeVisitor(),this.Y.removeSession(),this.Tt.removeCustomVariablesSession()},t.prototype.include=function(t){this.Nt.removeExclusion(),this.K.setVisitor(t.visitor),t.session?this.Y.setSession(t.session):this.Y.removeSession(),t.cvars?this.Tt.setCustomVariableSession(t.cvars):this.Tt.removeCustomVariablesSession()},t}(),ei="_cs_id",ui=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,hi=function(){function t(t,i,n,r){this.D=t,this.Rt=i,this.kt=n,this.Ot=r}return t.prototype.get=function(){var i;return(i=this.D.cookielessTrackingEnabled?this.Ot.getItem(ei):this.Rt.get(ei))?t.fromString(i):null},t.prototype.set=function(i){var n=t.toString(i);if(this.D.cookielessTrackingEnabled)this.Ot.setItem(ei,n);else{var r=new csDate(i.expires);this.Rt.set(ei,n,r),this.kt.setCookie(ei,n,r)}},t.prototype.remove=function(){this.D.cookielessTrackingEnabled?this.Ot.removeItem(ei):(this.Rt.delete(ei),this.kt.removeCookie(ei))},t.prototype.handleSubdomainChange=function(){if(!this.D.cookielessTrackingEnabled){var t=this.get();t&&(this.D.allowSubdomains?this.Rt.delete(ei,Kt.CURRENT_DOMAIN):this.Rt.delete(ei,this.Rt.getRootDomain()),this.set(t))}},t.fromString=function(t){var i=csString.prototype.split.call(t,"."),n=i[0],r=i[1],s=i[2],e=i[3],u=i[4],h=i[5],o=i[6];return{id:n,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(h),expires:Number(o)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return ui.test(t)},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(Qt||(Qt={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(ti||(ti={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(ii||(ii={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(ni||(ni={}));var oi,ci="_cs_s",fi=18e5,ai=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,vi=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(oi||(oi={}));var li,di=function(){function t(t,i,n,r){this.D=t,this.Rt=i,this.kt=n,this.Ot=r,this.It=null,this.Lt=!1}return t.prototype.get=function(i){var n=this.getRawSession(i);return this.isValid(n)?t.fromString(n):null},t.prototype.getRawSession=function(i){if(i){var n=this.xt();return t._t(n)}var r=this.Ct(),s=r.sessionString,e=r.status,u=t._t(s);if(e!==oi.EXPIRED)return u;if(this.D.cookielessTrackingEnabled)return null;var h=this.xt();if(!h)return null;var o=csString.prototype.split.call(h,vi);if(!t.Mt(o))return h;var c=o[o.length-1],f=parseInt(c,10);return isNaN(f)||this.Pt(f),u},t.prototype.set=function(t,i){void 0===i&&(i=fi);var n=Tt()+i,r=this.toString(t);r+="".concat(vi).concat(n),this.Dt(r,n),this.D.cookielessTrackingEnabled?this.Ot.setItem(ci,r):(this.Rt.set(ci,r,i),this.kt.setCookie(ci,r,i))},t.prototype.remove=function(){this.D.cookielessTrackingEnabled?this.Ot.removeItem(ci):(this.Rt.delete(ci),this.kt.removeCookie(ci)),this.Ut()},t.prototype.handleSubdomainChange=function(){if(!this.D.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.D.allowSubdomains?this.Rt.delete(ci,Kt.CURRENT_DOMAIN):this.Rt.delete(ci,this.Rt.getRootDomain()),this.set(t))}},t.prototype.isValid=function(i){return null!==i&&t.isValidSessionString(i)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],vi)},t.prototype.Dt=function(t,i){this.It={sessionString:t,expires:i}},t.prototype.Ct=function(){return this.It?this.It&&Tt()<=this.It.expires?{sessionString:this.It.sessionString,status:oi.FOUND}:{sessionString:this.It.sessionString,status:oi.EXPIRED}:{sessionString:this.xt(),status:oi.NOT_FOUND}},t.prototype.Ut=function(){this.It=null},t.prototype.Pt=function(t){this.It&&(this.It.expires=t,this.Lt=!0)},t.prototype.isCacheRefreshed=function(){return this.Lt},t.prototype.resetCacheRefreshed=function(){this.Lt=!1},t.prototype.xt=function(){if(this.D.cookielessTrackingEnabled){var t=this.Ot.getItem(ci);return!t||this.jt(t)?null:t}return this.Rt.get(ci)},t.prototype.jt=function(t){var i=csString.prototype.split.call(t,vi),n=parseInt(i[i.length-1],10);return!isNaN(n)&&Tt()>n},t.Mt=function(t){return 13===t[t.length-1].length},t._t=function(t){var i;if(!t)return null;var n=null===(i=csString.prototype.match.call(t,ai))||void 0===i?void 0:i[1];return null!=n?n:null},t.fromRawString=function(i){var n=t._t(i);return null!==n?t.fromString(n):null},t.fromString=function(t){var i=csString.prototype.split.call(t,vi),n=i[0],r=i[1],s=i[2];return{recordingState:r,etrState:null!=s?s:ii.ETR_OFF,pageNumber:parseInt(n,10)}},t.isValidSessionString=function(t){return ai.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?hi.fromString(t._cs_id):null,session:t._cs_s?di.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(li||(li={}));var wi,yi="_cs_ex",pi=2592e6,mi=/^[0-9]+$/,gi=function(){function t(t,i,n,r){this.D=t,this.Rt=i,this.kt=n,this.Ot=r}return t.prototype.get=function(){return this.D.cookielessTrackingEnabled?Number(this.Ot.getItem(yi)):Number(this.Rt.get(yi))},t.prototype.set=function(t){this.D.cookielessTrackingEnabled?this.Ot.setItem(yi,t):(this.Rt.set(yi,t,pi),this.kt.setCookie(yi,t,pi))},t.prototype.remove=function(){this.D.cookielessTrackingEnabled?this.Ot.removeItem(yi):(this.Rt.delete(yi),this.kt.removeCookie(yi))},t.isValidExclusionString=function(t){return mi.test(t)},t}(),Ai="_cs_cvars",Ei=function(){function t(t,i,n,r){this.D=t,this.Rt=i,this.kt=n,this.Ot=r}return t.prototype.get=function(){return this.D.cookielessTrackingEnabled?this.Ot.getItem(Ai):this.Rt.get(Ai)},t.prototype.set=function(t){this.D.cookielessTrackingEnabled?this.Ot.setItem(Ai,t):(this.Rt.set(Ai,t),this.kt.setCookie(Ai,t))},t.prototype.remove=function(){this.D.cookielessTrackingEnabled?this.Ot.removeItem(Ai):(this.Rt.delete(Ai),this.kt.removeCookie(Ai))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function i(t){var i=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(i,t)>=0}))}t.isRawDomainState=i,t.isValid=function(t){return!!i(t)&&((!t._cs_id||hi.isValidVisitorString(t._cs_id))&&(!t._cs_s||di.isValidSessionString(t._cs_s))&&(!t._cs_ex||gi.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||Ei.isValidCustomVarString(t._cs_cvars)))}}(wi||(wi={}));var Si,bi=function(){function t(t,i){this.qt=t,this.Ft=i}return t.prototype.retrieve=function(i,n){var r=this;this.Ht=n,this.retrievedStates=[],this.Vt=csArray.prototype.map.call(csArray.prototype.filter.call(i,(function(t){return r.zt(t)})),t.getXdframeOrigin),this.qt.onMessage((function(t){r.Jt(t)})),this.qt.onTimeout((function(){r.Wt()})),this.qt.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Vt,t.getXdframeUrl),(function(t){return r.qt.open(t)}))},t.prototype.Jt=function(t){if(this.Gt(t)){var i=t.data;if(!wi.isValid(i))throw this.qt.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,i)}this.Bt()&&(this.qt.stop(),this.Ht(csArray.prototype.map.call(this.retrievedStates,li.fromRaw)))},t.prototype.Wt=function(){J.warn("xdframe: all messages not received")},t.prototype.Gt=function(t){return csArray.prototype.indexOf.call(this.Vt,t.origin)>-1},t.prototype.Bt=function(){return this.retrievedStates.length===this.Vt.length},t.prototype.zt=function(t){return!L(this.Ft.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Ni=function(){function t(){var t=this;this.Kt=3e3,this.Yt=function(i){t.handleMessage(i)}}return t.prototype.onMessage=function(t){this.Xt=t},t.prototype.onTimeout=function(t){this.$t=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Yt),this.Zt=window.setTimeout((function(){t.$t()}),this.Kt)},t.prototype.open=function(t){var i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),document.body.appendChild(i),i},t.prototype.stop=function(){window.removeEventListener("message",this.Yt),window.clearTimeout(this.Zt),this.Xt=O,this.$t=O},t.prototype.handleMessage=function(t){this.Xt(t)},ot([W("XdframeMessage")],t.prototype,"handleMessage",null),t}(),Ti=function(){function t(){this.Qt=new XMLHttpRequest}return t.prototype.send=function(t){var i=this,n=t.path,r=t.domainUri,s=t.query,e=t.headers,u=t.method,h=t.body,o=t.onLoadCallback,c=t.onErrorCallback,f=t.timeout,a=t.onTimeoutCallback,v=r;if(n&&(v=csString.prototype.concat.call(v,"/",n)),s&&(v=csString.prototype.concat.call(v,"?",s)),this.Qt.open(u,v,!0),e)for(var l=0,d=e;l<d.length;l++){var w=d[l];this.Qt.setRequestHeader(w.name,w.value)}o&&(this.Qt.onload=function(){var t={responseText:i.Qt.responseText,status:i.Qt.status};o(t)}),c&&(this.Qt.onerror=function(){c()}),f&&a&&(this.Qt.timeout=f,this.Qt.ontimeout=function(){a()}),this.Qt.send(h)},t.prototype.abort=function(){this.Qt.abort()},t}(),Ri=function(){function t(){}return t.prototype.send=function(t){return ct(this,void 0,void 0,(function(){var i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S=this;return ft(this,(function(b){switch(b.label){case 0:if(i=t.path,n=t.domainUri,r=t.query,s=t.headers,e=t.method,u=t.body,h=t.onLoadCallback,o=t.onErrorCallback,c=t.timeout,f=t.onTimeoutCallback,this.ti=new AbortController,a={method:e},v={hasTimedOut:!1},c&&(l=window.setTimeout((function(){S.ii(v)}),c),a.signal=this.ti.signal),s){for(d={},w=0,y=s;w<y.length;w++)p=y[w],d[p.name]=p.value;a.headers=d}u&&(a.body=u),m=n,i&&(m=csString.prototype.concat.call(m,"/",i)),r&&(m=csString.prototype.concat.call(m,"?",r)),b.label=1;case 1:return b.trys.push([1,5,,6]),[4,csFetch(m,a)];case 2:return g=b.sent(),l&&window.clearTimeout(l),h?[4,g.text()]:[3,4];case 3:A=b.sent(),E={responseText:A,status:g.status},h(E),b.label=4;case 4:return[3,6];case 5:return b.sent(),l&&window.clearTimeout(l),v.hasTimedOut&&f?f():!this.ti.signal.aborted&&o&&o(),[3,6];case 6:return[2]}}))}))},t.prototype.abort=function(){this.ti&&this.ti.abort()},t.prototype.ii=function(t){this.ti.abort(),t.hasTimedOut=!0},t}(),ki=function(){function t(){this.ni()?this.si=new Ri:this.si=new Ti}return t.prototype.send=function(t){this.si.send(t)},t.prototype.abort=function(){this.si.abort()},t.prototype.ni=function(){return"function"==typeof window.csFetch&&!!window.AbortController},t}();function Oi(t){for(var i=new Uint8Array(t),n="",r=0;r<i.byteLength;r+=1)n+=csString.fromCodePoint(i[r]);return n}function Ii(t){return function(t){for(var i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0,s=t.length;r<s;r+=1)n[r]=csString.prototype.charCodeAt.call(t,r);return i}(self.atob(t))}!function(t){t.UNCOMPRESSED="0",t.LZSTRING="1",t.GZIP="2"}(Si||(Si={}));var Li,xi,_i,Ci=function(t){this.onError=t},Mi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.algorithm=Si.UNCOMPRESSED,i}return ut(i,t),i.prototype.isSupported=function(){return!0},i.prototype.compress=function(t,i,n){if("base64"===t)return"string"!=typeof i&&(i=Oi(i)),n(i);n(i)},i.prototype.compressSync=function(t){return t},i}(Ci),Pi=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.ei=[],r.ui=[],r.hi=0,r.oi=new ki,r}return ut(i,t),i.prototype.setCompressionOptions=function(t,i){this.ci=t,this.fi=i},i.prototype.setRequestPayloadProvider=function(t){this.ai=t},i.prototype.setRequestHeader=function(t){csArray.prototype.push.call(this.ui,t)},i.prototype.afterProvidersCalled=function(t){csArray.prototype.push.call(this.ei,t)},i.prototype.onLoad=function(t){this.vi=t},i.prototype.onError=function(t){this.li=t},i.prototype.onTimeout=function(t,i){this.hi=t,this.$t=i},i.prototype.send=function(t){var i=this;void 0===t&&(t=!0),csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var n=this.retrieveParameters(),r=this.wi();csArray.prototype.forEach.call(this.ei,(function(t){return t()})),t&&this.ci&&this.fi&&"string"==typeof r?this.ci.compress(this.fi,r,(function(t){i.doSend(n,t)})):this.doSend(n,r)},i.prototype.abort=function(){this.oi.abort()},i.prototype.getCompressionOutputType=function(){return this.fi},i.prototype.wi=function(){return this.ai?this.ai.getRequestPayload():""},i.prototype.doSend=function(t,i){var n,r,s,e=this,u=null!==(s=null!==(n=t.ct)&&void 0!==n?n:null===(r=this.ci)||void 0===r?void 0:r.algorithm)&&void 0!==s?s:Si.UNCOMPRESSED;t=ht(ht({},t),{ct:u});var h=vt.toQuery(t);this.oi.send({method:"POST",domainUri:this.domainUri,path:this.path,headers:this.ui,query:h,body:i,onLoadCallback:this.vi,onErrorCallback:function(){e.li&&e.li(t,i)},timeout:this.hi,onTimeoutCallback:this.$t}),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(i){return i(t)}))},ot([W("POST request")],i.prototype,"doSend",null),i}(wt);!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE"}(Li||(Li={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(xi||(xi={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(_i||(_i={}));var Di,Ui;function ji(t,i){void 0===i&&(i=true),t.boundElement.addEventListener(t.type,t.listener,i)}function qi(t,i){void 0===i&&(i=true),t.boundElement.removeEventListener(t.type,t.listener,i)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(Di||(Di={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Ui||(Ui={}));var Fi=function(){function t(){}return t.isEmpty=function(){return 0===t.yi.length},t.add=function(i){var n;(n=csArray.prototype.push).call.apply(n,at([t.yi],i,!1))},t.getAll=function(){return t.yi},t.clear=function(){t.yi=[]},t.yi=[],t}(),Hi=50;var Vi=!1;var zi=[],Ji=[];function Wi(t){csArray.prototype.push.call(zi,t),performance.mark("".concat(t,"-start"))}function Gi(t){var i=performance.measure(t,"".concat(t,"-start"));if(i){var n=i.duration;csArray.prototype.push.call(Ji,{mName:t,mDuration:n.toFixed(2)}),csArray.prototype.pop.call(zi),0===zi.length&&(n>Hi&&Fi.add(Ji),Ji=[])}}function Bi(t){performance.mark("".concat(t,"-start"))}function Ki(t){var i=performance.measure(t,"".concat(t,"-start"));if(i){var n=i.duration;n>Hi&&Fi.add([{mName:t,mDuration:n.toFixed(2)}])}}var Yi=function(t){return function(i,n,r){var s=r.value;r.value=function(){if(!Vi)return r.value=s,s.apply(this,arguments);Wi(t);var i=s.apply(this,arguments);return Gi(t),i}}};function Xi(t){var i=csEventtarget.apply(t);return i&&a(i)&&csElementshadowRoot.apply(i)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:i}function $i(t){return Math.round(10*t)/10}function Zi(t,i){"number"==typeof i&&(i={wait:i});var n,r=i.wait;if(i.ignoreThrottledCalls){var s=0;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var e=Tt();if(e-s>r)return s=e,t.apply(this,i)}}var e,u=[],h=null,o=0,c=function(){o=Tt(),h=null,e=t.apply(n,u)},f=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var f=Tt(),a=r-(f-o);return n=null!=this?this:window,u=at([],i,!0),a<=0||a>r?(o=f,e=t.apply(n,u),h?(window.clearTimeout(h),h=null):u=[]):h||(h=window.setTimeout(c,a)),e};return f.cancel=function(){h&&(window.clearTimeout(h),o=0,h=null,u=[])},f.flushPending=function(){h&&(window.clearTimeout(h),c())},f}function Qi(){return function(t,i,n){var r=n.value;n.value=function(t){!1===(null==t?void 0:t.isTrusted)&&Qi.enabled||r.call(this,t)}}}Qi.enabled=!0;var tn=function(){function t(i,n,r,s){var e=this;this.pi=i,this.mi=n,this.gi=r,this.Ai=s,this.Ei=new Set,this.Si=[],this.bi=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.Ni=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.Ti=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.pi.on(t.Ri,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.pi.on(t.ki,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.pi.on(t.Oi,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.pi.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.pi.on(t.ki,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.Ii=[{type:"change",listener:this.pi.on(t.Oi,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.pi.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.pi.on(t.ki,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}}]}var i;return t.prototype.init=function(){this.Li(),this.xi(),this._i(),this.Ci(),this.Ai.onInputNodeToEncrypt(this.Mi.bind(this))},t.prototype.Ci=function(){var t=this;this.mi.onDocumentIdentified((function(i){t.Pi(i)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Si,t)},t.prototype.Mi=function(t){csArray.prototype.forEach.call(this.Si,(function(i){return i(t)}))},t.prototype.start=function(){this.Di()},t.prototype.stop=function(){this.Ui()},t.prototype.xi=function(){var t;this.ji()&&(t=csArray.prototype.push).call.apply(t,at([this.Ti],this.bi,!1))},t.prototype.Li=function(){var t;this.qi()&&(t=csArray.prototype.push).call.apply(t,at([this.Ti],this.Ni,!1))},t.prototype.Pi=function(t){E(t)?csArray.prototype.forEach.call(this.Ti,(function(t){return ji(t)})):this.Ei.has(t)||(this.Ei.add(t),csArray.prototype.forEach.call(this.Ii,(function(i){var n=i;n.boundElement=t,ji(n)})))},t.prototype.Fi=function(t){E(t)?csArray.prototype.forEach.call(this.Ti,(function(t){return qi(t)})):(this.Ei.delete(t),csArray.prototype.forEach.call(this.Ii,(function(i){var n=i;n.boundElement=t,qi(n)})))},t.prototype.ji=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.qi=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.Ui=function(){var t=this;this.Fi(document),this.Ei.forEach((function(i){return t.Fi(i)}))},t.prototype.Di=function(){this.Hi(t.Ri),this.Vi(),this.zi(),this.Ji(),this.Hi(t.ki)},t.prototype.Hi=function(t){for(var i,n=document.querySelectorAll(t),r=0;r<n.length;r+=1){var s=n.item(r);(null===(i=s.value)||void 0===i?void 0:i.length)>0&&this.Wi(s)}},t.prototype.Vi=function(){var t=window.pageYOffset,i=window.pageXOffset;if(0!==t||0!==i){var n=this.mi.getId(document);if(!n)return void J.warn("scrollListener: document without identifier");var r={type:Li.SCROLL,args:[n,i,t],date:Tt()};this.Mi(r)}},t.prototype.zi=function(){for(var t=document.getElementsByTagName("select"),i=0;i<t.length;i+=1)this.Gi(t[i])},t.prototype.Ji=function(){for(var i=document.querySelectorAll(t.Oi),n=0;n<i.length;n+=1)this.Bi(i[n])},t.prototype.Ki=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!a(t)||!this.gi.isSensitive(t)&&!this.gi.isSensitiveChild(t)){var i=this.mi.getId(t);if(i){var n=this.Ki(t),r={type:Li.SCROLL,args:[i,n.left,n.top],date:Tt()};this.Mi(r)}else J.warn("scrollListener: node without identifier")}},t.prototype.mouseOverListener=function(t){if(!a(t.target)||!this.gi.isSensitiveChild(t.target)){var i=this.mi.getId(t.target);if(i){var n={type:Li.MOUSE_OVER,args:[i],date:Tt()};this.Mi(n)}else J.warn("mouseOverListener: node without identifier")}},t.prototype.clickListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.CLICK,args:[n],date:Tt()};this.Mi(r)}else J.warn("clickListener: node without identifier")}},t.prototype.inputCheckableListener=function(t){var i=Xi(t);this.Bi(i)},t.prototype.Bi=function(t){if(!this.gi.isSensitive(t)&&!this.gi.isSensitiveChild(t)){var i=this.mi.getId(t);if(i){var n={type:Li.INPUT_CHECKABLE,args:[i,t.checked],date:Tt()};this.Mi(n)}else J.warn("inputCheckableListener: node without identifier")}},t.prototype.inputSelectListener=function(t){var i=Xi(t);this.Gi(i)},t.prototype.Gi=function(t){if(!this.gi.isSensitive(t)&&!this.gi.isSensitiveChild(t)){var i=this.mi.getId(t);if(i){var n={type:Li.INPUT_SELECT,args:[i,t.selectedIndex],date:Tt()};this.Mi(n)}else J.warn("inputSelectListener: node without identifier")}},t.prototype.inputTextListener=function(t){var i=Xi(t);this.Wi(i)},t.prototype.Wi=function(t){var i;if(!this.gi.isSensitive(t)&&!this.gi.isSensitiveChild(t)){var n=this.mi.getId(t);if(n){var r=null!==(i=t.value)&&void 0!==i?i:"";if(this.Ai.shouldEncrypt(t))this.Ai.registerInputNodeToEncrypt({targetId:n,targetValue:r,date:Tt()});else{var s="number"===t.type?"0":"•",e={type:Li.INPUT_TEXT,args:[n,csString.prototype.replace.call(r,/\S/g,s)],date:Tt()};this.Mi(e)}}else J.warn("inputTextListener: node without identifier")}},t.prototype.keyUpListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r=this.Yi[t.key];if(void 0!==r){var s={type:Li.KEY_UP,args:[n,r],date:Tt()};this.Mi(s)}}else J.warn("keyUpListener: node without identifier")}},t.prototype.keyDownListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r=this.Yi[t.key];if(void 0!==r){var s={type:Li.KEY_DOWN,args:[n,r],date:Tt()};this.Mi(s)}}else J.warn("keyDownListener: node without identifier")}},t.prototype.copyListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.CLIPBOARD_COMMAND,args:[n,Ui.COPY],date:Tt()};this.Mi(r)}else J.warn("copyListener: node without identifier")}},t.prototype.cutListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.CLIPBOARD_COMMAND,args:[n,Ui.CUT],date:Tt()};this.Mi(r)}else J.warn("cutListener: node without identifier")}},t.prototype.pasteListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.CLIPBOARD_COMMAND,args:[n,Ui.PASTE],date:Tt()};this.Mi(r)}else J.warn("pasteListener: node without identifier")}},t.prototype.pointerUpListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.POINTER_UP,args:[t.pointerId,t.pointerType,$i(t.clientX),$i(t.clientY),n,t.button],date:Tt()};this.Mi(r)}else J.warn("pointerup: node without identifier")}},t.prototype.pointerMoveListener=function(t){var i={type:Li.POINTER_MOVE,args:[t.pointerId,t.pointerType,$i(t.clientX),$i(t.clientY)],date:Tt()};this.Mi(i)},t.prototype.pointerDownListener=function(t){var i=Xi(t);if(!a(i)||!this.gi.isSensitiveChild(i)){var n=this.mi.getId(i);if(n){var r={type:Li.POINTER_DOWN,args:[t.pointerId,t.pointerType,$i(t.clientX),$i(t.clientY),n,t.button,{pageX:$i(t.pageX),pageY:$i(t.pageY)}],date:Tt()};this.Mi(r)}else J.warn("pointerdown: node without identifier")}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Li.TOUCH_START,args:[r.identifier,$i(r.clientX),$i(r.clientY)],date:Tt()};this.Mi(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Li.TOUCH_MOVE,args:[r.identifier,$i(r.clientX),$i(r.clientY)],date:Tt()};this.Mi(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Li.TOUCH_END,args:[r.identifier,$i(r.clientX),$i(r.clientY)],date:Tt()};this.Mi(s)}},t.prototype._i=function(){this.Yi={},this.Yi[" "]=Di.SPACE,this.Yi.Spacebar=Di.SPACE,this.Yi.Backspace=Di.BACKSPACE,this.Yi.Enter=Di.ENTER,this.Yi.Delete=Di.DELETE,this.Yi.ArrowUp=Di.ARROWUP,this.Yi.ArrowDown=Di.ARROWDOWN,this.Yi.ArrowLeft=Di.ARROWLEFT,this.Yi.ArrowRight=Di.ARROWRIGHT,this.Yi.Up=Di.ARROWUP,this.Yi.Down=Di.ARROWDOWN,this.Yi.Left=Di.ARROWLEFT,this.Yi.Right=Di.ARROWRIGHT,this.Yi.CapsLock=Di.CAPSLOCK,this.Yi.Shift=Di.SHIFT,this.Yi.Tab=Di.TAB,this.Yi.Escape=Di.ESCAPE,this.Yi.Esc=Di.ESCAPE,this.Yi.End=Di.END,this.Yi.Alt=Di.ALT,this.Yi.Control=Di.CTRL,this.Yi.Meta=Di.META},t.Ri=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.Oi=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.ki='input[type="number"]',ot([Yi("RecordingPageEvents.start")],t.prototype,"start",null),ot([W("scroll")],t.prototype,"scrollListener",null),ot([W("mouseOver"),Qi(),function(t,i,n){var r=n.value;return r&&(n.value=function(t){if(Xi(t)===csEventtarget.apply(t))return r.call(this,t)}),n}],t.prototype,"mouseOverListener",null),ot([W("click"),Qi()],t.prototype,"clickListener",null),ot([W("checkable")],t.prototype,"inputCheckableListener",null),ot([W("select")],t.prototype,"inputSelectListener",null),ot([W("text")],t.prototype,"inputTextListener",null),ot([W("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([W("Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([W("Event handler type: copy")],t.prototype,"copyListener",null),ot([W("Event handler type: cut")],t.prototype,"cutListener",null),ot([W("Event handler type: paste")],t.prototype,"pasteListener",null),ot([W("Event handler type: pointerup"),Qi()],t.prototype,"pointerUpListener",null),ot([W("Event handler type: pointermove"),Qi(),(i={wait:33,ignoreThrottledCalls:!0},function(t,n,r){r.value=Zi(r.value,i)})],t.prototype,"pointerMoveListener",null),ot([W("Event handler type: pointerdown"),Qi()],t.prototype,"pointerDownListener",null),ot([W("Event handler type: touchstart"),Qi()],t.prototype,"touchStartListener",null),ot([W("Event handler type: touchmove"),Qi()],t.prototype,"touchMoveListener",null),ot([W("Event handler type: touchend"),Qi()],t.prototype,"touchEndListener",null),t}();function nn(t){for(var i=t.length,n=new csArray(i),r=0;r<i;r+=1)n[r]=t[r];return n}function rn(t,i){for(var n=t.length,r=0;r<n;r++)i(t[r],r)}function sn(t,i){for(var n=t.length,r=[],s=0;s<n;s+=1){var e=t[s];i(e)&&csArray.prototype.push.call(r,e)}return r}var en,un,hn,on,cn=function(){function t(t,i,n,r,s,e,u){void 0===u&&(u=document);var h=this;this.Xi=t,this.$i=i,this.Zi=n,this.Qi=r,this.mi=s,this.gi=e,this.tn=u,this.nn=!1,this.rn=function(t){h.Qi.emitInitialDomDone(t)},this.$i.onCharacterDataMutation((function(t){h.en(t)})),this.$i.onAttributesMutation((function(t){w(t.target)&&h.gi.isSensitive(t.target)&&"src"===t.attributeName&&(h.gi.unidentifySensitiveNodes(t.target),h.gi.identifySensitiveNodes(t.target)),h.un(t)})),this.$i.onChildListMutation((function(t,i){rn(t.removedNodes,(function(t){h.gi.unidentifySensitiveNodes(t)})),rn(t.addedNodes,(function(t){h.gi.identifySensitiveNodes(t),h.mi.identifyNodes(t,i)})),h.hn(t,i)})),this.$i.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(h.gi.identifySensitiveNodes(t.target),h.mi.identifyNodes(csElementshadowRoot.apply(t.target)),h.cn(t))}))}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.isStarted=function(){return this.nn},t.prototype.start=function(){this.isStarted()||(this.nn=!0,this.$i.start(),this.an())},t.prototype.stop=function(){this.isStarted()&&(this.nn=!1,this.gi.unidentifySensitiveNodes(this.tn),this.$i.stop())},t.prototype.flushEvents=function(){this.$i.flushPendingMutations()},t.prototype.an=function(){this.Qi.emitInitialDomStart(),this.gi.identifySensitiveNodes(this.tn),this.mi.identifyNodes(this.tn),this.Xi.serializeInitialDom(this.tn,this.rn)},t.prototype.cn=function(t){if(!this.gi.isSensitive(t.target)&&!this.gi.isSensitiveChild(t.target)){var i=this.Xi.serializeAttachShadowEvent(t);if(i){var n={args:i,date:t.date,type:Li.ATTACH_SHADOW};this.fn(n)}}},t.prototype.un=function(t){if(!a(t.target)||!this.gi.isSensitiveChild(t.target)&&!this.gi.isSensitiveAttribute(t.target,t.attributeName)){var i=this.Xi.serializeMutationAttribute(t);if(i){var n={args:i,date:t.date,type:Li.MUTATION_ATTRIBUTE};this.fn(n),this.Zi.scanAttribute(t.target,t.attributeName)}}},t.prototype.en=function(t){var i=t.target.parentElement;if(!i||!this.gi.isSensitive(i)&&!this.gi.isSensitiveChild(i)){var n=this.Xi.serializeMutationCharacterData(t);if(n){var r={args:n,date:t.date,type:Li.MUTATION_CHARACTER_DATA};this.fn(r),this.Zi.scanText(t.target)}}},t.prototype.hn=function(t,i){var n=this;if(!a(t.target)&&!A(t.target)||!this.gi.isSensitive(t.target)&&!this.gi.isSensitiveChild(t.target)){var r=this.Xi.serializeMutationChildList(t,i);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(i){var r={args:i,date:t.date,type:Li.MUTATION_REMOVE};n.fn(r)})),csArray.prototype.forEach.call(e,(function(i){var r={args:i,date:t.date,type:Li.MUTATION_INSERT};n.fn(r)}))}}},t}(),fn=function(){function t(t){this.vn=t,this.ln=0}return t.prototype.addString=function(t){this.ln+=2*t.length},t.prototype.addArrayBuffer=function(t){this.ln+=t.byteLength},t.prototype.isThresholdReached=function(){return this.ln>this.vn},t.prototype.reset=function(){this.ln=0},t}(),an=function(){function t(t,i,n){void 0===t&&(t=[]),void 0===i&&(i={}),void 0===n&&(n=512e3),this.dn=t,this.wn=i,this.yn=new fn(n)}return t.prototype.addEvent=function(t){this.yn.addString(P(t)),csArray.prototype.push.call(this.dn,t)},t.prototype.addEventByTimestamp=function(t){for(var i=0;i<this.dn.length;i+=1){if(this.dn[i].date>t.date)return this.yn.addString(P(t)),void csArray.prototype.splice.call(this.dn,i,0,t)}this.addEvent(t)},t.prototype.eventsCount=function(){return this.dn.length},t.prototype.clearEvents=function(){this.yn.reset(),this.dn=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.yn.isThresholdReached()},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.wn[n]=i[n])},t.prototype.removeRequestParameter=function(t){this.wn.hasOwnProperty(t)&&delete this.wn[t]},t.prototype.getEvents=function(){return this.dn},t.prototype.extractEvents=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=[],r=[];return csArray.prototype.forEach.call(this.dn,(function(i){-1!==csArray.prototype.indexOf.call(t,i.type)?csArray.prototype.push.call(n,i):csArray.prototype.push.call(r,i)})),this.dn=r,n},t.prototype.getRequestPayload=function(){return P(this.dn)},t.prototype.getRequestParameters=function(){var t=ht({},this.wn);return this.dn.length>0&&(t.let=this.dn[this.dn.length-1].date.toString()),t},t}(),vn=function(){function t(){this.mn=1}return t.prototype.getCurrentIndex=function(){return this.mn},t.prototype.increment=function(){this.mn+=1},t.prototype.reset=function(){this.mn=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.mn)}},t}(),ln=function(){function t(){}return t.prototype.emit=function(i,n){var r="".concat(t.gn,".").concat(i),s=t.createEvent(r,{detail:n});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,i){if(void 0===i&&(i={}),"function"==typeof CustomEvent)return new CustomEvent(t,i);var n=this.An();if(null===n)return null;var r=i.bubbles,s=void 0!==r&&r,e=i.cancelable,u=void 0!==e&&e,h=i.detail;return n.initCustomEvent(t,s,u,h),n},t.An=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.gn="cs.tracking",t}(),dn=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),wn=function(t){function i(i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b){var N=t.call(this)||this;return N.D=i,N.En=n,N.Sn=r,N.wn=s,N.bn=e,N.Nn=u,N.Tn=h,N.Rn=o,N.kn=c,N.On=f,N.In=a,N.Y=v,N.Zi=l,N.Ln=d,N.xn=w,N._n=y,N.Cn=p,N.Mn=m,N.Pn=g,N.Ai=A,N.Dn=E,N.Un=S,N.jn=b,N.qn=0,N.Fn=0,N.Hn=0,N.Vn=new ln,N.zn={allowFromQuotaService:!0,allowFromSerialization:!0},N.Jn=Zi((function(){N.pushEvents()}),2e3),N.Wn=function(t){return N.processBrowserEvent(t)},N.Gn=function(t){return N.Bn(t)},N}return ut(i,t),i.prototype.init=function(){this.Kn(),this.Yn()},i.prototype.Kn=function(){var t=this;this.En.setRequestPayloadProvider(this.Sn),this.En.setRequestParametersProviders(this.Sn),this.En.afterProvidersCalled((function(){t.Dn.addBatchInProgress("".concat(t.bn.getCurrentIndex()),t.Sn.getRequestParameters(),t.Sn.getEvents()),t.Sn.clearEvents(),t.bn.increment(),t.Sn.setRequestParametersFromProvider(t.wn)})),this.En.after((function(i){"ri"in i&&t.Dn.removeBatchInProgress(i.ri)})),this.En.onError((function(i,n){t.Dn.saveFailedRecordingEvents(i,n)})),this.En.onLoad((function(i){i.status>=200&&i.status<=299?t.Dn.recover():J.warn("recording request failed:".concat(i.status))}))},i.prototype.Yn=function(){var t=this;this.Nn.onEvent(this.Wn),this.Tn.onEvent(this.Wn),this.kn.onEvent(this.Wn),this.Rn.onEvent(this.Gn),this.Zi.onEvent(this.Wn),this.Ln.onEvent(this.Wn),this.Mn.onEvent(this.Wn),this.On.onEvent(this.Gn),this.Ai.onTextNodeToEncrypt(this.Wn),this.Ai.onApiErrorToEncrypt((function(i){t.Xn(i)})),this.jn.onEvent(this.Wn),this.Ai.onUserIdentifierToEncrypt(this.Wn),this.Un.onEvent(this.Wn)},i.prototype.isRecording=function(){return this.Y.hasValidSession()&&this.isStarted},i.prototype.isMutationTrackerStarted=function(){return this.Tn.isStarted()},i.prototype.blockSendingEventsFromQuotaService=function(){this.zn.allowFromQuotaService=!1},i.prototype.allowSendingEventsFromQuotaService=function(){this.zn.allowFromQuotaService=!0},i.prototype.blockSendingEventsFromSerialization=function(){this.zn.allowFromSerialization=!1},i.prototype.allowSendingEventsFromSerialization=function(){this.zn.allowFromSerialization=!0},i.prototype.canSendEvents=function(){return this.zn.allowFromQuotaService&&this.zn.allowFromSerialization},i.prototype.onIframeJavascriptError=function(t){this.$n(t)},i.prototype.onIframeDetailedApiError=function(t){this.Zn(t)},i.prototype.onIframeRecordingUserEvent=function(t){for(var i=0,n=t;i<n.length;i++){var r=n[i];this.Bn(r)}},i.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var i=0,n=t;i<n.length;i++){var r=n[i];this.processBrowserEvent(r)}},i.prototype.processBrowserEvent=function(t){this.Y.hasValidSession()&&this.Qn(t)},i.prototype.Bn=function(t){this.In.isSessionValid()&&this.Qn(t)},i.prototype.Qn=function(t){this.Sn.addEvent(t),this.Sn.isThresholdReached()?this.pushEvents():this.Sn.isFull()&&this.Jn(),this.D.emitDebugEvents&&this.Vn.emit("recordingEvent",ht(ht({},t),{typeName:Li[t.type]}))},i.prototype.onStart=function(){var t=this;this.initStates(),this.Sn.setRequestParametersFromProvider({getRequestParameters:function(){return{rst:Tt().toString()}}}),this.Un.start(),this.Mn.start(),this.Ln.start(),this.Tn.start(),this.Nn.start(),this.kn.start(),this.On.start(),this.jn.start(),this.D.jsErrorsEnabled&&this.xn.subscribe(i.tr,(function(i){return t.$n(i)})),this.D.apiErrors.enabled&&this.Cn.subscribe(i.tr,(function(i){return t.Zn(i)}),{detailedEvent:!0}),this.D.emitDebugEvents&&this.Vn.emit("replayRecordingStarted")},i.prototype.onStop=function(){this.Nn.stop(),this.Tn.stop(),this.kn.stop(),this.Rn.stop(),this.xn.unsubscribe(i.tr),this.Cn.unsubscribe(i.tr),this.Mn.stop(),this.On.stop(),this.Un.stop(),this.jn.stop()},i.prototype.clearStates=function(){this.Tn.flushEvents(),this.Jn.cancel(),this.pushEvents(),this.ir()},i.prototype.initStates=function(){this.bn.reset(),this.Sn.setRequestParametersFromProvider(this.wn),this.qn=0,this.Fn=0,this.Hn=0},i.prototype.pushEvents=function(){this.Mn.flushEvents(),this.Sn.eventsCount()>0&&this.canSendEvents()&&(this.isStarted?this.En.send():this.Sn.clearEvents())},i.prototype.addInitialDom=function(t){this.Sn.addEventByTimestamp(t)},i.prototype.Zn=function(t){t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody?this.Ai.registerApiErrorToEncrypt(t):this.Xn(t)},i.prototype.Xn=function(t){if(this.Fn<i.nr){var n={type:Li.API_ERROR,date:Tt(),args:[this.Pn.anonymize(t)]};this.Wn(n),this.Fn=this.Fn+1}},i.prototype.$n=function(t){if(this.qn<i.rr){var n={type:Li.JAVASCRIPT_ERROR,date:Tt(),args:[this._n.anonymize(t)]};this.Wn(n),this.qn=this.qn+1}},i.prototype.er=function(t){if(this.Hn<i.ur){var n={type:Li.CUSTOM_ERROR,date:Tt(),args:[t]};this.Wn(n),this.Hn=this.Hn+1}},i.prototype.hr=function(t){this.isStarted&&(t===ni.ETR_SESSION?this.Sn.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[i.cr]=i.ar,t}}):t===ni.ETR_PAGE&&this.Sn.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[i.vr]=i.ar,t}}))},i.prototype.ir=function(){this.Sn.removeRequestParameter(i.vr),this.Sn.removeRequestParameter(i.cr)},i.prototype.clearEvents=function(){this.Sn.clearEvents()},i.prototype.onCustomJavaScriptErrorEvent=function(t){this.$n(t)},i.prototype.onCustomErrorEvent=function(t){this.er(t)},i.prototype.onPageEvent=function(t){this.lr(t)},i.prototype.onUserIdentifierEvent=function(t){var i={userIdentifier:t,date:Tt(),keyId:this.D.encryptionPublicKeyId};this.Ai.registerUserIdentifierToEncrypt(i)},i.prototype.onEventTriggerRecording=function(t,i){this.hr(i),this.lr(t),this.pushEvents()},i.prototype.lr=function(t){var n={type:Li.PAGE_EVENT,date:Tt(),args:[{eventName:csString.prototype.slice.call(t,0,i.wr)}]};this.Sn.addEvent(n)},i.prototype.triggerConsentGranted=function(){var t={date:Tt(),type:Li.CONSENT_GRANTED};this.Sn.addEvent(t)},i.prototype.triggerConsentWithdrawn=function(){var t={date:Tt(),type:Li.CONSENT_WITHDRAWN};this.Sn.addEvent(t)},i.tr="RecordingService",i.wr=255,i.rr=20,i.nr=20,i.ur=20,i.vr="etrp",i.cr="etrs",i.ar="1",ot([Yi("addInitialDom")],i.prototype,"addInitialDom",null),i}(dn),yn=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.yr=i,u.Sn=n,u.pr=r,u.D=s,u.mr=e,u.gr={},u.Ar=!1,u.Er=function(t){if(0!==t.length)for(var i=function(t){var i=t.metadata,n=t.events,r=i.datatype;if(!u.Sr(i.rt))return"continue";u.yr.setRequestPayloadProvider({getRequestPayload:function(){return n}}),delete i.datatype,u.yr.setRequestParametersProviders({getRequestParameters:function(){return i}});var s="json"===r;u.yr.send(s)},n=0,r=t;n<r.length;n++){i(r[n])}},u.br=function(){try{if(!u.Ar)return;u.Nr();var t=u.Sn.getRequestParameters();if(!u.Sr(t.rt))return;if(u.sendLastMessageBeacon(),0===u.Sn.eventsCount())return;u.D.useMalkaPipeline&&(t.hlm="true"),u.pr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:ht(ht({},t),{datatype:"json"}),events:u.Sn.getRequestPayload()})}catch(t){}},u.Kn(),u.Tr=u.yr.getCompressionOutputType(),u}return ut(i,t),i.prototype.Kn=function(){var t=this;this.yr.onLoad((function(i){i.status>=200&&i.status<=299?t.recover():J.warn("recording request failed:".concat(i.status))})),this.yr.onError((function(i,n){t.saveFailedRecordingEvents(i,n)}))},i.prototype.onStart=function(){this.gr={},this.Rr()},i.prototype.onStop=function(){this.kr()},i.prototype.recover=function(){this.pr.recover(this.Er)},i.prototype.addBatchInProgress=function(t,i,n){this.gr[t]={metadata:i,events:n}},i.prototype.removeBatchInProgress=function(t){delete this.gr[t]},i.prototype.blockSendingLastMessage=function(){this.Ar=!1},i.prototype.allowSendingLastMessage=function(){this.Ar=!0},i.prototype.sendLastMessageBeacon=function(){this.D.useMalkaPipeline&&this.Ar&&this.mr.send()},i.prototype.Rr=function(){window.addEventListener("pagehide",this.br)},i.prototype.kr=function(){window.removeEventListener("pagehide",this.br)},i.prototype.Sr=function(t){return!this.D.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,ti.TEMPORARILY_RECORDED)},i.prototype.saveFailedRecordingEvents=function(t,i){this.pr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri),metadata:ht(ht({},t),{datatype:this.Tr}),events:i})},i.prototype.Nr=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.gr),(function(i){var n=t.gr[i],r=n.metadata,s=n.events;t.pr.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:ht(ht({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},ot([W("RecordingRecovery")],i.prototype,"recover",null),i}(dn),pn=/[^\s]/g;function mn(t){return csString.prototype.replace.call(t,pn,"a")}!function(t){t.getShadowRoot=function(t){return t&&(a(i=t)&&csElementshadowRoot.apply(i)&&S(csElementshadowRoot.apply(i)))?t.shadowRoot:null;var i},t.getAllShadowHosts=function t(i){for(var n,r,s=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(n=csArray.prototype.push).call.apply(n,at([e,r],t(r.shadowRoot),!1));return e}}(en||(en={})),function(t){function i(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function n(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return U(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return U(t)&&t>0?t:window.screen.height}t.documentHeight=i,t.documentWidth=n,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(n()),dh:"".concat(i()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(un||(un={})),function(t){var i="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function n(t){var i;return t.parentElement?t.parentElement:t.getRootNode?null===(i=t.getRootNode())||void 0===i?void 0:i.host:null}function r(t){var i;if(!1===(null===(i=t.checkVisibility)||void 0===i?void 0:i.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){var n=t.getBoundingClientRect();if(0==n.width&&0==n.height)return!0}var r,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(r=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(r)))}function s(t){var i=t.getBoundingClientRect(),n=i.left+.5*i.width,r=i.top+.5*i.height;return e(document,n,r)}function e(t,i,n){var r=t.elementFromPoint(i,n);if(!r)return null;var s=en.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,i,n):r}t.isConnected=function(t){return i(t)},t.isEmpty=function(t){for(var i=t.length,n=0;n<i;n++)switch(csString.prototype.charCodeAt.call(t,n)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0},t.getParentElement=n,t.findAllElements=function(t,i){var n;void 0===i&&(i=document);for(var r=nn(i.querySelectorAll(t)),s=0,e=en.getAllShadowHosts(i);s<e.length;s++){var u=nn(e[s].shadowRoot.querySelectorAll(t));(n=csArray.prototype.push).call.apply(n,at([r],u,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(i){if(r(i))return!0;var s=n(i);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var i=null,s=t;do{if(!r(s))break;i=s}while(s=n(s));return i},t.createDeepTreeWalker=function(t,i){var n;void 0===i&&(i=NodeFilter.SHOW_ALL);var r=i|NodeFilter.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];return t instanceof Element&&(null===(n=csElementshadowRoot.apply(t))||void 0===n?void 0:n.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1)),{nextNode:function(){for(;s.length>0;){var t=s[s.length-1].nextNode();if(t){var n=en.getShadowRoot(t);if(n&&csArray.prototype.push.call(s,document.createTreeWalker(n,r,null,!1)),0!=(En[t.nodeType]&i))return t}else csArray.prototype.pop.call(s)}return null}}},t.getTopElement=s,t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var i=t.getBoundingClientRect();return i.right+un.windowOffsetX()<0||i.bottom+un.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var i=s(t);return null!==i&&!t.contains(i)}(t)},t.isVisibleInViewportInForeground=function(t){if(r(t))return!1;var i=s(t);return t.contains(i)},t.isInViewPort=function(t){var i=s(t);return null!==i&&(t===i||t.contains(i))},t.getAttributeNS=function(t,i,n){var r=t.getAttributeNS(i,n);return""===r?t.hasAttributeNS(i,n)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(a(i=t)&&"select"===i.localName||m(t)||p(t)||function(t){return a(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return a(t)&&"details"===t.localName}(t)&&!function(t){return a(t)&&"summary"===t.localName}(t)))));var i}}(on||(on={}));var gn,An,En=((hn={})[Node.ATTRIBUTE_NODE]=NodeFilter.SHOW_ATTRIBUTE,hn[Node.CDATA_SECTION_NODE]=NodeFilter.SHOW_CDATA_SECTION,hn[Node.COMMENT_NODE]=NodeFilter.SHOW_COMMENT,hn[Node.DOCUMENT_FRAGMENT_NODE]=NodeFilter.SHOW_DOCUMENT_FRAGMENT,hn[Node.DOCUMENT_NODE]=NodeFilter.SHOW_ALL,hn[Node.DOCUMENT_TYPE_NODE]=NodeFilter.SHOW_DOCUMENT_TYPE,hn[Node.ELEMENT_NODE]=NodeFilter.SHOW_ELEMENT,hn[Node.ENTITY_NODE]=NodeFilter.SHOW_ENTITY,hn[Node.ENTITY_REFERENCE_NODE]=NodeFilter.SHOW_ENTITY_REFERENCE,hn[Node.NOTATION_NODE]=NodeFilter.SHOW_NOTATION,hn[Node.PROCESSING_INSTRUCTION_NODE]=NodeFilter.SHOW_PROCESSING_INSTRUCTION,hn[Node.TEXT_NODE]=NodeFilter.SHOW_TEXT,hn),Sn=function(){function t(t,i,n,r){this.Or=t,this.mi=i,this.Ir=n,this.Ai=r,this.Lr=!1}var i;return t.prototype.setAnonymization=function(t){this._r=t},t.prototype.isDOMSerializationInProgress=function(){return this.Lr},t.prototype.serializeInitialDom=function(t,i){if(this.Or.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&i(t)})).catch((function(t){J.error(t)}));else{var n=this.Cr(t);i(n)}},t.prototype.Cr=function(t){return{args:[this.Or.serialize(t,{withAnonymization:this._r})],date:Tt(),type:Li.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(i){switch(i.label){case 0:this.Lr=!0,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.Or.startSerializeAsync(t,{withAnonymization:this._r})];case 2:return[2,i.sent()];case 3:return this.Lr=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var i=this.mi.getId(t.target);if(!i)return J.warn("serializeMutationCharacterData: node without identifier"),null;var n=t.target;if(n.data===t.oldValue)return null;if(v(n)&&this.Ai.shouldEncrypt(n))return this.Ai.registerTextNodeMutationToEncrypt({targetId:i,textNode:n,serializedTextData:mn(n.data),date:t.date}),null;var r=[i,this.Ir.getAnonymizedText(this._r,n,n.data)];return this.Mr(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationCharacterData(t,r),r},t.prototype.serializeAttachShadowEvent=function(t){var i=this.mi.getId(t.target);return i?[i,this.Or.serialize(t.shadowRoot)]:(J.warn("serializeAttachShadowEvent: node without identifier"),null)},t.prototype.serializeMutationAttribute=function(t){var i=this.mi.getId(t.target);if(!i)return null;var n=t.target,r=t.attributeName,s=t.attributeNamespace,e=on.getAttributeNS(t.target,s,r);e&&(e=this.Ir.getAnonymizedAttributeValue(n,this._r,r,e));var u=[i,s,r,e];return this.Mr(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationAttribute(t.oldValue?this.Ir.getAnonymizedAttributeValue(n,this._r,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,i){var n=this.mi.getId(t.target);return n?this.Mr(this.Or)&&this.isDOMSerializationInProgress()?this.Or.serializeMutationChildList(t,this._r,i):{removedNodes:this.Pr(t),addedNodes:this.Dr(t,n,i)}:null},t.prototype.Mr=function(t){return t.isAsynchronous()},t.prototype.Pr=function(t){for(var i=[],n=0;n<t.removedNodes.length;n+=1){var r=this.mi.getId(t.removedNodes[n]);r&&csArray.prototype.push.call(i,[r])}return i},t.prototype.Dr=function(t,i,n){var r=[],s=null;if(t.nextSibling){var e=this.mi.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var h=t.addedNodes[u],o=this.Or.serialize(h,{excludedNodes:n,withAnonymization:this._r}),c=n.get(h);c&&n.set(h,c-1),csArray.prototype.push.call(r,[i,s,o])}return r},ot([(i="serializeDocumentAsync",function(t,n,r){var s=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!Vi)return r.value=s,s.apply(this,t);Bi(i);var e=s.apply(this,t);return e.then((function(){Ki(i)})),e}})],t.prototype,"serializeDocumentAsync",null),t}(),bn=function(){function t(t,i,n,r){var s=this;this.Ur=t,this.mi=i,this.gi=n,this.Zi=r,this.jr()&&(this.qr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var i=t.context,n=t.args;return s.sendInsertion(i,n)}})),this.Fr()&&(this.Hr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var i=t.context,n=t.args;return s.sendDeletion(i,n)}})),this.Vr()&&(this.zr=this.Ur.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,i){return s.setStyleDeclarationCssText(t,i)})))}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){this.qr&&this.qr.activate(),this.Hr&&this.Hr.activate(),this.zr&&this.zr.activate()},t.prototype.stop=function(){this.qr&&this.qr.deactivate(),this.Hr&&this.Hr.deactivate(),this.zr&&this.zr.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,i){var n=this.Jr(t);if((null==n?void 0:n.ownerNode)&&(!z(n.ownerNode)||!this.gi.isSensitiveChild(n.ownerNode))){var r=this.mi.getId(n.ownerNode);if(r){var s=this.Wr(n.cssRules,t.parentRule),e={date:Tt(),type:Li.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,i]};this.fn(e),this.Zi.scanCssString(i)}}},t.prototype.Jr=function(t){var i=t.parentRule;return i&&i.parentStyleSheet},t.prototype.Wr=function(t,i){return csArray.prototype.indexOf.call(csArray.from(t),i)},t.prototype.jr=function(){var t,i;return"function"==typeof(null===(i=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===i?void 0:i.insertRule)},t.prototype.Fr=function(){var t,i;return"function"==typeof(null===(i=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===i?void 0:i.deleteRule)},t.prototype.Vr=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,i){var n=i[0],r=i[1];if(t.ownerNode&&(!z(t.ownerNode)||!this.gi.isSensitiveChild(t.ownerNode))){var s=this.mi.getId(t.ownerNode);if(s){var e={date:Tt(),type:Li.STYLESHEET_RULE_INSERT,args:F(r)?[s,n,r]:[s,n]};this.fn(e),this.Zi.scanCssString(n)}}},t.prototype.sendDeletion=function(t,i){var n=i[0];if(t.ownerNode&&(!z(t.ownerNode)||!this.gi.isSensitiveChild(t.ownerNode))){var r=this.mi.getId(t.ownerNode);if(r){var s={date:Tt(),type:Li.STYLESHEET_RULE_DELETE,args:[r,n]};this.fn(s)}}},ot([W("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),ot([W("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),ot([W("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),Nn=function(){function t(){this.Gr=[],this.Br=1}return t.prototype.identifyNodes=function(t,i){for(var n=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;n.length>0;)for(var s=csArray.prototype.pop.call(n),e=s.root;null!==e;)if(r&&i&&i.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.Br,this.Br+=1,a(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(n,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):A(e)&&this.Kr(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var i,n=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);i=r.nextNode();){var s=i.__contentsquare_identifier;if(s&&n.add(s),a(i)&&csElementshadowRoot.apply(i)){var e=csElementshadowRoot.apply(i);this.getIds(e).forEach((function(t){return n.add(t)}))}}return n},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Gr,t)},t.prototype.Kr=function(t){for(var i=0,n=this.Gr;i<n.length;i++){(0,n[i])(t)}},t}(),Tn="data-cs-mask",Rn=function(){function t(t){this.gi=t}return t.prototype.beforeSerializeChildren=function(t,i){return this.Yr(t)||this.Xr(t)?[]:i},t.prototype.beforeSerializeAttributes=function(t,i){var n=this;return this.Yr(t)&&!g(t)&&(csArray.prototype.push.call(i,this.$r(t)),t.hasAttribute(Tn)||csArray.prototype.push.call(i,document.createAttribute(Tn))),csArray.prototype.filter.call(i,(function(i){return!n.gi.isSensitiveAttribute(t,i.name)}))},t.prototype.Yr=function(t){return a(t)&&this.gi.isSensitive(t)},t.prototype.Xr=function(t){return S(t)&&this.gi.isSensitive(t.host)},t.prototype.$r=function(t){var i=t.getBoundingClientRect(),n=document.createAttribute("style");return n.value="width: ".concat(i.width,"px !important; height: ").concat(i.height,"px !important;"),n},t}(),kn=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},On=null!==(gn=kn(Element))&&void 0!==gn?gn:kn(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(An||(An={}));var In=function(t){this.csId=t.__contentsquare_identifier,this.nodeType=t.nodeType,this.format=An.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Ln,xn=function(t){function i(i){var n,r=t.call(this,i)||this;return r.attributes=[],r.localName=(n=i,On.get.call(n)),r.namespaceURI=i.namespaceURI,r.children=[],r}return ut(i,t),i}(In),_n=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",X],Cn=function(){function t(t,i){this.U=t,this.D=i,this.Zr=[],this.Qr=""}return t.prototype.init=function(){this.Zr=at(at([],_n,!0),this.D.whitelistedAttributes,!0)},t.prototype.beforeSerializeChildren=function(t,i,n){return(y(t)||this.ns(t))&&(n.withAnonymization=!1),i},t.prototype.serializeAttribute=function(t,i,n,r){n.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,n.name,n.value);n.value=s},t.prototype.serializeTextNode=function(t,i,n){i.data=this.getAnonymizedText(n.withAnonymization,t,i.data)},t.prototype.serializeCDATASectionNode=function(t,i,n){var r=t.data;return i.data=n.withAnonymization?mn(r):this.U.anonymizeEmail(r),i},t.prototype.getAnonymizedText=function(t,i,n){if(csNodeparentNode.apply(i)){if(y(csNodeparentNode.apply(i)))return n;if(this.ns(csNodeparentNode.apply(i)))return this.U.anonymizeEmail(n)}return t?mn(n):this.U.anonymizeEmail(n)},t.prototype.getAnonymizedAttributeValue=function(t,i,n,r){return this.rs(n)||a(s=t)&&"ownerSVGElement"in s?r:i?"":this.U.anonymizeEmail(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this.Qr=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Qr},t.prototype.afterSerialize=function(t,i,n){null==i.anonymized&&(i.anonymized=n.withAnonymization),i instanceof xn&&i.shadowRoot&&null==i.shadowRoot.anonymized&&(i.shadowRoot.anonymized=n.withAnonymization)},t.prototype.rs=function(t){return-1!==csArray.prototype.indexOf.call(this.Zr,t)},t.prototype.ns=function(t){return a(t)&&(t.hasAttribute("data-cs-capture")||this.ss(t))},t.prototype.ss=function(t){return!!this.Qr&&G.call(t,this.Qr)},t}(),Mn=function(){function t(t){this.es={},this.us=new fn(t)}return t.prototype.save=function(t){var i=t.key,n=t.metadata,r=t.events;this.us.isThresholdReached()||(this.us.addString(i),"string"==typeof r?this.us.addString(r):this.us.addArrayBuffer(r),this.us.isThresholdReached()||(this.es[i]={metadata:n,events:r}))},t.prototype.recover=function(t){var i=this,n=[];csArray.prototype.forEach.call(this.hs(),(function(t){var r=i.es[t];void 0!==r&&(csArray.prototype.push.call(n,r),i.cs(t))})),0!==n.length&&(t(n),this.us.reset())},t.prototype.hs=function(){return Object.keys(this.es)},t.prototype.cs=function(t){delete this.es[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(Ln||(Ln={}));var Pn=function(){function t(t,i,n){this.fs=t,this.vs=n,this.ls=Ln.NOT_STARTED,this.ds=[],this.ws=0,this.us=new fn(i),this.ys()}return t.prototype.ys=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,this.ps()];case 1:return t.sent(),this.ls===Ln.READY?this.gs():this.vs(this.ds),[2]}}))}))},t.prototype.gs=function(){var t=this;csArray.prototype.forEach.call(this.ds,(function(i){t.save(i)})),this.ds=[]},t.prototype.save=function(t){return ct(this,void 0,void 0,(function(){var i,n,r;return ft(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.ls===Ln.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.ds,t),[2]):this.ls!==Ln.READY||this.us.isThresholdReached()?[2]:(i=t.key,n=t.metadata,r=t.events,this.us.addString(i),"string"==typeof r?this.us.addString(r):this.us.addArrayBuffer(r),this.us.isThresholdReached()?[2]:[4,this.It.put(i,new Response(r,{headers:n}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(i){switch(i.label){case 0:return this.It?[3,2]:[4,this.ps()];case 1:if(i.sent(),this.ls!==Ln.READY)return[2];i.label=2;case 2:return this.As(t),[2]}}))}))},t.prototype.ps=function(){return ct(this,void 0,void 0,(function(){var t;return ft(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.ls=Ln.OPEN_IN_PROGRESS,t=this,[4,window.caches.open(this.fs)];case 1:return t.It=i.sent(),this.ls=Ln.READY,[3,3];case 2:return i.sent(),this.ls=Ln.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.As=function(t){return ct(this,void 0,void 0,(function(){var i,n,r,s,e=this;return ft(this,(function(u){switch(u.label){case 0:return u.trys.push([0,,5,6]),this.ws++,this.ws>1?[2]:[4,this.It.keys()];case 1:return 0===(i=u.sent()).length?[2]:[4,this.It.matchAll()];case 2:return n=u.sent(),r=csArray.prototype.map.call(n,(function(t){var i={};t.headers.forEach((function(t,n){i[n]=t})),delete i["content-type"];var n=i.datatype;return"json"===n||"base64"===n?t.text().then((function(t){return{metadata:i,events:t}})):t.arrayBuffer().then((function(t){return{metadata:i,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return e.It.delete(t)})))];case 4:return u.sent(),t(s),this.us.reset(),[3,6];case 5:return this.ws--,[7];case 6:return[2]}}))}))},t}(),Dn=function(){function t(t){"caches"in window?this.Es(t):this.Ss()}return t.prototype.save=function(t){this.bs.save(t)},t.prototype.recover=function(t){this.bs.recover(t)},t.prototype.Es=function(i){var n=this;this.bs=new Pn(i,t.Ns,(function(t){n.Ss(t)}))},t.prototype.Ss=function(i){var n=this;this.bs=new Mn(t.Ns),i&&csArray.prototype.forEach.call(i,(function(t){n.bs.save(t)}))},t.Ns=16777216,t}(),Un=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.Ts=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ts,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ts,(function(t,i){return ht(ht({},i.getRequestParameters()),t)}),{})},t}(),jn=function(){function t(t,i){this.Rs=t,this.D=i,this.ks=!1,this.Os=null}return t.prototype.start=function(){this.ks=!0,this.Is()},t.prototype.stop=function(){this.ks=!1,this.Ls()},t.prototype.trackActivity=function(){this.ks||(this.ks=!0,this.xs()),this.Ls(),this.Is()},t.prototype.Is=function(){var t=this;this.Os=this.Rs.create("recorded user inactive",(function(){t.ks=!1,t.Ls(),t._s()}),this.D.pendingInactivityTimeout)},t.prototype.Ls=function(){null!==this.Os&&(this.Os.cancel(),this.Os=null)},t.prototype.isUserActive=function(){return this.ks},t.prototype.onActivityStopped=function(t){this._s=t},t.prototype.onActivityResumed=function(t){this.xs=t},t}(),qn=function(){function t(t,i,n){var r=this;this.Cs=t,this.Ms=i,this.hi=n,this.Zt=setTimeout((function(){r.execute()}),this.hi)}return t.prototype.execute=function(){var t=this;J.tryToExecute(this.Cs,(function(){t.Ms()}))()},t.prototype.cancel=function(){clearTimeout(this.Zt)},t}(),Fn=function(){function t(){}return t.prototype.create=function(t,i,n){return new qn(t,i,n)},t}(),Hn=function(){function t(t,i){var n=this;this.Ft=t,this.U=i,this.Ps=[{boundElement:window,type:"resize",listener:function(){return n.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return n.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return n.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){this.Pi(),this.triggerInitialEvents()},t.prototype.stop=function(){this.Fi()},t.prototype.Pi=function(){csArray.prototype.forEach.call(this.Ps,(function(t){return ji(t)}))},t.prototype.Fi=function(){csArray.prototype.forEach.call(this.Ps,(function(t){return qi(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t={type:Li.RESIZE,args:[un.windowWidth(),un.windowHeight()],date:Tt()};this.fn(t)},t.prototype.hashChangeListener=function(){var t={type:Li.HASH_CHANGE,args:[this.U.anonymizeEmail(this.Ft.href)],date:Tt()};this.fn(t)},t.prototype.visibilityChangeListener=function(){var t={type:Li.VISIBILITY_CHANGE,args:[document.visibilityState],date:Tt()};this.fn(t)},ot([W("resize")],t.prototype,"resizeListener",null),ot([W("hashChange")],t.prototype,"hashChangeListener",null),ot([W("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Vn=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.Rn=i,h.Tn=n,h.Ds=r,h.En=s,h.Xi=e,h.Qi=u,h.Us=0,h}return ut(i,t),i.prototype.init=function(){var t=this;this.Rn.onEvent((function(){t.js()})),this.En.after((function(){t.Us+=1,t.qs()})),this.Ds.onActivityStopped((function(){t.qs()})),this.Ds.onActivityResumed((function(){t.Tn.isStarted()||t.Fs()}))},i.prototype.onIframeRecordingUserEvent=function(t){this.js()},i.prototype.onStart=function(){this.Ds.start()},i.prototype.onStop=function(){this.Ds.stop()},i.prototype.qs=function(){this.Tn.isStarted()&&!this.Xi.isDOMSerializationInProgress()&&!this.Ds.isUserActive()&&this.Us>=2&&this.Hs()},i.prototype.js=function(){this.Ds.trackActivity(),this.Us=0},i.prototype.Hs=function(){this.Tn.stop(),this.Qi.emitRecordingStatusChange()},i.prototype.Fs=function(){this.Tn.start(),this.Qi.emitRecordingStatusChange()},i}(dn);function zn(t){return t.replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,i,n,r){if("\\"===i)return t.slice(1);if(r)return r;var s=parseInt(n,16);return 55296<=s&&s<=57343||0===s||s>1114111?"�":String.fromCodePoint(s)}))}var Jn=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Wn(t){return-1===t.indexOf('"')?'"'+t+'"':-1===t.indexOf("'")?"'"+t+"'":t}function Gn(t){var i=[];return function(t,i){var n=t.replace(Jn,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=zn((r||s).trim());return(r?"@import ":"")+"url("+Wn(i(e)||e)+")"}))}(t,(function(t){return i.push(t),t})),i}function Bn(t){var i=csString.prototype.trim.call(t);if(""===t)return[];var n,r=(n=i,csString.prototype.split.call(n,/\s(.+)/)),s=r[0],e=r[1];return e?(L(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),at([Kn(s)],Bn(e),!0)):[Kn(s)]}function Kn(t){return csString.prototype.split.call(t,/,$/)[0]}var Yn,Xn=function(){function t(){}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.serializeElementNode=function(t){this.scanElement(t)},t.prototype.beforeSerializeChildren=function(t,i,n){return this.Vs(t,i),i},t.prototype.scanElement=function(t){this.zs(t)},t.prototype.scanAttribute=function(t,i){this.zs(t,i)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&y(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.Vs=function(t,i){var n=this;y(t)&&rn(i,(function(t){v(t)&&n.scanCssString(t.data)}))},t.prototype.zs=function(t,i){this.Js(t,i),this.Ws(t,i),this.Gs(t,i)},t.prototype.Js=function(t,i){!d(t)||i&&"href"!==i||!t.href||this.Bs(t.href)},t.prototype.Ws=function(t,i){w(t)&&(i&&"src"!==i||!t.src||this.Ks(t.src)||null===t.getAttribute("src")||this.Ys(t.getAttribute("src"))||this.Bs(t.src),i&&"srcset"!==i||!t.srcset||this.Xs(t.srcset))},t.prototype.Gs=function(t,i){if((!i||"style"===i)&&t.hasAttribute("style")){var n=t.getAttribute("style");if("string"!=typeof n)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(n)}},t.prototype.Ys=function(t){return I(t,"#")},t.prototype.Ks=function(t){return I(t,"data:")},t.prototype.scanCssString=function(t){this.$s(Gn(t))},t.prototype.Xs=function(t){this.$s(Bn(t))},t.prototype.$s=function(t){var i=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!i.Ks(t)})),(function(t){return!i.Ys(t)})),(function(t){return Mt(t)})),(function(t){return i.Bs(t)}))},t.prototype.Bs=function(t){var i={date:Tt(),type:Li.STATIC_RESOURCE_URL,args:[t]};this.fn(i)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(Yn||(Yn={}));var $n=function(){function t(t){this.Zs=t.performance}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){this.Qs()&&this.te()},t.prototype.te=function(){var t={args:this.ie(),date:Tt(),type:Li.PERFORMANCE_TIMINGS};this.fn(t)},t.prototype.Qs=function(){return!(!this.Zs||!this.Zs.timing)},t.prototype.ie=function(){return[{performanceTiming:Yn.REQUEST_START,timestamp:this.Zs.timing.requestStart},{performanceTiming:Yn.DOM_INTERACTIVE,timestamp:this.Zs.timing.domInteractive}]},t}(),Zn=function(){function t(t,i){void 0===t&&(t=40),void 0===i&&(i=0),this.ne=t,this.se=i,this.ee=[],this.i=!1,this.ue=0,this.Zt=-1}return t.prototype.schedule=function(t){csArray.prototype.push.call(this.ee,t),this.he()},t.prototype.he=function(){return ct(this,void 0,void 0,(function(){var t,i,n,r=this;return ft(this,(function(s){switch(s.label){case 0:if(this.i)return[2];this.i=!0,window.clearTimeout(this.Zt),s.label=1;case 1:return this.ee.length?this.ue>=this.ne?[4,this.oe()]:[3,3]:[3,4];case 2:s.sent(),this.ue=0,s.label=3;case 3:return t=window.performance.now(),(i=csArray.prototype.shift.call(this.ee))?(this.runTask(i),n=window.performance.now()-t,this.ue+=n,[3,1]):[3,4];case 4:return this.i=!1,this.Zt=window.setTimeout((function(){r.ue=0})),[2]}}))}))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.ee,(function(i){t.runTask(i)})),this.ee=[]},t.prototype.clearQueue=function(){this.ee=[]},t.prototype.oe=function(){var t=this;return new Promise((function(i){return setTimeout((function(){i()}),t.se)}))},t.prototype.isEmpty=function(){return 0===this.ee.length},t.isSupported=function(){return"function"==typeof window.Promise},ot([W("TaskScheduler"),Yi("runTask")],t.prototype,"runTask",null),ot([Yi("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),Qn=function(t){function i(i,n){var r=t.call(this)||this;return r.Ur=i,r.ce=r.handleMutationsSync,r.fe=new Map,n&&n.experimentalMutationObserver&&Zn.isSupported()&&(r.ae=new Zn(n.experimentalMutationObserver.maxProcessingTime,n.experimentalMutationObserver.waitDuration),r.ce=r.handleMutationsAsync),r}return ut(i,t),i.prototype.init=function(){this.ve(),this.le()},i.prototype.le=function(){var t=this;this.de=new csMutationObserver((function(i){t.ce(i)}))},i.prototype.ve=function(){var t=this;this.we()&&(this.ye=this.Ur.createSyncFunctionInterceptor({target:Element.prototype,methodName:"attachShadow",hook:function(i){var n=i.context,r=i.result;return t.handleAttachShadow(n,r)}})),this.pe()&&(this.ge=this.Ur.createSyncFunctionInterceptor({target:Element.prototype,methodName:"createShadowRoot",hook:function(i){var n=i.context,r=i.result;return t.handleAttachShadow(n,r)}}))},i.prototype.onChildListMutation=function(t){this.Ae=t},i.prototype.onCharacterDataMutation=function(t){this.Ee=t},i.prototype.onAttributesMutation=function(t){this.Se=t},i.prototype.onAttachShadowMutation=function(t){this.be=t},i.prototype.observe=function(t,i){this.isStarted&&this.de.observe(t,i)},i.prototype.onStart=function(){this.ye&&this.ye.activate(),this.ge&&this.ge.activate()},i.prototype.onStop=function(){this.ye&&this.ye.deactivate(),this.ge&&this.ge.deactivate(),this.ae&&this.ae.clearQueue(),this.de.disconnect()},i.prototype.flushPendingMutations=function(){if(this.isStarted){this.ae&&this.ae.runPendingTasks();var t=this.de.takeRecords();this.handleMutationsSync(t)}},i.prototype.we=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},i.prototype.pe=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},i.prototype.handleMutationsSync=function(t){var i=Tt(),n=t.length>1?this.Ne(t):t;this.fe.clear(),this.Te(n);for(var r=0;r<n.length;r+=1){var s=n[r];s.date=i,this.processMutation(s,this.fe)}},i.prototype.handleMutationsAsync=function(t){var i=Tt(),n=t.length>1?this.Ne(t):t;this.ae.isEmpty()&&this.fe.clear(),this.Te(n);for(var r=0;r<n.length;r+=1){var s=n[r];s.date=i,this.Re(s,this.fe)}},i.prototype.Ne=function(t){for(var i=new Map,n=0;n<t.length;n+=1){if("attributes"===(a=t[n]).type){var r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e),h=i.get(r),o=on.getAttributeNS(r,s,e)===a.oldValue?"none":"last";if(h)h.has(u)||h.set(u,o);else{var c=new Map;c.set(u,o),i.set(r,c)}}}var f=[];for(n=t.length-1;n>=0;n-=1){var a;if("attributes"===(a=t[n]).type){r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e);"last"===(h=i.get(r)).get(u)&&(csArray.prototype.push.call(f,a),h.set(u,"none"))}else csArray.prototype.push.call(f,a)}return csArray.prototype.reverse.call(f)},i.prototype.handleAttachShadow=function(t,i){this.be({shadowRoot:i,date:Tt(),target:t})},i.prototype.processMutation=function(t,i){switch(t.type){case"attributes":this.Se(t);break;case"characterData":this.Ee(t);break;case"childList":this.Ae(t,i);break;default:throw new Error("mutation type is not supported")}},i.prototype.Re=function(t,i){var n=this;this.ae.schedule((function(){n.processMutation(t,i)}))},i.prototype.Te=function(t){var i=this;csArray.prototype.forEach.call(t,(function(t){rn(t.addedNodes,(function(t){var n=i.fe.get(t);n?i.fe.set(t,n+1):i.fe.set(t,1)}))}))},ot([Yi("handleMutationsSync"),W("handleMutationsSync")],i.prototype,"handleMutationsSync",null),ot([W("handleMutationsAsync")],i.prototype,"handleMutationsAsync",null),ot([Yi("handleAttachShadow")],i.prototype,"handleAttachShadow",null),ot([Yi("processMutation")],i.prototype,"processMutation",null),i}(dn),tr=function(t){function i(i,n,r){var s=t.call(this,i,null==r?void 0:r.experimental)||this;return s.mi=n,s.ke={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},s}return ut(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.Ci()},i.prototype.Ci=function(){var t=this;this.mi.onDocumentIdentified((function(i){t.observe(i,t.ke)}))},i}(Qn);function ir(){var t,i=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===i.length)return"";var n=function(t){return t.length>0?nr(t[0]):""}(i);return""===n?"":(i=function(t,i){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,i)}))}(i,n),0===i.length?"":nr(i[0]))}function nr(t){var i,n="";i=t;var r=(-1!==csString.prototype.indexOf.call(i,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(n=r[1]),n}var rr,sr=function(){function t(){this.Oe=function(t,i){return{context:t,args:i}}}return t.prototype.Ie=function(t,i){t.prototype=i.prototype,Object.defineProperty(t,"toString",{value:function(){return i.toString()}})},t.prototype.createSyncFunctionInterceptor=function(t){var i,n=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(i=Object.getOwnPropertyDescriptor(n,r))||void 0===i?void 0:i.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(n,"'")),null;var o=!1,c=n[r];if("function"==typeof c){var f=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n,r=u(this,t),e=c.apply(this,t);o&&(h&&h.withCallerName&&(n=ir()),J.tryToExecute("SyncFunctionInterceptor",(function(){s(ht(ht({result:e},r),{callerName:n}))}))());return e};this.Ie(f,c),n[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createAsyncFunctionInterceptor=function(t){var i,n=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(i=Object.getOwnPropertyDescriptor(n,r))||void 0===i?void 0:i.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(n,"'")),null;var o=!1,c=n[r];if("function"==typeof c){var f=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return ct(this,void 0,void 0,(function(){var i,n,r;return ft(this,(function(e){return i=u(this,t),n=c.apply(this,t),o&&(h&&h.withCallerName&&(r=ir()),J.tryToExecute("AsyncFunctionInterceptor",(function(){s(ht(ht({result:n},i),{callerName:r}))}))()),[2,n]}))}))};this.Ie(f,c),n[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createDescriptorInterceptor=function(t,i,n){var r=!1,s=Object.getOwnPropertyDescriptor(t,i);if(s){if(!s.configurable)return J.warn("Cannot intercept read only property '".concat(csString(i),"' of object '").concat(t,"'")),null;Object.defineProperty(t,i,ht(ht({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=this,i=arguments,e=s.set.apply(this,i);return r&&J.tryToExecute("DescriptorInterceptor",(function(){n(t,i[0])}))(),e}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t}();!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(rr||(rr={}));var er=function(){function t(){}return t.init=function(t){var i;void 0===t&&(t=document.cookie);var n=null===(i=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===i?void 0:i[1];if(this.Le=new Map,n)for(var r=csString.prototype.split.call(n,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],h=e[1];this.Le.set(u,h||"true")}},t.getBoolean=function(t){var i=this.getString(t);return null!=i&&"false"!==i&&0!==parseInt(i)},t.getString=function(t){var i;return null===(i=this.Le)||void 0===i?void 0:i.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(rr.COMPRESSION_DISABLED)},t.Log=function(i){return function(n,r,s){var e,u=r.toString(),h="".concat(null===(e=n.constructor)||void 0===e?void 0:e.name,".").concat(u),o=s.value;(function(t,i){var n;if(null==t)return!1;return t===i||!!(null===(n=csString.prototype.match.call(t,new RegExp("(^|,)("+i+")(,|$)")))||void 0===n?void 0:n.length)})(t.getString("debugLog"),i)&&(s.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return console.log.apply(console,at([h],t,!1)),o.bind(this).apply(void 0,t)})}},t}();er.init();var ur=function(){function t(){this.xe=[],this._e=[]}return t.prototype.isFull=function(){return this.xe.length>=t.Ce||this._e.length>=t.Ce},t.prototype.isEmpty=function(){return 0===this.xe.length&&0===this._e.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.xe,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this._e,t)},t.prototype.clear=function(){this.xe=[],this._e=[]},t.prototype.flushIdsSeenGlobally=function(){var t=at([],this.xe,!0);return this.xe=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=at([],this._e,!0);return this._e=[],t},t.Ce=20,t}();function hr(t){return"$$"+t}hr.asyncIterator="$$asyncIterator";var or=void 0!==window.Symbol?window.Symbol:hr,cr=!!window.IntersectionObserver&&!!window.IntersectionObserverEntry;function fr(t,i){if(!cr)throw new Error("IntersectionObserver is not supported");if((null==i?void 0:i.delay)<100)throw new Error("Visibility delay should be > 100ms");var n="isVisible"in IntersectionObserverEntry.prototype;return(null==i?void 0:i.trackVisibility)&&(t=n?function(t){return function(i,n){i=csArray.prototype.map.call(i,(function(t){return{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,isVisible:t.isVisible||on.isInViewPort(t.target),rootBounds:t.rootBounds,target:t.target,time:t.time}})),t(i,n)}}(t):function(t){return function(i,n){csArray.prototype.forEach.call(i,(function(t){return t.isVisible=on.isInViewPort(t.target)})),t(i,n)}}(t)),new IntersectionObserver(t,i)}var ar,vr=function(){function t(t,i){var n=this;this.Me=t,this.Pe=or("isVisible"),this.De=or("knownElement"),this.Ue=or("Tracked"),this.je=[],this.qe=!0,this.Fe=function(t){for(var i=0,r=t;i<r.length;i++){var s=r[i];if(s.isVisible){var e=null===s.target[n.Pe];s.target[n.Pe]=!0,e&&!n.He.delay&&n.Ve(s.target,ar.VisibleInViewPort)}else{switch(on.isVisibleInDocument(s.target)?ar.VisibleOutsideViewPort:s.isIntersecting?ar.HiddenByAnother:ar.Hidden){case ar.Hidden:case ar.HiddenByAnother:n.ze(s.target);break;case ar.VisibleOutsideViewPort:n.Ve(s.target,ar.VisibleOutsideViewPort)}}}n.He.delay&&setTimeout((function(){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.isIntersecting&&s.isVisible;s.target[n.Pe]&&e&&n.Ve(s.target,ar.VisibleInViewPort)}}),n.He.delay)},this.He=ht(ht({},lr),i),this.Je()}return t.prototype.onVisibilityChange=function(t){csArray.prototype.push.call(this.je,t)},t.prototype.stop=function(){this.qe=!0},t.prototype.Je=function(){return ct(this,void 0,void 0,(function(){var t,i=this;return ft(this,(function(n){return this.qe=!1,t={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300},this.We=fr(this.Fe,t),this.$i=new csMutationObserver((function(t){return csArray.prototype.forEach.call(t,(function(t){i.Ge(t.target)}))})),this.Me.onElementAvailable((function(t){i.qe||i.Be(t)})),[2]}))}))},t.prototype.Ge=function(t){if(t.isConnected&&!on.areAncestorsHiddenByCSS(t))for(var i,n=this.Me.getElements(t);i=n.next().value;)this.Be(i)},t.prototype.Be=function(t){if(!t[this.De]){this.We.unobserve(t);var i=on.getTopAncestorHiddenByCSS(t);i?this.ze(i):(t[this.De]=!0,this.We.observe(t))}},t.prototype.ze=function(i){delete i[this.Pe],delete i[this.De],this.We.unobserve(i),this.$i.observe(i,{attributeFilter:t.Ke,subtree:!0})},t.prototype.Ve=function(t,i){if(i===ar.VisibleInViewPort&&this.He.trackOnce){if(t[this.Ue])return;t[this.Ue]=!0,this.We.unobserve(t)}csArray.prototype.forEach.call(this.je,(function(n){return n(t,i)}))},t.Ke=["style","class","hidden"],t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(ar||(ar={}));var lr={delay:1e3,trackOnce:!0};function dr(t,i){var n,r,s,e,u=function(){r=null;var i=Tt()-s;e=t.apply(void 0,at([i],n,!1)),s=null},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return s||(s=Tt()),r&&window.clearTimeout(r),n=at([],t,!0),r=window.setTimeout(u,i),e};return h.flushPending=function(){r&&(window.clearTimeout(r),u())},h}function wr(t){return void 0===t&&(t=0),function(i,n,r){var s=r.value,e=!1;r.value=function(){for(var i=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(i,n)}),t))}}}var yr,pr,mr=function(){function t(t){this.Ht=t}return t.prototype.push=function(t){this.Ye||(this.Ye=[],this.flush()),csArray.prototype.push.call(this.Ye,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.Ye,this.Ht),this.Ye=void 0},ot([wr(),W("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),gr=function(){function t(t){var i=this;this.gi=t,this.Xe=!1,this.Ye=new mr((function(t){return t.isConnected&&i.$e(t)}))}return t.prototype.onElementAvailable=function(t){this.$e=t},t.prototype.serializeTextNode=function(t,i,n){if(n.withAnonymization||!this.Xe)return i;var r=this.Ze(t);return r&&this.Ye.push(r),i},t.prototype.getElements=function(t){var i,n,r;return ft(this,(function(s){switch(s.label){case 0:i=on.createDeepTreeWalker(t,NodeFilter.SHOW_TEXT),s.label=1;case 1:return(n=i.nextNode())?(r=this.Ze(n))?[4,r]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.start=function(){this.Xe=!0},t.prototype.stop=function(){this.Xe=!1},t.prototype.Ze=function(t){var i=on.getParentElement(t);return!i||!i.isConnected||this.gi.isSensitive(i)||this.gi.isSensitiveChild(i)||y(i)||g(i)||on.isEmpty(t.data)?null:i},t}(),Ar=function(){function t(t,i){var n=this;this.gi=t,this.Qe=i,this.Xe=!1,this.tu=new Set,this.iu=new Set,this.nu=new ur,this.Ve=function(t,i){switch(i){case ar.VisibleInViewPort:n.onVisibleInViewPort(t);break;case ar.VisibleOutsideViewPort:n.onVisibleOutsideViewPort(t)}n.nu.isFull()&&n.ru()}}return t.isSupported=function(){return!!window.IntersectionObserver},t.prototype.serializeTextNode=function(i,n,r){return this.Me||(J.warn("TextVisibility: Source was not initialized. (".concat(t.isSupported(),")")),this.start()),this.Me.serializeTextNode(i,n,r)},t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){this.Xe||(this.Me=new gr(this.gi),this.Me.start(),this.su=new vr(this.Me,{delay:this.Qe}),this.su.onVisibilityChange(this.Ve),this.Xe=!0)},t.prototype.stop=function(){this.Xe&&(this.Me.stop(),this.su&&this.su.stop(),this.nu.clear(),this.tu.clear(),this.iu.clear(),this.Xe=!1)},t.prototype.flushEvents=function(){this.Xe&&this.ru()},t.prototype.onVisibleInViewPort=function(t){var i=Nn.getId(t);this.onVisibleOutsideViewPort(t),this.tu.has(i)||(this.tu.add(i),this.nu.addIdInViewPort(i))},t.prototype.onVisibleOutsideViewPort=function(t){var i=Nn.getId(t);this.iu.has(i)||(this.iu.add(i),this.nu.addIdInGlobally(i))},t.prototype.ru=function(){if(!this.nu.isEmpty()){var t={visibleGlobally:this.nu.flushIdsSeenGlobally(),visibleInViewPort:this.nu.flushIdsSeenInViewport()},i={type:Li.TEXT_VISIBILITY,date:Tt(),args:[t]};this.fn(i)}},ot([er.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),ot([er.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),Er=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.eu=[],r.hu=[],r}return ut(i,t),i.prototype.setRequestPayloadProvider=function(t){this.ai=t},i.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.eu,t)},i.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.hu,t)},i.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters(),i=vt.toQuery(t),n=this.wi();this.ou(i,n)?csArray.prototype.forEach.call(this.eu,(function(t){return t()})):csArray.prototype.forEach.call(this.hu,(function(t){return t()})),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},i.prototype.wi=function(){return this.ai?this.ai.getRequestPayload():""},i.prototype.ou=function(t,i){return void 0!==csNavigatorsendBeacon&&csNavigatorsendBeacon("".concat(this.domainUri,"/").concat(this.path,"?").concat(t),i)},i}(wt),Sr=function(){function t(t,i,n,r,s,e,u,h,o,c){this.mi=t,this._=i,this.fu=n,this.au=r,this.vu=s,this.lu=e,this.du=u,this.wu=h,this.yu=o,this.ci=c,this.pu=8e3,this.mu=64e3,this.gu=2e3,this.Au=2e3,this.Eu="…",this.Su=document.createElement("div"),this.bu=null,this.Nu=!1,this.Tu="[data-cs-encrypt]"}return t.prototype.setEncryptionSelectors=function(t){B(t,this.Su)&&(this.Tu+=",".concat(t))},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return!(!p(t)&&!m(t)||!G.call(t,this.Tu)||"password"===t.type);case Node.COMMENT_NODE:case Node.TEXT_NODE:var i=t.parentElement;return!!(i&&v(t)&&G.call(i,this.Tu));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.Ru=t},t.prototype.onInputNodeToEncrypt=function(t){this.ku=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.Ou=t},t.prototype.onApiErrorToEncrypt=function(t){this.Iu=t},t.prototype.init=function(){var t=this;this.Lu()&&(this.xu=new TextEncoder,this.vu.onSerializeData((function(i){return t._u(i)})),this.lu.onSerializeData((function(i){return t.Cu(i)})),this.du.onSerializeData((function(i){return t.Mu(i)})),this.wu.onSerializeData((function(i){return t.Pu(i)})),this.yu.onSerializeData((function(i){return t.Du(i)})),this.Uu(this._.encryptionPublicKey))},t.prototype.Uu=function(t){return ct(this,void 0,void 0,(function(){var i;return ft(this,(function(n){switch(n.label){case 0:return[4,this.fu.importKey(t)];case 1:return i=n.sent(),this.Nu=!0,i?(this.bu=i,this.vu.serializeDataFromBuffer(),this.wu.serializeDataFromBuffer()):(this.vu.clear(),this.wu.clear(),J.warn("Fail to import public key '".concat(t,"'"))),this.lu.serializeDataFromBuffer(),this.du.serializeDataFromBuffer(),this.yu.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Lu()&&(this.Nu?this._u(t):this.vu.addData(t))},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Lu()&&(this.Nu?this.Cu(t):this.lu.addData(t))},t.prototype.registerInputNodeToEncrypt=function(t){this.Lu()&&(this.Nu?this.Mu(t):this.du.addData(t))},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Lu()&&(this.Nu?this.Pu(t):this.wu.addData(t))},t.prototype.registerApiErrorToEncrypt=function(t){this.Lu()?this.Nu?this.Du(t):this.yu.addData(t):this.ju(t)},t.prototype.Lu=function(){return this._.encryptionEnabled&&!!this._.encryptionPublicKey&&this._.encryptionPublicKeyId>0&&this.fu.isSupported()&&this.au.isSupported()},t.prototype._u=function(t){var i=this,n=t.textNode,r=this.mi.getId(n);if(r){if(this.bu){var s=ht(ht({},t),{targetId:r,date:Tt()});this.qu(s,(function(t){return t.textNode.data}),(function(){return J.warn("Fail to encrypt text node data")}),(function(t,n){return i.Fu(t,n)}))}}else J.warn("serializeTextNodeToEncrypt: node without identifier")},t.prototype.Cu=function(t){var i=this;if(!this.bu)return this.Hu(t);this.qu(t,(function(t){return t.textNode.data}),(function(){J.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),i.Hu(t)}),(function(t,n){return i.Fu(t,n)}))},t.prototype.Mu=function(t){var i=this;if(!this.bu)return this.Vu(t);this.qu(t,(function(t){return t.targetValue}),(function(){J.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),i.Vu(t)}),(function(t,n){return i.zu(t,n)}))},t.prototype.Pu=function(t){var i=this;this.bu&&this.qu(t,(function(t){return t.userIdentifier}),(function(){J.warn("Fail to encrypt userIdentifier")}),(function(t,n){return i.Ju(t,n)}))},t.prototype.qu=function(t,i,n,r){return ct(this,void 0,void 0,(function(){var s,e;return ft(this,(function(u){switch(u.label){case 0:return s=i(t),[4,this.fu.encrypt({publicKey:this.bu},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(n(t),[2])}}))}))},t.prototype.Hu=function(t){var i=t.targetId,n=t.serializedTextData,r={date:t.date,args:[i,n],type:Li.MUTATION_CHARACTER_DATA};this.Ru(r)},t.prototype.Vu=function(t){var i=t.targetId,n=t.targetValue,r={date:t.date,args:[i,csString.prototype.replace.call(n,/\S/g,"•")],type:Li.INPUT_TEXT};this.ku(r)},t.prototype.Fu=function(t,i){var n=t.targetId,r=t.serializedTextData,s={date:t.date,args:[n,r,i,this._.encryptionPublicKeyId],type:Li.MUTATION_ENCRYPTED_CHARACTER_DATA};this.Ru(s)},t.prototype.zu=function(t,i){var n=t.targetId,r=t.targetValue,s={date:t.date,args:[n,csString.prototype.replace.call(r,/\S/g,"•"),i,this._.encryptionPublicKeyId],type:Li.INPUT_ENCRYPTED_TEXT};this.ku(s)},t.prototype.Ju=function(t,i){var n={type:Li.USER_IDENTIFIER,args:[i,t.keyId],date:t.date};this.Ou(n)},t.prototype.Du=function(t){return ct(this,void 0,void 0,(function(){var i,n,r,s,e,u,h,o,c,f,a;return ft(this,(function(v){switch(v.label){case 0:return this.bu?[4,this.au.generateEncryptionKey()]:(this.ju(t),[2]);case 1:if(i=v.sent(),n=this.au.generateInitializationVector(),null===i||null===n)return this.ju(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Wu(t.customRequestHeaders,this.pu)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.Gu(i,n,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Wu(t.customResponseHeaders,this.pu)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.Gu(i,n,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Wu(t.queryParameters,this.Au)?[3,9]:(t.queryParameters=this.Eu,[3,11]):[3,11];case 9:return e=this.ci.compressSync(t.queryParameters),u=t,[4,this.Gu(i,n,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Wu(t.requestBody,this.mu)?[3,12]:(t.requestBody=this.Eu,[3,14]):[3,14];case 12:return h=this.ci.compressSync(t.requestBody),o=t,[4,this.Gu(i,n,h)];case 13:o.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Wu(t.responseBody,this.gu)?[3,15]:(t.responseBody=this.Eu,[3,17]):[3,17];case 15:return c=this.ci.compressSync(t.responseBody),f=t,[4,this.Gu(i,n,c)];case 16:f.responseBody=v.sent(),v.label=17;case 17:return a=t,[4,this.Bu(i,this.bu)];case 18:return a.secret=v.sent(),[3,20];case 19:return v.sent(),this.ju(t),[2];case 20:return t.initializationVector=this.au.exportInitializationVector(n),t.encryptionKeyId=this._.encryptionPublicKeyId,this.Iu(t),[2]}}))}))},t.prototype.Wu=function(t,i){return this.xu.encode(t).byteLength<=i},t.prototype.ju=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.Iu(t)},t.prototype.Gu=function(t,i,n){return ct(this,void 0,void 0,(function(){var r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.au.encrypt({encryptionKey:t,initializationVector:i},n)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.Bu=function(t,i){return ct(this,void 0,void 0,(function(){var n,r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.au.exportSecret(t)];case 1:if(!(n=s.sent()))throw new Error("Export secret failed");return[4,this.fu.encrypt({publicKey:i},n)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),br=function(){function t(t){this.Ai=t}return t.prototype.serializeTextNode=function(t,i){this.Ai.shouldEncrypt(t)&&(i.data=mn(t.data),this.Ai.registerTextNodeToEncrypt({textNode:t,serializedTextData:i.data}))},t}(),Nr=function(){function t(){this.Ku=[]}return t.prototype.onSerializeData=function(t){this.Yu=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.Ku,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.Ku.length>0;){var t=csArray.prototype.shift.call(this.Ku);this.Yu(t)}},t.prototype.clear=function(){this.Ku=[]},t}(),Tr=function(){function t(t){this.crypto=t,this.Xu=!1}return t.prototype.init=function(){this.Xu=this.canSupportEncryption(),this.Xu&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.Xu},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),Rr="AES-CTR",kr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.exportInitializationVector=function(t){return Oi(t)},i.prototype.exportSecret=function(t){var i;return ct(this,void 0,void 0,(function(){var n;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return n=r.sent(),[2,null!==(i=n.k)&&void 0!==i?i:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.generateEncryptionKey=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:Rr,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},i.prototype.encrypt=function(t,i){return ct(this,void 0,void 0,(function(){var n,r;return ft(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];n={counter:t.initializationVector,name:Rr,length:64},r=this.textEncoder.encode(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(n,t.encryptionKey,r)];case 2:return[2,Oi(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},i}(Tr),Or="RSA-OAEP",Ir=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.importKey=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(i){switch(i.label){case 0:if(!this.isSupported())return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",Ii(t),{name:Or,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,i.sent()];case 3:return i.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.encrypt=function(t,i){return ct(this,void 0,void 0,(function(){var n;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(n=this.$u(i,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:Or},t.publicKey,n)];case 2:return[2,Oi(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.$u=function(t,i){for(var n=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.Zu(e);if(u+n>i)break;r++,n+=u}var h=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(h)},i.prototype.Zu=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},i.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},i}(Tr);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(yr||(yr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(pr||(pr={}));var Lr=function(){function t(t,i,n){this.Qu=t,this.mi=i,this.gi=n}return t.prototype.start=function(){var i=this;this.Qu.subscribe(t.th,(function(t){return i.ih(t)}))},t.prototype.stop=function(){this.Qu.unsubscribe(t.th)},t.prototype.onEvent=function(t){this.fn=t},t.prototype.ih=function(t){if(t.target&&(!a(t.target)||!this.gi.isSensitiveChild(t.target))){var i=this.mi.getId(t.target);if(i)switch(t.type){case yr.DRAG:case yr.FLICK:this.nh(_i.SWIPE,t,i);break;case yr.LONG_PRESS:this.nh(_i.LONG_PRESS,t,i);break;case yr.TAP:this.nh(_i.TAP,t,i);break;case yr.PINCH_IN:this.nh(_i.PINCH_IN,t,i);break;case yr.PINCH_OUT:this.nh(_i.PINCH_OUT,t,i)}else J.warn("processGesture: node without identifier")}},t.prototype.nh=function(t,i,n){var r=this.rh(i,t),s={type:Li.GESTURE_RECOGNITION,args:[n,r],date:Tt()};this.fn(s)},t.prototype.rh=function(t,i){var n={type:i};return t.direction&&(n.direction=t.direction),t.distance&&(n.distance=t.distance),t.velocity&&(n.velocity=t.velocity),n},t.th="RecordingGesturesTracker",t}(),xr=function(t){function i(i){var n=t.call(this,i)||this;return n.name=i.name,n.publicId=i.publicId,n.systemId=i.systemId,n}return ut(i,t),i}(In),_r=function(t){var i;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(i=t.namespaceURI)&&void 0!==i?i:""},Cr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return ut(i,t),i}(In),Mr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return ut(i,t),i}(In),Pr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return ut(i,t),i}(In),Dr=function(t){function i(n){var r=t.call(this,n)||this;return r.baseURI=i.getBaseURI(n),r.children=[],r}return ut(i,t),i.getBaseURI=function(t){var i=t.baseURI;if(null==i){var n=t.getElementsByTagName("base");i=0!==n.length?n[0].href:t.URL}return i},i}(In),Ur=function(t){function i(i){var n=t.call(this,i)||this;return n.mode=i.mode,n.children=[],n}return ut(i,t),i}(In),jr=function(){function t(t){this.processors=t}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,i){var n,r=ht({},i),s=t.nodeType;switch(s){case Node.ELEMENT_NODE:n=this.eh(t,r);break;case Node.TEXT_NODE:n=this.uh(t,r);break;case Node.CDATA_SECTION_NODE:n=this.hh(t,r);break;case Node.COMMENT_NODE:n=this.oh(t,r);break;case Node.DOCUMENT_TYPE_NODE:n=new xr(t);break;case Node.DOCUMENT_NODE:n=this.fh(t,r);break;case Node.DOCUMENT_FRAGMENT_NODE:n=this.ah(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return rn(this.processors,(function(i){var s;null===(s=i.afterSerialize)||void 0===s||s.call(i,t,n,r)})),n},t.prototype.eh=function(t,i){var n,r=new xn(t);rn(this.processors,(function(n){var s;null===(s=n.serializeElementNode)||void 0===s||s.call(n,t,r,i)})),(n=csArray.prototype.push).call.apply(n,at([r.attributes],this.lh(t,i),!1));var s=csElementshadowRoot.apply(t);return s&&(r.shadowRoot=this.yh(s,i)),r.children=this.ph(t,i),r},t.prototype.lh=function(t,i){var n=this,r=nn(t.attributes);return rn(this.processors,(function(n){var s,e=null===(s=null==n?void 0:n.beforeSerializeAttributes)||void 0===s?void 0:s.call(n,t,r,i);e&&(r=e)})),csArray.prototype.map.call(r,(function(r){return n.mh(t,r,i)}))},t.prototype.mh=function(t,i,n){var r=new _r(i);return rn(this.processors,(function(s){var e;null===(e=s.serializeAttribute)||void 0===e||e.call(s,t,i,r,n)})),r},t.prototype.runBeforeSerializeChildrenHook=function(t,i,n){var r=n||csNodechildNodes.apply(t);return r=i.excludedNodes?sn(r,(function(t){return!i.excludedNodes.get(t)})):r,rn(this.processors,(function(n){n.beforeSerializeChildren&&(r=n.beforeSerializeChildren(t,r,i))})),nn(r)},t.prototype.ph=function(t,i){var n=this;return i.skipChildrenSerialization?[]:function(t,i){for(var n=t.length,r=new csArray(n),s=0;s<n;s+=1)r[s]=i(t[s]);return r}(this.runBeforeSerializeChildrenHook(t,i),(function(t){return n.serialize(t,i)}))},t.prototype.uh=function(t,i){var n=new Cr(t);return rn(this.processors,(function(r){var s;null===(s=r.serializeTextNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.hh=function(t,i){var n=new Mr(t);return rn(this.processors,(function(r){var s;null===(s=r.serializeCDATASectionNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.oh=function(t,i){var n=new Pr(t);return rn(this.processors,(function(r){var s;null===(s=r.serializeCommentNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.fh=function(t,i){var n=new Dr(t);return n.children=this.ph(t,i),n},t.prototype.yh=function(t,i){var n=new Ur(t);return rn(this.processors,(function(r){var s;null===(s=r.serializeShadowRootNode)||void 0===s||s.call(r,t,n,i)})),n.children=this.ph(t,i),rn(this.processors,(function(r){var s;null===(s=r.afterSerializeShadowRoot)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.ah=function(t,i){if(t.mode)return this.yh(t,i);throw new Error("Not implemented yet.")},t}();function qr(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Fr=function(){function t(t){this.mi=t,this.gh=!1,this.Ah=new Map,this.Eh={},this.Sh=new Map,this.bh=new Map,this.Nh=new Set,this.Th=new Map}return t.prototype.beforeSerializeChildren=function(t,i){var n=this;return this.gh?sn(i,(function(t){return!n.isAddedNodeDuringSerialization(t)})):i},t.prototype.beforeSerializeAttributes=function(t,i,n){if(!this.gh)return i;var r=this.mi.getId(t);if(!r)return i;var s=this.bh.get(r);return s?csArray.prototype.filter.call(i,(function(t){var i="".concat(t.name).concat(t.namespaceURI||""),n=s.get(i);return!(n&&null===n.value)})):i},t.prototype.serializeTextNode=function(t,i,n){if(this.gh){var r=this.Sh.get(i.csId);r&&(i.data=r)}},t.prototype.serializeCommentNode=function(t,i){if(this.gh){var n=this.Sh.get(i.csId);n&&(i.data=n)}},t.prototype.afterSerialize=function(t,i,n){this.gh&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||n.skipRegisterNode||this.Rh(i,n))},t.prototype.afterSerializeShadowRoot=function(t,i,n){this.gh&&(n.skipRegisterNode||this.Rh(i,n))},t.prototype.enable=function(){this.gh=!0,this.kh()},t.prototype.disable=function(){this.gh=!1,this.kh()},t.prototype.deleteNode=function(t){this.Ah.delete(t)},t.prototype.setDefaultSerializationOptions=function(t){this.Eh=t},t.prototype.getSerializedNodeById=function(t){var i;return null===(i=this.Ah.get(t))||void 0===i?void 0:i.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var i,n=this.mi.getId(t);if(n)return null===(i=this.Ah.get(n))||void 0===i?void 0:i.serializedNode},t.prototype.getOptions=function(t){var i,n=this.mi.getId(t);return n&&(null===(i=this.Ah.get(n))||void 0===i?void 0:i.options)||this.Eh},t.prototype.registerInitialCharacterData=function(t,i){this.Sh.get(t)||this.Sh.set(t,i)},t.prototype.registerInitialAttributes=function(t,i,n,r){var s=this.bh.get(t),e="".concat(n).concat(i||"");if(s){if(s.has(e))return}else s=new Map,this.bh.set(t,s);var u={name:n,namespaceURI:i||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var i,n=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);i=n.nextNode();){var r=this.mi.getId(i);r&&this.Nh.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,i,n){var r=this.mi.getId(n),s=this.mi.getId(t);if(r&&s){var e=this.Th.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s);else{for(var u=[],h=i?this.mi.getId(i):null,o=0;o<csNodechildNodes.apply(n).length;o+=1){var c=this.mi.getId(csNodechildNodes.apply(n)[o]);c&&!this.Nh.has(c)&&(h&&c===h&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===h&&csArray.prototype.push.call(u,s);var f=[s];this.Th.set(r,{childNodeIds:u,removedNodeIds:f})}}},t.prototype.addSerializedChildToParent=function(t,i,n){var r=this.getSerializedNodeByNode(t);r&&Hr(r)&&this.Oh(i,r,n)},t.prototype.isAddedNodeDuringSerialization=function(t){var i=this.mi.getId(t);return!!i&&this.Nh.has(i)},t.prototype.getInitialIndexInParent=function(t,i){var n=this.mi.getId(i),r=this.mi.getId(t);if(!n||!r)return-1;var s=this.Th.get(n);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.kh=function(){this.Ah.clear(),this.Sh.clear(),this.bh.clear(),this.Nh.clear(),this.Th.clear()},t.prototype.Rh=function(t,i){t.csId&&(this.Ih(t.csId,t,i),this.Lh(t.csId,t),this.Ah.set(t.csId,{serializedNode:t,options:i}))},t.prototype.Ih=function(t,i,n){if(function(t){return t instanceof xn}(i)){var r=this.bh.get(t);if(r){for(var s=0,e=i.attributes;s<e.length;s++){var u=e[s],h="".concat(u.name).concat(u.namespaceURI||""),o=r.get(h);o&&null!==o.value&&(u.value=o.value,r.delete(h))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(i.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:n.withAnonymization||!1})}))}}},t.prototype.Oh=function(t,i,n){t>=0?csArray.prototype.splice.call(i.children,t,0,n):"artificial"in n&&csArray.prototype.push.call(i.children,n)},t.prototype.Lh=function(t,i){var n;if(Hr(i)){var r=this.Th.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],h=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==h){var o=null===(n=this.Ah.get(u))||void 0===n?void 0:n.serializedNode;void 0!==o&&this.Oh(h,i,o)}}}},t}();function Hr(t){return"children"in t}var Vr,zr,Jr={taskTime:25},Wr=function(t){function i(i,n,r,s){void 0===r&&(r=new Fr(n)),void 0===s&&(s=Jr);var e=t.call(this,at([r],i,!0))||this;return e.xh=n,e._h=r,e.Ch=s,e.Mh=0,e.Ph=e.Ch.taskTime,e}return ut(i,t),i.prototype.isAsynchronous=function(){return!0},i.prototype.handleMutationAttribute=function(t,i){var n=i[0],r=i[1],s=i[2];this._h.getSerializedNodeById(n)||this._h.registerInitialAttributes(n,r,s,t)},i.prototype.handleMutationCharacterData=function(t,i){var n=i[0];this._h.getSerializedNodeById(n)||this._h.registerInitialCharacterData(n,t.oldValue||"")},i.prototype.serializeMutationChildList=function(t,i,n){var r=this.Dr(t,i,n);return this.Dh(t),{removedNodes:this.Pr(t,i),addedNodes:r}},i.prototype.startSerializeAsync=function(t,i){return void 0===i&&(i={}),ct(this,void 0,void 0,(function(){return ft(this,(function(n){return this.Mh+=1,this._h.setDefaultSerializationOptions(i),[2,this.Uh(t,i)]}))}))},i.prototype.Dr=function(t,i,n){var r=[],s=null;if(t.nextSibling){var e=this.xh.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.xh.getId(t.target),h=0;h<t.addedNodes.length;h+=1){var o=t.addedNodes[h],c=this.serialize(o,{excludedNodes:n,skipRegisterNode:!0,withAnonymization:i}),f=n.get(o);f&&n.set(o,f-1),csArray.prototype.push.call(r,[u,s,c])}return r},i.prototype.Dh=function(t){for(var i=0;i<t.addedNodes.length;i+=1){var n=t.addedNodes[i];this._h.markAddedTreeAsProcessed(n)}},i.prototype.jh=function(t,i){if(!i)return-1;var n=this._h.getInitialIndexInParent(t,i);return n>=0?n:csArray.prototype.indexOf.call(csNodechildNodes.apply(i),t)},i.prototype.Pr=function(t,i){for(var n=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this._h.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.qh(s))this.Fh(s)&&this.Hh(s,i);else{var e=this.serialize(s,{withAnonymization:i});if(this.Fh(t.target)){var u=this.jh(s,t.target);this._h.addSerializedChildToParent(t.target,u,e)}}var h=this.xh.getId(s);h&&csArray.prototype.push.call(n,[h])}return n},i.prototype.Hh=function(t,i){for(var n=0;n<csNodechildNodes.apply(t).length;n+=1){var r=csNodechildNodes.apply(t)[n];if(this.Fh(r))this.Hh(r,i);else if(!this._h.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:i}),e=this.jh(r,t);this._h.addSerializedChildToParent(t,e,s)}}},i.prototype.Fh=function(t){return!!this._h.getSerializedNodeByNode(t)},i.prototype.qh=function(t){return this.Fh(t)||this._h.isAddedNodeDuringSerialization(t)},i.prototype.Uh=function(t,i){return void 0===i&&(i={}),ct(this,void 0,void 0,(function(){var n,r,s,e,u,h,o,c,f,v,l;return ft(this,(function(d){switch(d.label){case 0:return n=this.Mh,r=Tt(),this._h.enable(),i.skipChildrenSerialization=!0,s=[t],[4,qr()];case 1:if(d.sent(),n!==this.Mh)return[2,null];this.Vh=csDate.now(),this.serialize(t,i),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this._h.getOptions(e),h=this.runBeforeSerializeChildrenHook(e,u),o=csArray.prototype.shift.call(h),d.label=3;case 3:return o?csDate.now()-this.Vh>this.Ph?[4,qr()]:[3,5]:[3,6];case 4:if(d.sent(),n!==this.Mh)return[2,null];this.Vh=csDate.now(),d.label=5;case 5:return this.qh(o)?(o=csArray.prototype.shift.call(h),[3,3]):(csArray.prototype.push.call(s,o),c=this.serialize(o,u),f=this.jh(o,e),this._h.addSerializedChildToParent(e,f,c),a(o)&&csElementshadowRoot.apply(o)&&(v=csElementshadowRoot.apply(o),csArray.prototype.push.call(s,v)),o=csArray.prototype.shift.call(h),[3,3]);case 6:return[3,2];case 7:if(!(l=this._h.getSerializedNodeByNode(t)))throw this._h.disable(),new Error("traverseAndSerialize : fail to serialize");return this._h.disable(),[2,{args:[l],date:r,type:Li.INITIAL_DOM}]}}))}))},i}(jr),Gr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.isAsynchronous=function(){return!1},i}(jr),Br=function(){function t(){this.zh=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.zh&&this.isSupported()&&(this.Jh?this.Jh.clear():this.Jh=new Set,this.zh=!0)},t.prototype.stop=function(){this.zh&&(this.zh=!1)},t.prototype.onEvent=function(t){this.fn=t},t.prototype.Wh=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(i){switch(i.label){case 0:return this.Jh.has(t)?[2]:(this.Jh.add(t),[4,window.customElements.whenDefined(t)]);case 1:return i.sent(),this.Gh(t),[2]}}))}))},t.prototype.Gh=function(t){if(this.zh){var i={type:Li.CUSTOM_ELEMENT_REGISTRATION,date:Tt(),args:[t]};this.fn(i)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.Bh=t}return t.prototype.serializeElementNode=function(t){(function(t){return a(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&csArray.prototype.indexOf.call(b,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.Bh.Wh(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},t}(),Kr=function(){function t(t){this.Sn=t}return t.prototype.getRequestPayload=function(){var t=this.Sn.extractEvents(Li.JAVASCRIPT_ERROR,Li.API_ERROR,Li.CUSTOM_ERROR);return t.length?P(t):""},t}(),Yr=function(){function t(){this.Kh=new Map,this.Yh=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,i){if(!y(t))return i;var n=this.Xh(t);if(null===n||0===n.length)return i;if(on.isEmpty(t.textContent)){var r=nn(i);return csArray.prototype.push.call(r,this.$h(n)),r}var s=this.Zh(t);if(s===n.length)return i;for(var e=new csArray(n.length-s),u=s,h=0;u<n.length;u+=1,h+=1)e[h]=n[u];r=nn(i);return csArray.prototype.push.call(r,this.$h(e)),r},t.prototype.Zh=function(t){var i=this.Kh.get(t.textContent);if(i)return i;var n=t.cloneNode(!0);n.textContent=t.textContent,this.Yh.head.appendChild(n);var r=this.Xh(n);return i=r?r.length:0,this.Kh.set(t.textContent,i),this.Yh.head.removeChild(n),i},t.prototype.Xh=function(t){try{var i=t.sheet;return i?i.cssRules||i.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.$h=function(t){var i="";rn(t,(function(t){return i+=t.cssText}));var n=document.createTextNode(i);return n.__contentsquare_artificial=!0,n},t}(),Xr=function(){function t(t,i){this.Ur=t,this.mi=i,this.Qh=1}return t.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){var i=this;t.isAdoptedStyleSheetsSupported()&&(this.io=new Set,this.qr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,r=t.args;i.no(n,r)}}),this.Hr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,r=t.args;i.ro(n,r)}}),this.so=this.Ur.createDescriptorInterceptor(window.ShadowRoot.prototype,"adoptedStyleSheets",this.eo.bind(this)),this.uo=this.Ur.createDescriptorInterceptor(window.Document.prototype,"adoptedStyleSheets",this.eo.bind(this)))},t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){t.isAdoptedStyleSheetsSupported()&&(this.qr&&this.qr.activate(),this.Hr&&this.Hr.activate(),this.so&&this.so.activate(),this.uo&&this.uo.activate())},t.prototype.stop=function(){t.isAdoptedStyleSheetsSupported()&&(this.io.clear(),this.qr&&this.qr.deactivate(),this.Hr&&this.Hr.deactivate(),this.so&&this.so.deactivate(),this.uo&&this.uo.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.eo(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.eo(t,t.adoptedStyleSheets)},t.prototype.eo=function(t,i){var n=this;csArray.prototype.forEach.call(i,(function(t){return n.ho(t)}));var r=csArray.prototype.map.call(i,(function(t){return n.oo(t)})),s=this.mi.getId(t);s&&queueMicrotask((function(){var t={type:Li.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:Tt()};n.fn(t)}))},t.prototype.oo=function(t){return t.__adopted_stylesheet_id},t.prototype.no=function(t,i){var n=i[0],r=i[1],s=this.co(t);if(s){var e={date:Tt(),type:Li.ADOPTED_STYLESHEET_RULE_INSERT,args:F(r)?[s,n,r]:[s,n]};this.fn(e)}},t.prototype.ro=function(t,i){var n=i[0],r=this.co(t);if(r&&r){var s={date:Tt(),type:Li.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,n]};this.fn(s)}},t.prototype.co=function(t){return this.io.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.ho=function(t){if(!this.io.has(t)){var i=this.Qh++;t.__adopted_stylesheet_id=i,this.io.add(t);var n=this.fo(t),r={type:Li.REGISTER_ADOPTED_STYLE_SHEET,args:[i,n],date:Tt()};this.fn(r)}},t.prototype.fo=function(t){var i=[];try{i=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){J.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:i}},t}(),$r=function(){function t(t,i,n){this.ao=t,this.D=i,this.X=n}return t.prototype.shouldUseAnonymization=function(){var t=!this.ao.isAllowedByConsent();return t?this.D.replayRecordingUnmaskedUrlRegex&&this.D.replayRecordingUnmaskedUrlRegex.test(this.X.getAnonymizedUrl())&&(t=!1):this.D.replayRecordingMaskedUrlRegex&&this.D.replayRecordingMaskedUrlRegex.test(this.X.getAnonymizedUrl())&&(t=!0),t},t}(),Zr=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),Qr="v2/recording",ts=["setCapturedElementsSelector"],is=["setPIISelectors"],ns=["isRecording"],rs=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A){this.vo=t,this.Y=i,this.D=n,this.ci=r,this.pi=s,this.ao=e,this.lo=u,this.do=h,this.U=o,this.In=c,this.X=f,this.gi=a,this.xn=v,this._n=l,this.Cn=d,this.Qu=w,this.Pn=y,this.Qi=p,this.wo=m,this.yo=g,this.po=A}return t.prototype.init=function(){var t=this,i=new sr,n=new Nn,r=new Rn(this.gi);this.mo=new Cn(this.U,this.D),this.mo.init();var s=new Xn,e=new tr(i,n,this.D),u=new kr(window.crypto),h=new Ir(window.crypto);h.init(),u.init();var o=new Nr,c=new Nr,f=new Nr,a=new Nr,v=new Nr,l=new Sr(n,this.D,h,u,o,c,f,v,a,this.ci);l.init();var d=[new Yr,r,this.mo,s];if(this.D.encryptionEnabled){var w=new br(l);csArray.prototype.push.call(d,w)}var y=new Xr(i,n);y.init(),Xr.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(d,y);var p=new Ar(this.gi,1e3);this.D.textVisibilityEnabled&&Ar.isSupported()&&csArray.prototype.push.call(d,p);var m,g=new Br;g.isSupported()&&csArray.prototype.push.call(d,g.getProcessor()),m=this.Ao()?new Wr(d,n):new Gr(d),this.Sn=new an;var A=new vn,E=new Un(A,this.lo),S=new Er(this.D.getRecordingUri(),Qr);this.D.useMalkaPipeline&&(E.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Y.getRecordingStates())}}}),S.setRequestParametersProviders(this.lo,{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Y.getRecordingStates()),ct:Si.UNCOMPRESSED,hlm:"true"}}}),S.setRequestPayloadProvider(new Kr(this.Sn)));var b=this.Eo(this.ci);this.So=new $r(this.ao,this.D,this.X),this.Xi=new Sn(m,n,this.mo,l),this.Xi.setAnonymization(this.So.shouldUseAnonymization()),this.Rn=new tn(this.pi,n,this.gi,l),this.Rn.init();var N=new cn(this.Xi,e,s,this.Qi,n,this.gi),T=new Dn("csPersisted"),R=this.Eo(this.ci);this.bo=new yn(R,this.Sn,T,this.D,S),this.To=new wn(this.D,b,this.Sn,E,A,new bn(i,n,this.gi,s),N,this.Rn,new Hn(window.location,this.U),new Lr(this.Qu,n,this.gi),this.In,this.Y,s,new $n(window),this.xn,this._n,this.Cn,p,this.Pn,l,this.bo,g,y),this.Ro=new Vn(this.Rn,N,new jn(new Fn,this.D),b,this.Xi,this.Qi),this.wo.addListeners(this.To),this.yo.addListeners(this.To),this.yo.addListeners(this.Ro),e.init(),this.Ro.init(),this.To.init(),this.do.register(ns,(function(){return t.Y.isReplayRecorded()&&!t.po.isUrlExcludedForSessionReplay()})),this.do.register(ts,(function(i){t.mo.setWhitelistedElementsSelector(i),t.Qi.emitRecordingStatusChange()})),this.do.register(is,(function(i){t.gi.setPIISelectors(i),t.Qi.emitRecordingStatusChange()})),this.do.register(["setEncryptionSelectors"],(function(t){l.setEncryptionSelectors(t)})),this.vo.enableRecordingStatus(this.To,this.gi,this.So,this.mo)},t.prototype.onStartTracking=function(){this.bo.recover(),this.Y.isReplayRecorded()&&!this.po.isUrlExcludedForSessionReplay()&&(this.D.useMalkaPipeline&&this.Y.isTemporarilyRecorded()&&this.To.blockSendingEventsFromQuotaService(),this.ko())},t.prototype.onArtificialPageViewEnd=function(){this.To.clearStates(),!this.Y.isReplayRecorded()||this.po.isUrlExcludedForSessionReplay()||this.Y.isTemporarilyRecorded()||this.bo.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Xi.setAnonymization(this.So.shouldUseAnonymization()),this.Y.isReplayRecorded()&&!this.po.isUrlExcludedForSessionReplay()?(this.D.useMalkaPipeline&&this.Y.isTemporarilyRecorded()&&this.To.blockSendingEventsFromQuotaService(),this.Oo()):this.Io()},t.prototype.onBeforeSessionRenewal=function(){this.To.clearStates(),this.Io()},t.prototype.onOptout=function(){this.Io()},t.prototype.onConsentGranted=function(){this.Xi.setAnonymization(this.So.shouldUseAnonymization()),this.To.triggerConsentGranted(),this.Qi.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.Xi.setAnonymization(this.So.shouldUseAnonymization()),this.To.triggerConsentWithdrawn(),this.Qi.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,i){var n=this;this.D.useMalkaPipeline&&(t===ti.NOT_RECORDED&&i===ii.ETR_OFF?(this.To.clearEvents(),this.Io()):(this.Sn.setRequestParametersFromProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(n.Y.getRecordingStates())}}}),this.To.allowSendingEventsFromQuotaService(),this.Xi.isDOMSerializationInProgress()||this.To.pushEvents()))},t.prototype.onInitialDomStart=function(){this.To.blockSendingEventsFromSerialization(),this.bo.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.Rn.start(),this.To.addInitialDom(t),this.To.allowSendingEventsFromSerialization(),this.bo.allowSendingLastMessage()},t.prototype.ko=function(){this.Ro.start(),this.To.start(),this.bo.start(),this.Qi.emitRecordingStatusChange()},t.prototype.Io=function(){this.Ro.stop(),this.To.stop(),this.bo.stop(),this.Qi.emitRecordingStatusChange()},t.prototype.Oo=function(){this.Io(),this.ko()},t.prototype.Eo=function(t){var i=this.D.useMalkaPipeline?Qr:"recording",n=this.D.useMalkaPipeline?"byteArray":"base64",r=new Pi(this.D.getRecordingUri(),i);return r.setCompressionOptions(t,n),r},t.prototype.Ao=function(){return Zr.isAsyncSerializationSupported()&&this.D.asyncSerializerEnabled},ot([Yi("Recording.onStartTracking")],t.prototype,"onStartTracking",null),ot([Yi("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),ss=function(){function t(t,i,n){this.K=t,this.Y=i,this.D=n,this.Lo=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Lo},t.prototype.setNaturalPageViewSent=function(t){this.Lo=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),i=this.xo(),n=this._o();return t&&i?{projectId:n,sessionKey:t,pageNumber:i}:null},t.prototype.getSessionKey=function(){var t=this.K.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.xo=function(){return this.Y.doesSessionExist()?this.Y.getSession().pageNumber:null},t.prototype._o=function(){return this.D.projectId},t}(),es=function(){function t(t){this.Co=t,this.Mo=[]}return t.prototype.handleCommand=function(t){if(V(t)&&(this.Po(t),this.Co.isNaturalPageViewSent())){var i=this.Co.getTrackingContext();null!==i&&this.Do(t,i)}},t.prototype.Po=function(t){csArray.prototype.push.call(this.Mo,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,i=this.Co.getTrackingContext();null!==i&&csArray.prototype.map.call(this.Mo,(function(n){return t.Do(n,i)}))},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),us=function(){function t(t){this.Co=t,this.Uo=[]}return t.prototype.handleCommand=function(t){return this.Co.isNaturalPageViewSent()?this.jo(t):void this.qo(t)},t.prototype.jo=function(t){var i=this.Co.getSessionKey();return this.Fo(t)&&null!==i&&this.Do(t.callback,i),i},t.prototype.qo=function(t){this.Fo(t)&&csArray.prototype.push.call(this.Uo,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,i=this.Co.getSessionKey();null!==i&&csArray.prototype.forEach.call(this.Uo,(function(n){t.Do(n,i)})),this.Uo=[]},t.prototype.Fo=function(t){return t&&"function"==typeof t.callback},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),hs=function(){function t(t,i){this.Ho=t,this.Co=i}return t.prototype.onIframeIntegrationCallback=function(t){if(this.Co.isNaturalPageViewSent()){var i=this.Co.getTrackingContext();null!==i&&(t.trackingContext=i,this.Ho.sendToChildren(qt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Co.getTrackingContext();if(null!==t){var i={trackingContext:t,initiator:Ut.AfterPageView};this.Ho.sendToChildren(qt.IntegrationCallback,i)}},t}(),os=["afterPageView"],cs=["getSessionKey"],fs=function(){function t(t,i,n,r,s,e){this.K=t,this.Y=i,this.do=n,this.Vo=r,this.Ho=s,this.D=e}return t.prototype.init=function(){var t=this;this.Co=new ss(this.K,this.Y,this.D),this.zo=new es(this.Co),this.Jo=new us(this.Co),this.Wo=new hs(this.Ho,this.Co),this.Vo.addListeners(this.Wo),this.do.register(cs,(function(i){return t.Jo.handleCommand(i)})),this.do.register(os,(function(i){t.zo.handleCommand(i)}))},t.prototype.onAfterNaturalPageView=function(){this.Co.setNaturalPageViewSent(!0),this.Jo.flushPendingCallbacks(),this.zo.executeRegisteredCallbacks(),this.Wo.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.zo.executeRegisteredCallbacks(),this.Wo.sendAfterPageViewCallbackToChildren()},t}(),as=function(){function t(t,i){this.key=csString.prototype.slice.call(t,0,512),this.value=j(i)?csString.prototype.slice.call(i,0,255):i}return t.isValid=function(t,i){return j(t)&&(j(i)||U(i))},t}(),vs=function(t){function i(i,n){var r=t.call(this)||this;return r.Go=i,r.U=n,r.Bo=[],r}return ut(i,t),i.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Bo,(function(i){return t.trackDynamicVariable(i.key,i.value)})),this.Bo=[]},i.prototype.onStop=function(){},i.prototype.trackDynamicVariable=function(t,i){this.isStarted?as.isValid(t,i)&&this.Go.add(new as(this.U.anonymizeEmail(t),this.U.anonymizeEmail(i))):csArray.prototype.push.call(this.Bo,{key:t,value:i})},i}(dn),ls=function(){function t(t){this.ci=t,this.Go=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Go,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Go=[]},t.prototype.onBatchReady=function(t){this.Ko=t},t.prototype.getRequestParameters=function(){for(var t={},i=0,n=this.Go;i<n.length;i++){var r=n[i];t[r.key]=r.value}return{dv:this.ci.compressSync(csJSON.stringify(t)),ct:this.ci.algorithm}},t.prototype.setBatchReadyCall=function(){this.Ko()},ot([wr(),W("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),ds=["trackDynamicVariable"],ws=function(){function t(t,i,n,r,s,e){this.do=t,this.Y=i,this.D=n,this.lo=r,this.ci=s,this.U=e,this.M=new yt(this.D.getTrackerUri(),"dvar"),this.Go=new ls(this.ci),this.Yo=new vs(this.Go,this.U)}return t.prototype.init=function(){var t=this;this.M.setRequestParametersProviders(this.lo,this.Go),this.Y.setDynamicVariablesService(this.Yo),this.Go.onBatchReady((function(){return t.M.send()})),this.M.after((function(){return t.Go.clear()})),this.do.register(ds,(function(i){var n=void 0===i?{}:i,r=n.key,s=n.value;t.Yo.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.Yo.start()},t}(),ys=function(){function t(t,i){this.id=t,this.revenue=i}return t.from=function(i){var n=new t(i.id,parseFloat(i.revenue));return isNaN(parseFloat(i.tax))||(n.tax=parseFloat(i.tax)),isNaN(parseFloat(i.shipping))||(n.shipping=parseFloat(i.shipping)),j(i.currency)&&i.currency.length<=10&&(n.currency=i.currency),n},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t}(),ps=function(){function t(t,i,n,r){this.id=t,this.name=i,this.price=n,this.quantity=r}return t.from=function(i){if(!t.Xo(i))return null;var n=new t(i.id,i.name,parseFloat(i.price),parseInt(i.quantity,10));return F(i.sku)&&(n.sku=i.sku),F(i.category)&&(n.category=i.category),F(i.merchant)&&i.merchant.length>0&&(n.merchant=i.merchant.slice(0,100)),n},t.Xo=function(t){return j(t.id)&&j(t.name)&&D(parseFloat(t.price))&&U(parseInt(t.quantity,10))&&(!F(t.sku)||j(t.sku))&&(!F(t.category)||j(t.category))&&(!F(t.merchant)||j(t.merchant))},t}(),ms=function(){function t(t,i,n){this.U=t,this.$o=i,this.In=n,this.clear()}return t.prototype.addTransaction=function(t){var i=this.U.anonymizeFields(t,["id"]);this.Zo=ys.from(i)},t.prototype.getTransaction=function(){return this.Zo},t.prototype.sendTransaction=function(){this.In.isSessionValid()&&(this.Zo.hasValidRevenue()?this.$o.send():J.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!V(t)){var i=this.U.anonymizeFields(t,["id","name","sku","category"]),n=ps.from(i);null!==n&&csArray.prototype.push.call(this.Qo,n)}},t.prototype.getItems=function(){return this.Qo},t.prototype.clear=function(){this.Zo=ys.from({revenue:NaN}),this.Qo=[]},t.prototype.getRequestParameters=function(){var t={id:this.Zo.id?"".concat(this.Zo.id):"",revenue:"".concat(this.Zo.revenue)};return F(this.Zo.tax)&&(t.tax="".concat(this.Zo.tax)),F(this.Zo.shipping)&&(t.shipping="".concat(this.Zo.shipping)),F(this.Zo.currency)&&(t.cu="".concat(this.Zo.currency)),t.items=window.csJSON.stringify(this.Qo),t},t}(),gs=function(){function t(t,i){this.tc=csString.prototype.slice.call(t,0,100),this.ic=i&&csString.prototype.slice.call(i,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.tc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.ic},enumerable:!1,configurable:!0}),t}(),As=function(){function t(t,i){this.nc=t,this.In=i,this.rc=null}return t.prototype.addToCart=function(t){!this.sc(t.sku)||F(t.merchant)&&!j(t.merchant)||(this.rc=new gs(t.sku,t.merchant),this.sendCartItem())},t.prototype.sc=function(t){return j(t)&&t.length>0},t.prototype.getCartItem=function(){return this.rc},t.prototype.sendCartItem=function(){this.In.isSessionValid()&&this.nc.send()},t.prototype.clear=function(){this.rc=null},t.prototype.getRequestParameters=function(){if(!this.rc)return{};var t={sku:"".concat(this.rc.sku)};return F(this.rc.merchant)&&this.rc.merchant.length>0&&(t.me=this.rc.merchant),t},t}(),Es=["ecommerce:addToCart","ec:cart:add"],Ss=["ecommerce:addTransaction","ec:transaction:create"],bs=["ecommerce:addItem","ec:transaction:items:add"],Ns=["ecommerce:send","ec:transaction:send"],Ts=function(){function t(t,i,n,r,s,e,u){this.D=t,this.K=i,this.Y=n,this.do=r,this.U=s,this.In=e,this.X=u}return t.prototype.init=function(){var t=new yt(this.D.getTrackerUri(),"transaction"),n=new yt(this.D.getTrackerUri(),"addtocart"),r=new ms(this.U,t,this.In),s=new As(n,this.In);t.setRequestParametersProviders(this.D,this.K,this.Y,this.X,r,i),t.after((function(){r.clear()})),n.setRequestParametersProviders(this.D,this.K,this.Y,this.X,s,i),n.after((function(){s.clear()})),this.do.register(Ss,(function(t){r.addTransaction(t)})),this.do.register(bs,(function(t){return r.addItem(t)})),this.do.register(Ns,(function(){return r.sendTransaction()})),this.do.register(Es,(function(t){s.addToCart(t)}))},t}(),Rs=function(){function t(t){this.Zs=t.performance}return t.prototype.getRequestParameters=function(){if(this.ec())return{};var t=this.hc();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.hc=function(){var t=this.Zs.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.ec=function(){return!(this.Zs&&this.Zs.timing&&this.Zs.timing.loadEventEnd>0)},t}();function ks(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(Vr||(Vr={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(zr||(zr={}));var Os,Is=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,i){return this.isEventTypeSupported(i.type)?this.baseEnhanceAnalysisEvent(t,i):i},t}(),Ls=function(t){function i(i,n){var r=t.call(this)||this;return r._=i,r.oc=n,r.supportedEventTypes=[Vr.MOUSEDOWN,Vr.MOUSEUP,Vr.CLICK,Vr.MOUSEOVER,Vr.TAP],r}return ut(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){if(this._.eMerchandisingEnabled){var n=this.oc.getEventTargetPathAndTargetLink(t),r=n.path,s=n.targetLink;i.tgt=r,i.tgtLk=s}return i},i}(Is),xs=function(){function t(){}return t.build=function(t,i,n){return csArray.prototype.reduce.call(n,(function(i,n){return n.enhanceAnalysisEvent(t,i)}),i)},t}(),_s=function(t){function i(i){var n=t.call(this)||this;return n.oc=i,n.supportedEventTypes=[Vr.MOUSEDOWN,Vr.MOUSEUP,Vr.CLICK,Vr.MOUSEOVER,Vr.TAP,Vr.DRAG,Vr.FLICK],n}return ut(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){return i.tgt||(i.tgt=this.oc.getEventTargetPath(t)),i},i}(Is),Cs=function(){function t(t,i,n){this.D=t,this.oc=i,this.Qu=n,this.cc=[new Ls(this.D,this.oc),new _s(this.oc)]}return t.prototype.ih=function(t,i){switch(t.type){case yr.TAP:this.fc(i);break;case yr.FLICK:this.ac(t,i);break;case yr.DRAG:this.vc(t,i)}},t.prototype.fc=function(t){var i={type:Vr.TAP,ts:0,x:0,y:0,tgt:""},n=xs.build(t,i,this.cc);n.tgt!==nt.INVALID_ELEMENT&&this.fn(n)},t.prototype.vc=function(t,i){var n={type:Vr.DRAG,ts:0,fd:t.direction,tgt:""},r=xs.build(i,n,this.cc);r.tgt!==nt.INVALID_ELEMENT&&this.fn(r)},t.prototype.ac=function(t,i){var n={type:Vr.FLICK,ts:0,fd:t.direction,tgt:""},r=xs.build(i,n,this.cc);r.tgt!==nt.INVALID_ELEMENT&&this.fn(r)},t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){var i=this;this.Qu.subscribe(t.th,(function(t,n){return i.ih(t,n)}))},t.prototype.stop=function(){this.Qu.unsubscribe(t.th)},t.th="AnalysisGestureTracker",t}(),Ms="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(H(t)&&function(t){try{if(H(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&z(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Ms))},t.getScrollContainer=function(){return document.querySelector("[".concat(Ms,"]"))}}(Os||(Os={}));var Ps;!function(t){t.getRelativePosition=function(t){var i=Xi(t);if(!(i&&z(i)&&V(i.getBoundingClientRect)&&H(t.pageX)&&H(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var n=i.getBoundingClientRect(),r=t.pageX-n.left-un.windowOffsetX(),s=t.pageY-n.top-un.windowOffsetY();i!==document.documentElement&&(r+=i.scrollLeft,s+=i.scrollTop);var e=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Ps||(Ps={}));var Ds,Us,js,qs,Fs,Hs,Vs=function(t){function i(i,n){var r=t.call(this)||this;return r._=i,r.oc=n,r.supportedEventTypes=[Vr.MOUSEMOVE],r.lc="",r}return ut(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){if(!this._.mouseMoveHeatmapEnabled)return i;var n=Ps.getRelativePosition(t),r=n.valid,s=n.xRel,e=n.yRel;if(r){var u=this.oc.getEventTargetPath(t);u!==nt.INVALID_ELEMENT&&(i.xRel=s,i.yRel=e,u!==this.lc||this._.iframesTracking?(this.lc=u,i.tgtHM=u):i.tgtHM="")}else this.lc="";return i},i}(Is),zs=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.supportedEventTypes=[Vr.CHANGE],i.wc=["text","email","number","search","tel","url","password"],i}return ut(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){var n=Xi(t);return p(n)&&csArray.prototype.indexOf.call(this.wc,n.type)>=0&&(i.isBlank=""===n.value),i},i}(Is),Js=function(){function t(t,i,n){var r=this;this._=t,this.oc=i,this.pi=n,this.yc="select, select *, input, textarea",this.mc="select, select *, input, textarea",this.gc="a, a *, button, button *, select, select *, input, textarea",this.Ac="input, select, textarea",this.Ec=150,this.Sc=400,this.bc=!1,this.Nc=dr((function(t,i){return r.scrollListener(t,i)}),this.Ec),this.Tc=dr((function(t){return r.resizeListener(t)}),this.Ec),this.Rc=Zi((function(t){return r.mouseMoveListener(t)}),this.Sc),this.kc=[{boundElement:window,type:"resize",listener:function(){return r.Tc()}},{boundElement:document,type:"scroll",listener:function(t){return r.Nc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Rc(r.Oc(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Ic=[{boundElement:document,type:"mouseover",listener:this.pi.on(this.gc,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.pi.on(this.gc,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.pi.on(this.yc,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.pi.on(this.yc,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.pi.on(this.mc,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.pi.on(this.Ac,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.pi.on(this.Ac,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.pi.on(this.Ac,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.pi.on(this.Ac,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.pi.on(this.Ac,(function(t){return r.pasteListener(t)}))}],this.cc=[new Ls(this._,this.oc),new Vs(this._,this.oc),new zs,new _s(this.oc)],this.Yi={},this._i()}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){var t=this.Lc();csArray.prototype.forEach.call(t,(function(t){return ji(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.Lc();csArray.prototype.forEach.call(t,(function(t){return qi(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.Nc.flushPending(),this.Tc.flushPending()},t.prototype.Lc=function(){return this.pi.isMatchesSelectorSupported()?at(at([],this.kc,!0),this.Ic,!0):(J.warn("Element.matches is not implemented yet"),this.kc)},t.prototype.resizeListener=function(t){var i=Os.getScrollContainer(),n=z(i);n&&(this.bc=!0);var r={type:Vr.RESIZE,ts:0,x:n?i.clientWidth:un.windowWidth(),y:n?i.clientHeight:un.windowHeight()};void 0!==t&&(r.d=t),this.fn(r)},t.prototype.scrollListener=function(t,i){var n=Os.isEventOnScrollContainer(i);!this.bc&&n&&this.resizeListener();var r={type:Vr.SCROLL,ts:0,x:n?csEventtarget.apply(i).scrollLeft:un.windowOffsetX(),y:n?csEventtarget.apply(i).scrollTop:un.windowOffsetY(),d:t},s=xs.build(i,r,this.cc);this.fn(s)},t.prototype.mouseMoveListener=function(t){var i={type:Vr.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},n=xs.build(t,i,this.cc);this.fn(n)},t.prototype.mouseDownListener=function(t){var i={type:Vr.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.mouseUpListener=function(t){var i={type:Vr.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.clickListener=function(t){var i={type:Vr.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.mouseOverListener=function(t){var i={type:Vr.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.mouseOutListener=function(t){var i={type:Vr.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.oc.getEventTargetPath(t)},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.focusInListener=function(t){var i={type:Vr.FOCUSIN,ts:0,tgt:this.oc.getEventTargetPath(t)},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.focusOutListener=function(t){var i={type:Vr.FOCUSOUT,ts:0,tgt:this.oc.getEventTargetPath(t)},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.changeListener=function(t){var i={type:Vr.CHANGE,ts:0,tgt:this.oc.getEventTargetPath(t)},n=xs.build(t,i,this.cc);this.xc(n)},t.prototype.copyListener=function(t){var i={type:Vr.COMMAND,ts:0,tgt:this.oc.getEventTargetPath(t),key:Ui.COPY};this.xc(i)},t.prototype.cutListener=function(t){var i={type:Vr.COMMAND,ts:0,tgt:this.oc.getEventTargetPath(t),key:Ui.CUT};this.xc(i)},t.prototype.pasteListener=function(t){var i={type:Vr.COMMAND,ts:0,tgt:this.oc.getEventTargetPath(t),key:Ui.PASTE};this.xc(i)},t.prototype.keyUpListener=function(t){var i={type:Vr.KEYUP,ts:0,tgt:this.oc.getEventTargetPath(t),key:this._c(t)};this.xc(i)},t.prototype.keyDownListener=function(t){var i={type:Vr.KEYDOWN,ts:0,tgt:this.oc.getEventTargetPath(t),key:this._c(t)};this.xc(i)},t.prototype._c=function(t){var i=this.Yi[t.key];return void 0===i?Di.ALPHANUMERICAL:i},t.prototype.xc=function(t){ks(t)&&t.tgt!==nt.INVALID_ELEMENT&&this.fn(t)},t.prototype.Oc=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype._i=function(){this.Yi[" "]=Di.SPACE,this.Yi.Spacebar=Di.SPACE,this.Yi.Enter=Di.ENTER,this.Yi.Backspace=Di.BACKSPACE,this.Yi.Delete=Di.DELETE,this.Yi.ArrowUp=Di.ARROWUP,this.Yi.ArrowDown=Di.ARROWDOWN,this.Yi.ArrowLeft=Di.ARROWLEFT,this.Yi.ArrowRight=Di.ARROWRIGHT,this.Yi.Up=Di.ARROWUP,this.Yi.Down=Di.ARROWDOWN,this.Yi.Left=Di.ARROWLEFT,this.Yi.Right=Di.ARROWRIGHT,this.Yi.CapsLock=Di.CAPSLOCK,this.Yi.Shift=Di.SHIFT,this.Yi.Tab=Di.TAB},ot([W("Event handler type: resize")],t.prototype,"resizeListener",null),ot([W("Event handler type: scroll")],t.prototype,"scrollListener",null),ot([W("Event handler type: mouseMove"),Qi()],t.prototype,"mouseMoveListener",null),ot([W("Event handler type: mouseDown"),Qi()],t.prototype,"mouseDownListener",null),ot([W("Event handler type: mouseUp"),Qi()],t.prototype,"mouseUpListener",null),ot([W("Event handler type: click"),Qi()],t.prototype,"clickListener",null),ot([W("Event handler type: mouseOver"),Qi()],t.prototype,"mouseOverListener",null),ot([W("Event handler type: mouseOut"),Qi()],t.prototype,"mouseOutListener",null),ot([W("Event handler type: focusIn")],t.prototype,"focusInListener",null),ot([W("Event handler type: focusOut")],t.prototype,"focusOutListener",null),ot([W("Event handler type: change")],t.prototype,"changeListener",null),ot([W("Event handler type: copy")],t.prototype,"copyListener",null),ot([W("Event handler type: cut")],t.prototype,"cutListener",null),ot([W("Event handler type: paste")],t.prototype,"pasteListener",null),ot([W("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([W("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ws=function(){function t(){var t=this;this.Cc=100,this.Mc=0,this.Pc=un.documentHeight(),this.Dc={boundElement:document,type:"scroll",listener:function(i){return t.maxScrollRateListener(i)}}}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){ji(this.Dc),this.reset()},t.prototype.stop=function(){qi(this.Dc)},t.prototype.reset=function(){this.Pc=un.documentHeight();var t=Os.getScrollContainer();if(null===t)this.Mc=this.Uc(un.documentHeight());else{var i=this.jc(t);this.Mc=this.qc(t,i)}this.fn()},t.prototype.maxScrollRateListener=function(t){var i,n;if(Os.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.jc(r);i=this.Fc(r,s),n=this.qc(r,s)}else i=un.documentHeight(),n=this.Uc(i);(n>this.Mc||i>this.Pc)&&(this.Mc=n,i>this.Pc&&(this.Pc=i),this.fn())},t.prototype.Uc=function(t){var i=Math.round(this.Hc()/t*100);return Math.min(i,this.Cc)},t.prototype.Hc=function(){var t=un.windowHeight();return un.windowOffsetY()+t},t.prototype.qc=function(t,i){var n=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+i,r=this.Fc(t,i),s=Math.round(n/r*100);return Math.min(s,this.Cc)},t.prototype.jc=function(t){var i=window.getComputedStyle(t).paddingTop||"0px";return parseInt(i,10)},t.prototype.Fc=function(t,i){return t.scrollHeight+t.getBoundingClientRect().top+i},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Mc),mdh:"".concat(this.Pc)}},ot([W("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Gs=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m){this.D=t,this.Vc=i,this.Qu=n,this.zc=r,this.Jc=s,this.Wc=e,this.Gc=u,this.Bc=h,this.Kc=o,this.In=c,this.Y=f,this.pr=a,this.Yc=v,this.Xc=l,this.$c=d,this.Zc=w,this.Qc=y,this.tf=p,this.if=m,this.Vn=new ln}return t.prototype.init=function(){var t,i,n,r,s=this;this.Vc.onEvent((function(t){return s.Bn(t)})),this.Qu.onEvent((function(t){return s.Bn(t)})),this.zc.onEvent((function(){s.Wc.setRequestParametersFromProvider(s.zc)})),this.Xc.onEvent((function(t){return s.nf(t)})),this.$c.onEvent((function(){var t,i;null===(t=s.Qc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(i=s.if)||void 0===i||i.flushPendingTextHighlightEvent(),s.Wc.isEmpty()||s.Bc.send()})),null===(t=this.Zc)||void 0===t||t.onEvent((function(t){return s.Bn(t)})),null===(i=this.tf)||void 0===i||i.onEvent((function(t){return s.Bn(t)})),null===(n=this.Qc)||void 0===n||n.onEvent((function(t){return s.Bn(t)})),null===(r=this.if)||void 0===r||r.onEvent((function(t){return s.Bn(t)})),this.rf()},t.prototype.rf=function(){var t=this;this.Gc.setRequestParametersProviders(this.Wc),this.Gc.before((function(){t.Wc.setRequestParametersFromProvider(t.Jc),t.Wc.enableCompression()})),this.Gc.after((function(){t.Wc.setRequestParametersFromProvider(t.Kc)})),this.Gc.setRequestPayloadProvider(this.Wc),this.Gc.afterProvidersCalled((function(){return t.Wc.clearEvents()})),this.Bc.setRequestParametersProviders(this.Wc),this.Bc.setRequestPayloadProvider(this.Wc),this.Bc.before((function(){t.Wc.setRequestParametersFromProvider(t.Jc),t.Wc.disableCompression()})),this.Bc.onBeaconSuccess((function(){t.Wc.clearEvents(),t.Wc.setRequestParametersFromProvider(t.Kc)})),this.Bc.onBeaconFailure((function(){t.sf()}))},t.prototype.initStates=function(){this.Wc.setRequestParametersFromProvider(this.Kc),this.ef()},t.prototype.start=function(t){var i,n,r,s;this.$c.start(),this.Vc.start(),this.zc.start(),this.Qu.start(),null===(i=this.Zc)||void 0===i||i.start(),null===(n=this.if)||void 0===n||n.start(),null===(r=this.tf)||void 0===r||r.start(),t||this.Xc.start(),null===(s=this.Qc)||void 0===s||s.start()},t.prototype.collectInitialEvents=function(){var t,i;null===(t=this.tf)||void 0===t||t.collectInitialEvent(),null===(i=this.Zc)||void 0===i||i.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Qn(t)},t.prototype.nf=function(t){this.Y.hasValidSession()&&this.Qn(t)},t.prototype.Bn=function(t){this.In.isSessionValid()&&this.Qn(t)},t.prototype.Qn=function(t){this.Wc.addEvent(this.uf(t)),this.Wc.isFull()&&this.sendEvents(),this.D.emitDebugEvents&&this.Vn.emit("analysisEvent",ht(ht({},t),{typeName:Vr[t.type]}))},t.prototype.uf=function(t){return t.ts=this.hf(),t},t.prototype.sendEvents=function(){this.Wc.isEmpty()||this.Gc.send()},t.prototype.stop=function(){var t,i,n,r;this.$c.stop(),this.Vc.stop(),this.zc.stop(),this.Qu.stop(),this.Xc.stop(),null===(t=this.Zc)||void 0===t||t.stop(),null===(i=this.tf)||void 0===i||i.stop(),null===(n=this.Qc)||void 0===n||n.stop(),null===(r=this.if)||void 0===r||r.stop(),this.Wc.empty()},t.prototype.clearStates=function(){var t,i;this.Vc.flushPendingDebouncedListeners(),null===(t=this.Qc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(i=this.if)||void 0===i||i.flushPendingTextHighlightEvent(),this.sendEvents(),this.zc.reset(),this.Xc.stop()},t.prototype.ef=function(){this.cf=Tt()},t.prototype.hf=function(){return Tt()-this.cf},t.prototype.sf=function(){try{this.Wc.isEmpty()||this.pr.save({events:this.Wc.getEvents(),metadata:this.Wc.getMetadata()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,i){if(function(t){return t===zr.SUCCESS||t===zr.FAILURE||t===zr.ATTEMPT}(t))if(z(i)){var n={status:t,type:Vr.SUBMIT,ts:0,tgt:this.Yc.getElementPath(i)};n.tgt!==nt.INVALID_ELEMENT&&this.nf(n)}else J.warn("AnalysisEvents Service: invalid element: ".concat(i));else J.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Bs=function(){function t(t){var i=t.events,n=void 0===i?[]:i,r=t.requestParameters,s=void 0===r?{}:r,e=t.stringCompression;this.ff=!0,this.dn=[],this.wn={},this.dn=n,this.wn=s,this.af=e}return t.prototype.getRequestPayload=function(){return this.vf()?this.af.compressSync(csJSON.stringify(this.dn)):csJSON.stringify(this.dn)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.dn,t)},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.wn[n]=i[n])},t.prototype.eventsCount=function(){return this.dn.length},t.prototype.clearEvents=function(){this.dn=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.dn.length},t.prototype.getEvents=function(){return this.dn},t.prototype.getMetadata=function(){return this.wn},t.prototype.getRequestParameters=function(){return ht(ht({},this.wn),{ct:this.vf()?this.af.algorithm:Si.UNCOMPRESSED})},t.prototype.enableCompression=function(){this.ff=!0},t.prototype.disableCompression=function(){this.ff=!1},t.prototype.vf=function(){return this.ff},t}(),Ks=function(){function t(t,i,n){var r=this;this.lf=t,this.pr=i,this.af=n,this.df=function(){"visible"===document.visibilityState&&r.wf()}}return t.prototype.start=function(){this.wf(),this.yf()},t.prototype.stop=function(){this.pf()},t.prototype.getRecoveryStorage=function(){return this.pr},t.prototype.wf=function(){var t=this.pr.recover();if(null!==t){var i=t,n=i.metadata,r=i.events,s=new Bs({events:r,requestParameters:n,stringCompression:this.af});this.lf.setRequestParametersProviders(s),this.lf.before((function(){s.enableCompression()})),this.lf.setRequestPayloadProvider(s),this.lf.afterProvidersCalled((function(){return s.clearEvents()})),this.lf.send()}},t.prototype.yf=function(){document.addEventListener("visibilitychange",this.df)},t.prototype.pf=function(){document.removeEventListener("visibilitychange",this.df)},t}(),Ys=function(){function t(t){this.fs=t}return t.prototype.save=function(t){localStorage.setItem(this.fs,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.fs)},t.prototype.recover=function(){var t=localStorage.getItem(this.fs);if(null===t)return null;var i=null;try{i=csJSON.parse(t)}catch(i){J.error("Invalid item in localStorage.\n         (key:".concat(this.fs,"; value:").concat(t,")"))}finally{this.clear()}return i},t}(),Xs=function(){function t(t){var i=this;this.mf=t,this.gf=function(t){return i.processMetric(t)},this.Xe=!1}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){this.Xe||(this.Xe=!0,this.mf.onFCP(this.gf),this.mf.onCLS(this.gf),this.mf.onFID(this.gf),this.mf.onLCP(this.gf),this.mf.onTTFB(this.gf))},t.prototype.stop=function(){this.Xe=!1},t.prototype.processMetric=function(t){if(this.Xe){var i={type:Vr.PERFORMANCE,name:t.name,val:t.value,ts:0};this.fn(i)}},ot([W("Performance metric handler")],t.prototype,"processMetric",null),t}(),$s=function(t,i){return{name:t,value:void 0===i?-1:i,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Zs=function(t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(i)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},Qs=function(t,i){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),i&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},te=function(t){addEventListener("pageshow",(function(i){i.persisted&&t(i)}),!0)},ie=function(t,i,n){var r;return function(s){i.value>=0&&(s||n)&&(i.delta=i.value-(r||0),(i.delta||void 0===r)&&(r=i.value,t(i)))}},ne=-1,re=function(){return"hidden"===document.visibilityState?0:1/0},se=function(){Qs((function(t){var i=t.timeStamp;ne=i}),!0)},ee=function(){return ne<0&&(ne=re(),se(),te((function(){setTimeout((function(){ne=re(),se()}),0)}))),{get firstHiddenTime(){return ne}}},ue=function(t,i){var n,r=ee(),s=$s("FCP"),e=function(t){"first-contentful-paint"===t.name&&(h&&h.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=t.startTime,s.entries.push(t),n(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],h=u?null:Zs("paint",e);(u||h)&&(n=ie(t,s,i),u&&e(u),te((function(r){s=$s("FCP"),n=ie(t,s,i),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,n(!0)}))}))})))},he=!1,oe=-1,ce={passive:!0,capture:!0},fe=new Date,ae=function(t,i){Ds||(Ds=i,Us=t,js=new Date,de(removeEventListener),ve())},ve=function(){if(Us>=0&&Us<js-fe){var t={entryType:"first-input",name:Ds.type,target:Ds.target,cancelable:Ds.cancelable,startTime:Ds.timeStamp,processingStart:Ds.timeStamp+Us};qs.forEach((function(i){i(t)})),qs=[]}},le=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var n=function(){ae(t,i),s()},r=function(){s()},s=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(i,t):ae(i,t)}},de=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,le,ce)}))},we={},ye=function(){function t(){}return t.prototype.onFCP=function(t){ue(t,!0)},t.prototype.onCLS=function(t){!function(t,i){he||(ue((function(t){oe=t.value})),he=!0);var n,r=function(i){oe>-1&&t(i)},s=$s("CLS",0),e=0,u=[],h=function(t){if(!t.hadRecentInput){var i=u[0],r=u[u.length-1];e&&t.startTime-r.startTime<1e3&&t.startTime-i.startTime<5e3?(e+=t.value,u.push(t)):(e=t.value,u=[t]),e>s.value&&(s.value=e,s.entries=u,n())}},o=Zs("layout-shift",h);o&&(n=ie(r,s,i),Qs((function(){o.takeRecords().map(h),n(!0)})),te((function(){e=0,oe=-1,s=$s("CLS",0),n=ie(r,s,i)})))}(t,!0)},t.prototype.onFID=function(t){!function(t,i){var n,r=ee(),s=$s("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),n(!0))},u=Zs("first-input",e);n=ie(t,s,i),u&&Qs((function(){u.takeRecords().map(e),u.disconnect()}),!0),u&&te((function(){var r;s=$s("FID"),n=ie(t,s,i),qs=[],Us=-1,Ds=null,de(addEventListener),r=e,qs.push(r),ve()}))}(t,!0)},t.prototype.onLCP=function(t){!function(t,i){var n,r=ee(),s=$s("LCP"),e=function(t){var i=t.startTime;i<r.firstHiddenTime&&(s.value=i,s.entries.push(t),n())},u=Zs("largest-contentful-paint",e);if(u){n=ie(t,s,i);var h=function(){we[s.id]||(u.takeRecords().map(e),u.disconnect(),we[s.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,h,{once:!0,capture:!0})})),Qs(h,!0),te((function(r){s=$s("LCP"),n=ie(t,s,i),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,we[s.id]=!0,n(!0)}))}))}))}}(t,!0)},t.prototype.onTTFB=function(t){!function(t){var i,n=$s("TTFB");i=function(){try{var i=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,i={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(i[n]=Math.max(t[n]-t.navigationStart,0));return i}();if(n.value=n.delta=i.responseStart,n.value<0||n.value>performance.now())return;n.entries=[i],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(i,0):addEventListener("load",(function(){return setTimeout(i,0)}))}(t)},t}(),pe=function(){function t(){var t=this;this.Xe=!1,this.Af=function(i){try{if(("pagehide"===i.type||"visibilitychange"===i.type)&&"hidden"!==document.visibilityState)return;t.Ef()}catch(t){}}}return t.prototype.start=function(){this.Xe||(this.Xe=!0,this.yf(),this.Sf(),this.bf())},t.prototype.stop=function(){this.Xe&&(this.Xe=!1,this.pf(),this.Nf(),this.Tf())},t.prototype.onEvent=function(t){this.Ef=t},t.prototype.yf=function(){document.addEventListener("visibilitychange",this.Af)},t.prototype.pf=function(){document.removeEventListener("visibilitychange",this.Af)},t.prototype.Sf=function(){window.addEventListener("pagehide",this.Af)},t.prototype.Nf=function(){window.removeEventListener("pagehide",this.Af)},t.prototype.bf=function(){window.addEventListener("blur",this.Af)},t.prototype.Tf=function(){window.removeEventListener("blur",this.Af)},t}(),me=function(){function t(){var t=this;this.Ec=500,this.Rf=500,this.kf=dr((function(i,n){return t.onResize(n)}),this.Ec),this.Of=null,this.If=!0}return t.prototype.start=function(){var i=this;this.Of||(this.Lf=t.scheduleStart((function(){i.run()}),this.Rf))},t.prototype.stop=function(){this.Of&&(qi(this.Of),this.Of=null),this.Lf()},t.scheduleStart=function(t,i){var n=0,r=null,s=function(){n=window.setTimeout((function(){n=0,t()}),i)};return"visible"===document.visibilityState?s():ji(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),qi(r),r=null)}}),function(){n>0&&(window.clearTimeout(n),n=0),null!==r&&(qi(r),r=null)}},t.prototype.onEvent=function(t){this.fn=t},t.prototype.run=function(){var i,n=this;0!==window.outerWidth&&(this.xf=this._f=t.Cf(),this.Mf=window.devicePixelRatio,this.Pf=this.Mf,this.Df=window.outerWidth,this.Uf=window.innerWidth,this.jf=window.innerHeight,this.qf=(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1,this.Of={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return n.kf(t)}},ji(this.Of),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.Of){var i={type:Vr.ZOOM,ts:0,val:t.Ff(this._f)};if(this.fn(i),window.visualViewport){var n={type:Vr.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.fn(n)}}},t.prototype.onResize=function(t){var i,n=(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1;this.Hf(n),window.visualViewport&&this.Vf(n),this.Df=window.outerWidth,this.Uf=window.innerWidth,this.jf=window.innerHeight,this.qf=n},t.prototype.Hf=function(i){var n;window.devicePixelRatio!==this.Pf?(n=window.devicePixelRatio/this.Mf*this.xf,this.Pf=window.devicePixelRatio,this.If=!1):this.Df===window.outerWidth&&this.jf!==window.innerHeight&&this.Uf!==window.innerWidth&&this.qf===i&&this.If&&(n=window.outerWidth/window.innerWidth/i);if(void 0!==n){this._f=n;var r={type:Vr.ZOOM,ts:0,val:t.Ff(n)};this.fn(r)}},t.prototype.Vf=function(t){if(t!==this.qf){var i={type:Vr.VIEWPORT_SCALE,ts:0,val:t};this.fn(i)}},t.Cf=function(){return t.zf()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.zf=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.Ff=function(t){return 100*t<<0},ot([W("ZoomTracker.run")],t.prototype,"run",null),ot([W("ZoomTracker.onResize")],t.prototype,"onResize",null),ot([W("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}();!function(t){t[t.MUTATION=0]="MUTATION",t[t.WINDOW_PROPERTY=1]="WINDOW_PROPERTY"}(Fs||(Fs={})),function(t){t[t.COLOR_ENHANCER=0]="COLOR_ENHANCER",t[t.OTHER=1]="OTHER"}(Hs||(Hs={}));var ge,Ae=function(){function t(t){this.Jf=t,this.Wf=500}return t.prototype.start=function(){var i=this;this.Lf=t.Gf((function(){i.initialDetection()}),this.Wf)},t.prototype.stop=function(){var t;null===(t=this.$i)||void 0===t||t.disconnect(),this.$i=null,this.Lf()},t.prototype.onEvent=function(t){this.fn=t},t.prototype.initialDetection=function(){var i=this;this.Bf=[],this.Kf=[],csArray.prototype.forEach.call(this.Jf,(function(n){for(var r=n.id,s=!1,e={id:r,attributesBasedDetectors:{},childListBasedDetectors:{}},u=0,h=n.detectors;u<h.length;u++){var o=h[u],c=o.type;switch(c){case Fs.MUTATION:(s=!!document.querySelector(o.selector))||t.Yf(e,o);break;case Fs.WINDOW_PROPERTY:s=o.property in window;break;default:}if(s){csArray.prototype.push.call(i.Kf,r);break}}s||csArray.prototype.push.call(i.Bf,e)})),this.le(),this.collectInitialEvent()},t.prototype.collectInitialEvent=function(){this.Kf.length>0&&this.Xf(this.Kf)},t.prototype.Xf=function(t){var i={type:Vr.EXTENSION,ts:0,ids:at([],t,!0)};this.fn(i)},t.prototype.le=function(){var t=this;0!==this.Bf.length&&(this.$i=new csMutationObserver((function(i){return t.handleMutations(i)})),this.$i.observe(document.documentElement,{childList:!1,attributes:!0}),this.$i.observe(document.head,{childList:!0,attributes:!1}),this.$i.observe(document.body,{childList:!0,attributes:!0}))},t.prototype.handleMutations=function(t){var i,n=this,r=[];csArray.prototype.forEach.call(t,(function(t){"childList"===t.type?n.handleChildListMutation(t,r):"attributes"===t.type&&n.handleAttributesMutation(t,r)})),r.length>0&&((i=csArray.prototype.push).call.apply(i,at([this.Kf],r,!1)),this.Xf(r)),0===this.Bf.length&&this.stop()},t.prototype.handleChildListMutation=function(i,n){var r=this;if(0!==i.addedNodes.length){var s=i.target;rn(i.addedNodes,(function(i){if(a(i))for(var e=0;e<r.Bf.length;e++){var u=r.Bf[e];if(t.$f(u,s.localName))if(null==u.childListBasedDetectors[s.localName]?void 0:csArray.prototype.some.call(u.childListBasedDetectors[s.localName],(function(t){return i.matches(t.selector)}))){csArray.prototype.push.call(n,u.id),csArray.prototype.splice.call(r.Bf,e,1);break}}}))}},t.prototype.handleAttributesMutation=function(i,n){for(var r=i.target,s=0;s<this.Bf.length;s++){var e=this.Bf[s];if(t.Zf(e,r.localName))if(null==e.attributesBasedDetectors[r.localName]?void 0:csArray.prototype.some.call(e.attributesBasedDetectors[r.localName],(function(t){return r.matches(t.selector)}))){csArray.prototype.push.call(n,e.id),csArray.prototype.splice.call(this.Bf,s,1);break}}},t.$f=function(t,i){return i in t.childListBasedDetectors},t.Zf=function(t,i){return i in t.attributesBasedDetectors},t.Yf=function(t,i){var n=t.attributesBasedDetectors;"childList"===i.mutationType&&(n=t.childListBasedDetectors),i.target in n?csArray.prototype.push.call(n[i.target],i):n[i.target]=[i]},t.Gf=function(t,i){var n,r=0,s=function(){r=0,t()};return window.requestIdleCallback?(r=window.requestIdleCallback(s,{timeout:i}),n=window.cancelIdleCallback):(r=window.setTimeout(s,i),n=window.clearTimeout),function(){r>0&&(n.call(window,r),r=0)}},t.isSupported=function(){return/Chrome/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)},ot([W("ExtensionsTracker.initialDetection")],t.prototype,"initialDetection",null),ot([W("ExtensionsTracker.handleMutations")],t.prototype,"handleMutations",null),ot([W("ExtensionsTracker.handleChildListMutation")],t.prototype,"handleChildListMutation",null),ot([W("ExtensionsTracker.handleAttributesMutation")],t.prototype,"handleAttributesMutation",null),t}(),Ee=[{id:Hs.COLOR_ENHANCER,detectors:[{type:Fs.MUTATION,target:"html",selector:"html[data-darkreader-mode]",mutationType:"attributes"},{type:Fs.MUTATION,target:"body",selector:"#hc_extension_svg_filters",mutationType:"childList"},{type:Fs.MUTATION,target:"body",selector:"#cvd_extension_svg_filter",mutationType:"childList"},{type:Fs.MUTATION,target:"html",selector:"html[class~=ss-shaded-scrollbars]",mutationType:"attributes"}]},{id:Hs.OTHER,detectors:[{type:Fs.MUTATION,target:"body",selector:"th-rw4gc",mutationType:"childList"},{type:Fs.MUTATION,target:"head",selector:'link[href*="cdnapgfjopgaggbmfgbiinmmbdcglnam"]',mutationType:"childList"},{type:Fs.MUTATION,target:"head",selector:'link[href*="dgmanlpmmkibanfdgjocnabmcaclkmod"]',mutationType:"childList"},{type:Fs.WINDOW_PROPERTY,property:"cvox"},{type:Fs.MUTATION,target:"body",selector:"#highlighter[style*=box-shadow]",mutationType:"childList"},{type:Fs.MUTATION,target:"head",selector:'link[href*="ddnpdohiipephjpdpohikkamhdikbldp"]',mutationType:"childList"},{type:Fs.MUTATION,target:"head",selector:'link[href*="emgfmfgandmhbgleikkoaebngboghfpe"]',mutationType:"childList"}]}],Se=function(){function t(){this.Qf=0,this.ta=0,this.ia=0,this.na=0,this.ra=0}return t.prototype.incrementFocusWithKeyboard=function(){this.Qf+=1},t.prototype.incrementFocusWithMouse=function(){this.ta+=1},t.prototype.incrementClickWithKeyboard=function(){this.ia+=1},t.prototype.incrementClickWithMouse=function(){this.na+=1},t.prototype.incrementScrollWithKeyboard=function(){this.ra+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.Qf,mouseCounter:this.ta},click:{keyboardCounter:this.ia,mouseCounter:this.na},scroll:{keyboardCounter:this.ra}}},t.prototype.reset=function(){this.Qf=0,this.ta=0,this.ia=0,this.na=0,this.ra=0},t}(),be=function(){function t(){var t=this;this.sa=Zi((function(){return t.ea()}),5e3),this.Nc=dr((function(i,n){return t.scrollListener()}),150),this.Qf=!1,this.ia=!1,this.ra=!1,this.ua=[{boundElement:document,type:"click",listener:function(i){return t.clickListener(i)}},{boundElement:document,type:"focus",listener:function(i){return t.focusListener(i)}},{boundElement:document,type:"keydown",listener:function(i){return t.keyDownListener(i)}},{boundElement:document,type:"mousedown",listener:function(){return t.ha()}},{boundElement:document,type:"mouseover",listener:function(i){return t.mouseOverListener(i)}},{boundElement:document,type:"scroll",listener:function(){return t.Nc()}},{boundElement:document,type:"wheel",listener:function(){return t.oa()}}],this.ca=new Se}return t.prototype.start=function(){csArray.prototype.forEach.call(this.ua,(function(t){return ji(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.ua,(function(t){return qi(t)}))},t.prototype.onEvent=function(t){this.fn=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.Nc.flushPending(),this.sa.flushPending()},t.prototype.clickListener=function(t){var i=Xi(t);z(i)&&on.isElementFocusable(i)&&(this.ia?(this.ca.incrementClickWithKeyboard(),this.ia=!1):this.ca.incrementClickWithMouse(),this.sa())},t.prototype.focusListener=function(t){var i=Xi(t);this.Qf&&z(i)&&on.isElementFocusable(i)&&(this.ca.incrementFocusWithKeyboard(),this.sa(),this.Qf=!1)},t.prototype.keyDownListener=function(t){this.Qf||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.Qf=!0),this.ia||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.ia=!0),this.ra||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.ra=!0)},t.prototype.ha=function(){this.Qf=!1,this.ia=!1},t.prototype.mouseOverListener=function(t){var i=Xi(t);z(i)&&on.isElementFocusable(i)&&(this.ca.incrementFocusWithMouse(),this.sa())},t.prototype.scrollListener=function(){this.ra&&(this.ca.incrementScrollWithKeyboard(),this.sa(),this.ra=!1)},t.prototype.oa=function(){this.ra=!1},t.prototype.ea=function(){var t={type:Vr.KEYBOARD_NAVIGATION,ts:0,val:this.ca.buildKeyboardNavigationCounters()};this.fn(t),this.ca.reset()},ot([W("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),ot([W("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),ot([W("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([W("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),ot([W("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Ne=function(){function t(){var t=this;this.fa=null,this.aa=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.aa,(function(t){return ji(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.aa,(function(t){return qi(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.fa&&this.va(this.fa)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.fa){var i=this.fa,n=i.anchorNode,r=i.anchorOffset;if(n===t.anchorNode&&r===t.anchorOffset){if(v(t.anchorNode)){var s=t.toString().length;s>this.fa.length&&(this.fa.length=s)}}else this.va(this.fa)}else t.anchorNode&&v(t.anchorNode)&&0!==t.toString().length&&(this.fa={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.fa&&this.da()},t.prototype.va=function(t){var i={type:Vr.TEXT_HIGHLIGHT,ts:0,len:t.length};this.fn(i),this.da()},t.prototype.da=function(){this.fa=null},ot([W("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),ot([W("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),Te="v2/events",Re=["submit"],ke=function(){function t(t,i,n,r,s,e,u,h,o,c){this.D=t,this.K=i,this.Y=n,this.Yc=r,this.pi=s,this.do=e,this.In=u,this.Qu=h,this.Vo=o,this.af=c}return t.prototype.init=function(){var t=this,i=new Bs({stringCompression:this.af});this.wa=this.ya(),this.pa=this.ma(i,this.wa.getRecoveryStorage()),this.pa.init(),this.Vo.addListeners(this.pa),this.do.register(Re,(function(i,n){t.pa.pushSubmitEvent(i,n)}))},t.prototype.onStartTracking=function(t){this.wa.start(),this.pa.start(t)},t.prototype.onAfterNaturalPageView=function(){this.pa.initStates()},t.prototype.onAfterArtificialPageView=function(){this.pa.initStates(),this.pa.collectInitialEvents()},t.prototype.onBeforeArtificialPageView=function(){this.pa.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.pa.clearStates(),this.pa.stop(),this.wa.stop()},t.prototype.onOptout=function(){this.pa.stop(),this.wa.stop()},t.prototype.ma=function(t,n){var r,s,e,u,h=new Rs(window),o=new Ws,c=new Js(this.D,this.Yc,this.pi),f=new Cs(this.D,this.Yc,this.Qu),a=new Xs(new ye),v=new pe;this.D.accessibilityEnabled&&(r=new me,s=new be,e=new Ne,Ae.isSupported()&&(u=new Ae(Ee)));var l=new Pi(this.D.getTrackerUri(),Te),d=new Er(this.D.getTrackerUri(),Te),w=new Un(this.D,this.K,this.Y,o,h,i);return new Gs(this.D,c,f,o,h,t,l,d,w,this.In,this.Y,n,this.Yc,a,v,r,s,u,e)},t.prototype.ya=function(){var t=new Pi(this.D.getTrackerUri(),Te);return new Ks(t,new Ys("csAnalysisEventsPersisted"),this.af)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(ge||(ge={}));var Oe=function(){function t(){this.ga=ge.Natural}return t.prototype.setPageViewType=function(t){this.ga=t},t.prototype.getRequestParameters=function(){return{pvt:this.ga}},t}(),Ie=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Qi=i,e.Aa=n,e.X=r,e.Ea=s,e}return ut(i,t),i.prototype.init=function(){this.Sa()},i.prototype.onStart=function(t){t?this.ba():this.Na()},i.prototype.onStop=function(){},i.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Ta(t):this.X.overridePath(t)},i.prototype.Na=function(){this.Ea.setPageViewType(ge.Natural),this.Qi.emitBeforeNaturalPageView(),this.Aa.send(),this.Qi.emitAfterNaturalPageView()},i.prototype.ba=function(){this.Ea.setPageViewType(ge.Renewal),this.Qi.emitBeforeNaturalPageView(),this.Aa.send(),this.Qi.emitAfterNaturalPageView()},i.prototype.Ta=function(t){this.Ea.setPageViewType(ge.Artificial),this.Qi.emitArtificialPageViewEnd(),t&&this.X.overridePath(t),this.Qi.emitBeforeArtificialPageView(),this.Aa.send(),this.Qi.emitAfterArtificialPageView()},i.prototype.Sa=function(){var t=this;window.addEventListener("pageshow",(function(i){t.isStarted&&i.persisted&&t.Ta()}))},i}(dn),Le=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function xe(){return{la:Le}}var _e,Ce=function(){function t(t){this.Ra=t,this.ka=[],this.Oa=!1}return t.prototype.getRequestParameters=function(){return{dr:this.Ia()}},t.prototype.addUrlMaskingPattern=function(t){var i=this.Ra.getUrlMaskingPattern(t);csArray.prototype.push.call(this.ka,i)},t.prototype.enableRemoveQueryString=function(){this.Oa=!0},t.prototype.disableRemoveQueryString=function(){this.Oa=!1},t.prototype.Ia=function(){var t=this.Oa?this.Ra.removeQueryString(this.La()):this.La();return this.Ra.anonymizeUrl(t,this.ka)},t.prototype.La=function(){var t="";try{t=window.top.document.referrer}catch(i){if(window.parent)try{t=window.parent.document.referrer}catch(i){t=""}}return""===t&&(t=document.referrer),t},t}(),Me=function(){function t(t){this.Y=t,this.xa=this._a()&&"currentScript"in document}return t.prototype.Ca=function(){var t=document.currentScript;if(!t)return null;var i=window.performance.getEntriesByName(t.src,"resource")[0];return!i||this.Ma(i)?null:Math.round(i.responseEnd-i.fetchStart)},t.prototype.Ma=function(t){var i=t.transferSize;return void 0!==i?0===i||i<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.xa||1!==this.xo())return{};var t=this.Ca();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.xo=function(){var t;return(null===(t=this.Y.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype._a=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Pe=["trackPageview"],De=["setPath"],Ue=["setQuery"],je=["referrer:maskUrl"],qe=["referrer:removeQueryString"],Fe=["referrer:keepQueryString"],He=function(){function t(t,i,n,r,s,e,u,h,o,c){this.D=t,this.do=i,this.Qi=n,this.K=r,this.Y=s,this.ao=e,this.Tt=u,this.Ra=h,this.X=o,this.po=c}return t.prototype.init=function(){var t=this,r=new yt(this.D.getTrackerUri(),"pageview"),s=new Oe;this.Pa=new Ie(this.Qi,r,this.X,s);var e=new Ce(this.Ra);this.Pa.init(),r.setRequestParametersProviders(this.D,this.K,this.Y,un,e,this.X,this.ao,n,this.Tt,i,s,new Me(this.Y),this.po),this.do.register(Pe,(function(i){return t.Pa.triggerArtificialPageView(i)})),this.do.register(De,(function(i){return t.X.overridePath(i)})),this.do.register(Ue,(function(i){return t.X.overrideQuery(i)})),this.do.register(je,(function(t){return e.addUrlMaskingPattern(t)})),this.do.register(qe,(function(){return e.enableRemoveQueryString()})),this.do.register(Fe,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Pa.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Pa.stop()},t}(),Ve=function(){function t(t){this.oc=t}return t.prototype.on=function(t,i){var n=this;return function(r){n.oc.hasValidEventTarget(r)&&n.Da(r,t)&&i(r)}},t.prototype.Da=function(t,i){var n=Xi(t);return G.call(n,i)},t.prototype.isMatchesSelectorSupported=function(){return!!G},t}(),ze=function(){function t(){}return t.prototype.onLoad=function(t){this.vi=t},t.prototype.onLoadCallbackExecute=function(){this.vi()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Ua(t)},t.prototype.Ua=function(t){function i(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i))},ot([W("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Je=["clearSession"],We=["extendSession"],Ge=function(){function t(t,i,n){this.K=t,this.Y=i,this.do=n}return t.prototype.init=function(){var t=this;this.do.register(Je,(function(){return t.Y.removeSession()})),this.do.register(We,(function(){return t.Y.extendSessionPeriodically()}))},t.prototype.onBeforeNaturalPageView=function(){this.K.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.Y.abortQuotaServiceRequest(),this.K.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onOptout=function(){this.K.removeVisitor(),this.Y.removeSession()},t.prototype.onRecordingStateChange=function(t,i){this.Y.updateRecordingState(t,i)},t}(),Be=function(){function t(t,i){this.Y=t,this.K=i,this.ja=!1}return t.prototype.onSessionExpired=function(t){this.qa=t},t.prototype.isSessionValid=function(){if(this.ja)return!0;var t=this.Y.hasValidSession(),i=!1;return this.Y.pollCacheRefreshEvent()&&(i=this.K.isSessionRenewed()),t&&!i||!this.Fa()?t:(this.Ha=Tt(),this.ja=!0,this.qa(),this.ja=!1,this.Y.hasValidSession())},t.prototype.Fa=function(){return!F(this.Ha)||Tt()-this.Ha>6e4},t}(),Ke=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.X=i,h.Va=n,h.$c=r,h.za=s,h.Ja=e,h.Wa=u,h}return ut(i,t),i.prototype.init=function(){this.za.init(),this.Ga(),this.Ba(),this.Ka()},i.prototype.collectInitialProducts=function(){var t=this.Va.collectProductsAndAnchors(),i=t.products,n=t.anchors;this.Ya(n),this.za.send(this.Xa(i))},i.prototype.Ya=function(t){var i=this;csArray.prototype.forEach.call(t,(function(t){i.Wa.track(t)}))},i.prototype.onIframeEmerchandisingMessage=function(t){this.za.send(t)},i.prototype.clearState=function(){this.Wa.clearState(),this.Va.flushEvents(),this.Ja.isEmpty()||this.$a(!1)},i.prototype.initStates=function(){this.za.initStates()},i.prototype.onStart=function(){this.$c.start(),this.Va.start(),this.Wa.start()},i.prototype.onStop=function(){this.$c.stop(),this.Va.stop(),this.Wa.stop()},i.prototype.Ka=function(){var t=this;this.Wa.init(),this.Wa.onProductExposed((function(i){t.Ja.addProductExposure(i),t.Ja.isFull()&&t.$a(!1)}))},i.prototype.Xa=function(t,i){void 0===i&&(i=[]);var n={products:t,targetUrl:this.X.getAnonymizedUrl(),windowWidth:un.windowWidth(),windowHeight:un.windowHeight()};return i.length>0&&(n.exposures=i),n},i.prototype.Ga=function(){var t=this;this.Va.init(),this.Va.onProductsDetection((function(i){var n=i.products,r=i.anchors;t.Ja.addProducts(n),t.Ja.isFull()&&t.$a(!1),t.Ya(r)}))},i.prototype.Ba=function(){var t=this;this.$c.onEvent((function(){t.Wa.clearState(),t.Za()}))},i.prototype.Za=function(){this.Ja.isEmpty()||this.$a(!0)},i.prototype.$a=function(t){var i=this.Xa(this.Ja.getProducts(),this.Ja.getProductsExposure());t?this.za.sendBeacon(i):this.za.send(i)},i}(dn),Ye=function(){function t(t,i){this.configuration=t,this.projectPathComputation=i}return t.prototype.collectProductsAndAnchors=function(t){void 0===t&&(t=document);for(var i=[],n=this.getAllValidAnchors(this.configuration.hostnames,t),r=0,s=n;r<s.length;r++){var e=s[r];csArray.prototype.push.call(i,this.buildProductFromAnchor(e))}return{products:i,anchors:n}},t.prototype.getAllValidAnchors=function(t,i){var n=this;return void 0===i&&(i=document),csArray.prototype.filter.call(on.findAllElements("a",i),(function(i){return n.isAnchorValid(i,t)}))},t.prototype.isAnchorValid=function(t,i){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Dt(t.hostname,i)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},ot([Yi("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),Xe=function(t){function i(i,n,r){var s=t.call(this,i,n)||this;return s.$i=r,s.Qa={subtree:!0,childList:!0},s}return ut(i,t),i.prototype.init=function(){this.le()},i.prototype.start=function(){this.$i.start(),this.tv()},i.prototype.stop=function(){this.$i.stop()},i.prototype.flushEvents=function(){this.$i.flushPendingMutations()},i.prototype.onProductsDetection=function(t){this.iv=t},i.prototype.le=function(){this.$i.init(),this.nv()},i.prototype.nv=function(){var t=this;this.$i.onChildListMutation((function(i){return t.rv(i)})),this.$i.onAttachShadowMutation((function(i){return t.sv(i)}))},i.prototype.rv=function(t){for(var i=0;i<t.addedNodes.length;i+=1){var n=t.addedNodes[i];if(l(n)&&this.isAnchorValid(n,this.configuration.hostnames)){var r=this.buildProductFromAnchor(n);this.ev({products:[r],anchors:[n]})}else if(z(n)){var s=this.collectProductsAndAnchors(n);this.ev(s)}}},i.prototype.sv=function(t){var i=t.shadowRoot;this.ev(this.collectProductsAndAnchors(i)),this.$i.observe(i,this.Qa)},i.prototype.ev=function(t){t.products.length>0&&this.iv(t)},i.prototype.tv=function(){this.$i.observe(document,this.Qa),this.uv(document)},i.prototype.uv=function(t){var i=this,n=en.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){t.shadowRoot&&i.$i.observe(t.shadowRoot,i.Qa)}))},i}(Ye),$e=function(){function t(i){void 0===i&&(i=t.hv),this.wn={},this.ov=[],this.cv=[],this.fv=new fn(i)}return t.prototype.addProducts=function(t){var i;this.fv.addString(csJSON.stringify(t)),(i=csArray.prototype.push).call.apply(i,at([this.ov],t,!1))},t.prototype.addProductExposure=function(t){this.fv.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.cv,t)},t.prototype.reset=function(){this.fv.reset(),this.ov=[],this.cv=[]},t.prototype.isEmpty=function(){return 0===this.ov.length&&0===this.cv.length},t.prototype.isFull=function(){return this.fv.isThresholdReached()},t.prototype.getProducts=function(){return this.ov},t.prototype.getProductsExposure=function(){return this.cv},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.wn[n]=i[n])},t.prototype.getRequestParameters=function(){return ht({},this.wn)},t.hv=10240,t}(),Ze=function(){function t(){var t=this;this.Xe=!1,this.av="function"==typeof window.IntersectionObserver,this.isGetRootNodeSupported="getRootNode"in Node.prototype,this.vv=function(){"visible"===document.visibilityState?t.lv():t.wv()}}return t.prototype.init=function(){this.av&&this.isGetRootNodeSupported&&(this.yv=new Map,this.pv=new Map,this.mv(),this.le())},t.prototype.start=function(){!this.Xe&&this.av&&this.isGetRootNodeSupported&&(document.addEventListener("visibilitychange",this.vv),this.Xe=!0)},t.prototype.stop=function(){this.Xe&&(this.We.disconnect(),this.$i.disconnect(),this.yv.clear(),this.pv.clear(),this.Xe=!1,document.removeEventListener("visibilitychange",this.vv))},t.prototype.lv=function(){var t=this;this.pv.forEach((function(i,n){t.We.unobserve(n),t.We.observe(n)}))},t.prototype.wv=function(){var t=this;this.pv.forEach((function(i,n){var r=!1;t.pv.get(n)!==r&&(t.pv.set(n,r),t.gv(n,r))}))},t.prototype.onEvent=function(t){this.Av=t},t.prototype.track=function(t){this.Xe&&(this.We.observe(t),this.Ev(t))},t.prototype.mv=function(){var i=this;this.We=new IntersectionObserver((function(t){i.Sv(t)}),t.bv)},t.prototype.le=function(){var t=this;this.$i=new csMutationObserver((function(i){csArray.prototype.forEach.call(i,(function(i){return t.Ge(i)}))}))},t.prototype.Ev=function(i){var n=i.getRootNode();this.$i.observe(n,t.Nv),this.Tv(i,n)},t.prototype.Tv=function(t,i){var n=this.yv.get(i);n?n.add(t):this.yv.set(i,new Set([t]))},t.prototype.Sv=function(t){for(var i=0,n=t;i<n.length;i++){var r=n[i];this.processElementVisiblityFromIntersection(r.target,r.isIntersecting)}},t.prototype.Ge=function(t){var i=this,n=t.target.getRootNode(),r=this.yv.get(n);r&&r.forEach((function(t){i.We.unobserve(t),i.We.observe(t)}))},t.prototype.processElementVisiblityFromIntersection=function(t,i){var n="visible"===document.visibilityState,r=this.pv.get(t),s=n&&i&&on.isVisibleInViewportInForeground(t);r!==s&&(this.pv.set(t,s),this.gv(t,s))},t.prototype.gv=function(t,i){this.Av({target:t,isVisible:i})},t.prototype.isSupported=function(){return this.av&&this.isGetRootNodeSupported},t.Rv=["style","class","hidden"],t.Nv={subtree:!0,childList:!0,attributes:!0,attributeFilter:t.Rv},t.bv={root:null,rootMargin:"0px",threshold:1},ot([Yi("processElementVisiblityFromIntersection")],t.prototype,"processElementVisiblityFromIntersection",null),t}(),Qe=function(t){function i(i,n){var r=t.call(this)||this;return r.D=i,r.su=n,r.kv=r.su.isSupported(),r}return ut(i,t),i.prototype.init=function(){this.kv&&(this.Ov=new Map,this.Iv())},i.prototype.onProductExposed=function(t){this.Lv=t},i.prototype.track=function(t){this.kv&&this.su.track(t)},i.prototype.clearState=function(){this.kv&&this.isStarted&&this.xv()},i.prototype.onStart=function(){this.kv&&this.su.start()},i.prototype.onStop=function(){this.kv&&(this.xv(),this.su.stop())},i.prototype.Iv=function(){var t=this;this.su.init(),this.su.onEvent((function(i){var n=i.target;i.isVisible?t._v(n):t.Cv(n)}))},i.prototype.xv=function(){var t=this;this.Ov.forEach((function(i,n){t.Cv(n)})),this.Ov.clear()},i.prototype._v=function(t){this.Ov.set(t,Tt())},i.prototype.Cv=function(t){var n=this.Ov.get(t);if(void 0!==n){var r=Tt()-n;this.Ov.delete(t),r<i.EXPOSURE_DURATION_THRESHOLD||this.Lv(this.Mv(t,r))}},i.prototype.Mv=function(t,i){var n=t.href;return{targetPath:nt.getElementPath(t,{dynamicIdRegex:this.D.dynamicIdRegex}),duration:i,href:n}},i.EXPOSURE_DURATION_THRESHOLD=150,i}(dn),tu=function(){function t(t,i,n,r,s){this.Pv=t,this.Dv=i,this.Ja=n,this.ci=r,this.Uv=s}return t.prototype.init=function(){this.jv(),this.qv()},t.prototype.initStates=function(){this.Fv(!0)},t.prototype.send=function(t){this.Hv(t)},t.prototype.sendBeacon=function(t){this.Vv(t)},t.prototype.jv=function(){var t=this,i=er.isCompressionEnabled();i&&this.zv(),this.Pv.afterProvidersCalled((function(){t.Ja.reset()})),this.Pv.setRequestParametersProviders(this.Ja),this.Pv.after((function(){t.Fv(i)}))},t.prototype.Fv=function(t){var i=this;this.Ja.setRequestParametersFromProvider(new Un(this.Uv,{getRequestParameters:function(){return{ct:t?i.ci.algorithm:Si.UNCOMPRESSED}}}))},t.prototype.qv=function(){var t=this;this.Dv.before((function(){t.Fv(!1)})),this.Dv.setRequestParametersProviders(this.Ja),this.Dv.after((function(){t.Ja.reset(),t.Fv(!0)}))},t.prototype.Hv=function(t){this.Pv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Pv.send()},t.prototype.Vv=function(t){this.Dv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Dv.send()},t.prototype.zv=function(){this.Pv.setCompressionOptions(this.ci,"base64"),this.Pv.setRequestHeader({name:"Content-type",value:"text/plain; charset=UTF-8"})},t}(),iu="display",nu=function(){function t(t,i,n,r,s,e,u,h){this.D=t,this.Yc=i,this.ci=n,this.Jv=r,this.Tt=s,this.X=e,this.Vo=u,this.do=h}return t.prototype.init=function(){var t=new Qn(new sr),i=new Xe(this.D,this.Yc,t),n=new pe,r=new Ze,s=new Qe(this.D,r),e=new $e,u=new tu(new Pi(this.D.getTrackerUri(),iu),new Er(this.D.getTrackerUri(),iu),e,this.ci,new Un(this.Jv,this.Tt));this.Wv=new Ke(this.X,i,n,u,e,s),this.Wv.init(),this.Vo.addListeners(this.Wv)},t.prototype.onStartTracking=function(){this.Wv.start(),this.Wv.collectInitialProducts()},t.prototype.onArtificialPageViewEnd=function(){this.Wv.clearState()},t.prototype.onAfterNaturalPageView=function(){this.Wv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Wv.initStates(),this.Wv.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.Wv.clearState(),this.Wv.stop()},t.prototype.onOptout=function(){this.Wv.stop()},ot([Yi("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function ru(t){return t.tagDeploymentMode===_e.DualCollectionReview||t.tagDeploymentMode===_e.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(_e||(_e={}));var su,eu=function(){function t(t,i,n,r){this.D=t,this.K=i,this.Y=n,this.gi=r}return t.prototype.init=function(){this.Gv=!1,this.Bv=!1},t.prototype.loadClicktalePtc=function(){!this.Gv&&this.D.ptcDomain&&this.D.ptcGuid&&this.Kv()},t.prototype.getSessionData=function(){var t=this.D.projectId,i=this.K.getVisitor();null==i&&J.warn("Visitor is null. This happen when a snippet try to get Session Data before the tag was initialized");var n=null!=i?i:{};return{projectId:t,userId:n.id,sessionNumber:n.visitsCount,pageNumber:this.Y.getSession().pageNumber}},t.prototype.startDataCollection=function(t){this.Bv||(this.D.tagDeploymentMode===_e.LoadClicktalePtc&&this.Yv()&&this.gi.initCTPII(),ru(this.D)&&(this.gi.initCTPII(),t(),this.Bv=!0))},t.prototype.Yv=function(){return this.D.useMalkaPipeline&&this.Y.isReplayRecorded()},t.prototype.Kv=function(){this.Gv=!0;var t=this.Xv();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.Xv=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.D.ptcSha512&&this.D.ptcSnapshotPath?(t.integrity="sha512-".concat(this.D.ptcSha512),t.src="https://".concat(this.D.ptcDomain,"/").concat(this.D.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.D.ptcDomain,"/ptc/").concat(this.D.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(su||(su={}));var uu,hu=function(){function t(t,i,n,r,s,e,u){this.D=t,this.K=i,this.Y=n,this.X=r,this.do=s,this.$v=e,this.gi=u}return t.prototype.init=function(){var t=this;this.Zv=new eu(this.D,this.K,this.Y,this.gi),this.Zv.init(),this.Qv(),this.do.register(["getSessionData"],(function(){return t.Zv.getSessionData()})),this.do.register(["startDataCollection"],(function(){t.Zv.startDataCollection(t.$v)}))},t.prototype.Qv=function(){ru(this.D)&&this.Zv.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.D.tagDeploymentMode===_e.LoadClicktalePtc&&(!this.D.useMalkaPipeline&&this.Y.isReplayRecorded()||this.Zv.loadClicktalePtc())},t.prototype.onAfterArtificialPageView=function(){!this.Y.isReplayRecorded()&&su.isRecording()&&this.D.tagDeploymentMode===_e.LoadClicktalePtc&&su.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.Y.isReplayRecorded()&&su.isRecording()&&su.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onOptout=function(){su.isRecording()&&su.stopRecording()},t}(),ou="@user-identifier@",cu=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.D=i,u.tl=n,u.ci=r,u.il=s,u.nl=e,u.rl=[],u.sl=[],u}return ut(i,t),i.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.rl,(function(i){return t.trackPageEvent(i)})),this.rl=[],csArray.prototype.forEach.call(this.sl,(function(i){return t.trackEventTriggerRecording(i)})),this.sl=[]},i.prototype.onStop=function(){},i.prototype.trackPageEvent=function(t){this.isStarted?i.el(t)&&(this.ul(t)?this.nl.isSupported()&&this.hl(t):this.ol(t)):csArray.prototype.push.call(this.rl,t)},i.prototype.ul=function(t){return I(t,ou)},i.prototype.hl=function(t){return ct(this,void 0,void 0,(function(){var i,n;return ft(this,(function(r){switch(r.label){case 0:return this.D.customHashIdEnabled?(i=csString.prototype.slice.call(t,ou.length),this.nl.isValidInput(i)?[4,this.nl.digest(i,this.D.projectId)]:(J.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(n=r.sent())?(this.cl={eventName:n,isETR:!1,isCustomHashId:!0},this.al()):J.warn("Page event: unable to compute customHashId"),this.D.encryptionEnabled?(this.il.emitUserIdentifierEvent(i),[2]):[2]}}))}))},i.prototype.ol=function(t){this.il.emitPageEvent(t),this.cl={eventName:t,isETR:!1,isCustomHashId:!1},this.al(),this.D.tagDeploymentMode===_e.LoadClicktalePtc&&su.sendPageEvent(t)},i.prototype.trackEventTriggerRecording=function(t){this.isStarted?i.el(t)&&(this.D.useMalkaPipeline&&this.D.malkaEtrEnabled?this.vl(t):this.ll(t)):csArray.prototype.push.call(this.sl,t)},i.prototype.vl=function(t){I(t,"@ETP@")?this.il.emitEventTriggerRecording(t,ni.ETR_PAGE):this.il.emitEventTriggerRecording(t,ni.ETR_SESSION),this.cl={eventName:t,isETR:!0,isCustomHashId:!1},this.al()},i.prototype.ll=function(t){(function(t){return ru(t)||t.tagDeploymentMode===_e.LoadClicktalePtc})(this.D)&&(this.il.emitEventTriggerRecording(t,ni.ETR_LEGACY),this.cl={eventName:t,isETR:!0,isCustomHashId:!1},this.al(),this.D.tagDeploymentMode===_e.LoadClicktalePtc&&su.sendEventTriggerRecording(t))},i.prototype.getRequestParameters=function(){return{value:this.ci.compressSync(this.cl.eventName),ct:this.ci.algorithm,isETR:"".concat(this.cl.isETR),isCustomHashId:"".concat(this.cl.isCustomHashId)}},i.prototype.al=function(){this.tl.send()},i.el=function(t){return j(t)&&!!csString.prototype.trim.call(t)},i}(dn),fu=function(){function t(t){this.dl=t,this.wl=!1}return t.prototype.init=function(){this.wl=this.yl(),this.wl&&(this.xu=new TextEncoder)},t.prototype.yl=function(){return!!(this.dl&&this.dl.subtle&&this.dl.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.wl},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.pl=function(t,i){var n=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(n,":").concat(i)},t.prototype.digest=function(t,i){return ct(this,void 0,void 0,(function(){var n,r,s;return ft(this,(function(e){switch(e.label){case 0:if(!this.wl)return[2,null];n=this.pl(t,i),r=this.xu.encode(n),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return s=e.sent(),[2,(u=s,h=csArray.from(new Uint8Array(u)),csArray.prototype.join.call(csArray.prototype.map.call(h,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return e.sent(),[2,null];case 4:return[2]}var u,h}))}))},t}(),au=["trackPageEvent"],vu=["trackEventTriggerRecording"],lu=function(){function t(t,i,n,r,s){this.D=t,this.do=i,this.ci=n,this.lo=r,this.il=s}return t.prototype.init=function(){var t=this,i=new yt(this.D.getTrackerUri(),"pageEvent"),n=new fu(window.crypto);n.init(),this.ml=new cu(this.D,i,this.ci,this.il,n),i.setRequestParametersProviders(this.ml,this.lo),this.do.register(au,(function(i){t.ml.trackPageEvent(i)})),this.do.register(vu,(function(i){t.ml.trackEventTriggerRecording(i)}))},t.prototype.onStartTracking=function(){this.ml.start()},t}();!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(uu||(uu={}));var du,wu=["value","checked","src","data","alt"],yu=["[data-cs-mask]","img[src^='data:']","script"],pu=[{selector:"input:not([type=button])",attrName:"value"}],mu=[".ctHidden, textarea"],gu=[{selector:".ctHidden, input:not([type=button])",attrName:"value"}],Au=function(){function t(t){var i;this.D=t,this.gl=[],this.Al="",this.Su=document.createElement("div"),ru(this.D)||(this.Al=this.El(this.Al,yu),(i=csArray.prototype.push).call.apply(i,at([this.gl],pu,!1)))}return t.prototype.setPIISelectors=function(t){var i,n=this;if(t){if(null===(i=t.PIISelectors)||void 0===i?void 0:i.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return B(t,n.Su)}));this.Al=this.El(this.Al,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&B(t.selector,n.Su)&&!n.Sl(t)&&csArray.prototype.push.call(n.gl,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.Al],Attributes:this.gl}},t.prototype.initCTPII=function(){var t,i,n,r=this;if(this.Al=this.El(this.Al,mu),null===(n=null===(i=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===i?void 0:i.DOM)||void 0===n?void 0:n.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return B(t,r.Su)}));this.Al=this.El(this.Al,s),(t=csArray.prototype.push).call.apply(t,at([this.gl],gu,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&B(t.rule,r.Su)&&csArray.prototype.push.call(r.gl,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,i){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(wu,i)||this.bl(t,i,this.gl)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===uu.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===uu.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var i=this;if(a(t)||A(t)){this.Nl(t);var n=en.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){return t.shadowRoot&&i.Nl(t.shadowRoot)}))}},t.prototype.unidentifySensitiveNodes=function(t){var i=this;if(a(t)||A(t)){this.Tl(t);var n=en.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){return t.shadowRoot&&i.Tl(t.shadowRoot)}))}},t.prototype.Tl=function(t){for(var i,n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);i=n.nextNode();)"__contentsquare_sensitive"in i&&delete i.__contentsquare_sensitive},t.prototype.Nl=function(t){var i=this;if(this.Rl(t))return this.kl(t),void this.Ol(t);this.Il(t,this.Al)?(this.Ll(t),this.Ol(t)):rn(t.querySelectorAll(this.Al),(function(t){i.xl(t)||(i.Ll(t),i.Ol(t))}))},t.prototype.xl=function(t){return w(t)&&I(t.src,"data:image/svg+xml")&&t.src.length<=1024},t.prototype.Ll=function(t){t.__contentsquare_sensitive=uu.Sensitive},t.prototype.kl=function(t){t.__contentsquare_sensitive=uu.SensitiveChild},t.prototype.Ol=function(t){var i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),n=i.nextNode();for(t===n&&(n=i.nextNode());n;)this.kl(n),n=i.nextNode()},t.prototype.Rl=function(t){return!(!csNodeparentNode.apply(t)||!a(csNodeparentNode.apply(t))&&!A(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||S(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.Il=function(t,i){return a(t)&&G.call(t,i)},t.prototype.bl=function(t,i,n){return csArray.prototype.some.call(n,(function(n){return t.hasAttribute(i)&&csString.prototype.indexOf.call(n.attrName,i)>-1&&G.call(t,n.selector)}))},t.prototype.El=function(t,i){if(0===i.length)return t;if(0===t.length)return csArray.prototype.join.call(i,",");for(var n=t,r=0,s=i;r<s.length;r++)for(var e=s[r],u=0,h=csString.prototype.split.call(e,",");u<h.length;u++){var o=h[u];-1===csString.prototype.indexOf.call(n,o)&&(n+=",".concat(o))}return n},t.prototype.Sl=function(t){return csArray.prototype.some.call(this.gl,(function(i){return i.selector===t.selector&&i.attrName===t.attrName}))},t}(),Eu=function(){function t(t){this.do=t}return t.prototype.init=function(){this._l(t.Cl,xt),this._l(t.Ml,Lt)},t.prototype._l=function(t,i){this.do.register([t],(function(t,n){j(t)&&j(n)&&J.error(n,"".concat(i).concat(t))}))},t.Ml="logSnippetError",t.Cl="logImplementationSnippetError",t}(),Su=function(){function t(t,i,n,r){this.D=t,this.Ho=i,this.vo=n,this.Vo=r}return t.prototype.init=function(){var t=this;this.Ho.onChildMessage((function(i,n,r){return t.Vo.emitIframeEvent(i,n,r)})),this.Ho.setRecordingStatusCallback((function(){return t.vo.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.D.iframesTracking&&this.Ho.start()},t.prototype.onOptout=function(){this.D.iframesTracking&&this.Ho.stop()},t.prototype.onRecordingStatusChange=function(){this.D.iframesTracking&&this.Ho.onRecordingStatusChange(this.vo.getRecordingStatus())},t}(),bu=function(t){function i(i,n){var r=t.call(this)||this;return r.D=i,r.gi=n,r.Pl=0,r.Dl=new Map,r.Ul={boundElement:window,type:"message",listener:function(t){return r.jl(t)}},r}return ut(i,t),i.prototype.onChildMessage=function(t){this.ql=t},i.prototype.setRecordingStatusCallback=function(t){this.Fl=t},i.prototype.onRecordingStatusChange=function(t){var i=this,n=Ft.buildBaseMessage(qt.RecordingStatus,jt.Parent,this.D.projectId);n.content=t,this.Dl.forEach((function(t){!i.Hl(t)&&t.port&&Ft.sendChannelMessage(t.port,n)}))},i.prototype.sendToChildren=function(t,i){var n=Ft.buildBaseMessage(t,jt.Parent,this.D.projectId);n.content=i,this.Vl(n)},i.prototype.onStart=function(){ji(this.Ul,!1),this.zl()},i.prototype.onStop=function(){this.Jl(),qi(this.Ul,!1),this.Wl()},i.prototype.zl=function(){var t=this,i=this.Gl();this.Bl(i),csArray.prototype.forEach.call(i,(function(i){if(null===t.Kl(i)){var n={iframe:i};t.Dl.set(t.Pl,n),t.Pl+=1}})),this.Yl()},i.prototype.Gl=function(){var t=this;return csArray.prototype.filter.call(on.findAllElements("iframe"),(function(i){return t.Xl(i)}))},i.prototype.Bl=function(t){var i=this;this.Dl.forEach((function(n,r){n.iframe&&-1===csArray.prototype.indexOf.call(t,n.iframe)&&i.$l(r,n)}))},i.prototype.$l=function(t,i){i.port&&Ft.closeChannelPort(i.port),this.Dl.delete(t)},i.prototype.Wl=function(){this.Dl.forEach((function(t){t.port&&Ft.closeChannelPort(t.port)})),this.Dl.clear()},i.prototype.Kl=function(t){var i=null;return this.Dl.forEach((function(n,r){null===i&&n.iframe===t&&(i=r)})),i},i.prototype.Xl=function(t){return t.id!==r&&(!t.src||Dt(Pt(t.src),this.D.hostnames))},i.prototype.Vl=function(t){this.Dl.forEach((function(i){i.port&&Ft.sendChannelMessage(i.port,t)}))},i.prototype.Yl=function(){var t=this;this.Dl.forEach((function(i,n){if(i.iframe.contentWindow){var r=t.Zl(n);Ft.sendPostMessage(i.iframe.contentWindow,"*",r)}}))},i.prototype.Jl=function(){var t=this.Ql();this.Dl.forEach((function(i){i.port?Ft.sendChannelMessage(i.port,t):i.iframe.contentWindow&&Ft.sendPostMessage(i.iframe.contentWindow,"*",t)}))},i.prototype.Zl=function(t){return Ft.buildBaseMessage(qt.Discovery,jt.Parent,this.D.projectId,t)},i.prototype.Ql=function(){return Ft.buildBaseMessage(qt.Stop,jt.Parent,this.D.projectId)},i.prototype.td=function(t,i){var n=this,r=this.Dl.get(t);void 0!==r?(r.port=i,r.port.onmessage=function(t){n.nd(t,r)}):J.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Pl,")"))},i.prototype.rd=function(t){if(t.port){var i=Ft.buildBaseMessage(qt.RecordingStatus,jt.Parent,this.D.projectId),n=this.Fl();this.Hl(t)&&(n.isRecording=!1,n.isMutationTrackerStarted=!1),i.content=n,Ft.sendChannelMessage(t.port,i)}},i.prototype.nd=function(t,i){if(void 0!==i){var n=t.data.type,r=t.data.content;n===qt.EndOfBufferedMessages?this.rd(i):this.ql(i.iframe,n,r)}else J.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},i.prototype.jl=function(t){if(Ft.isMessageValid(t,jt.Child,this.D.projectId,this.D.hostnames))switch(t.data.type){case qt.Discovery:if(void 0===t.data.id)return void this.zl();if(t.ports&&1===t.ports.length&&this.Dl.has(t.data.id))return void this.td(t.data.id,t.ports[0]);J.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case qt.ChildLogMessage:this.ql(null,qt.ChildLogMessage,t.data.content);break;default:J.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},i.prototype.Hl=function(t){return this.gi.isSensitive(t.iframe)||this.gi.isSensitiveChild(t.iframe)},i}(dn),Nu=function(){function t(){}return t.prototype.compute=function(t,i){var n=this.sd(i.x)-this.sd(t.x),r=this.sd(i.y)-this.sd(t.y),s=i.time-t.time;return{duration:s,distance:this.ud(n,r),direction:this.od(n,r),velocity:this.ad(n,r,s)}},t.prototype.computePinchMetrics=function(t,i){var n=this.sd(i.x)-this.sd(t.x),r=this.sd(i.y)-this.sd(t.y);return{duration:i.time-t.time,distance:this.ud(n,r)}},t.prototype.getScale=function(t,i){return Math.abs(i/t-1)},t.prototype.sd=function(t){return t/window.devicePixelRatio},t.prototype.ud=function(t,i){return Math.round(Math.sqrt(t*t+i*i))},t.prototype.ad=function(t,i,n){var r=n/1e3,s=t/r,e=i/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.od=function(t,i){return Math.abs(t)>Math.abs(i)?t>0?pr.RIGHT:pr.LEFT:i>0?pr.DOWN:pr.UP},t}(),Tu=function(){function t(){this.vd={},this.ld=new Nu,this.dd()}return t.prototype.onGesture=function(t){this.wd=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.yd(t)){this.pd(t)&&this.dd();var i={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Tt()};if(1===t.touches.length)this.vd.startPinchTime=i.time,this.vd.firstTouch=i;else if(2===t.touches.length&&(this.vd.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Tt()},this.vd.firstTouch&&this.vd.secondTouch)){var n=this.ld.computePinchMetrics(this.vd.firstTouch,this.vd.secondTouch);this.md=n.distance}csArray.prototype.push.call(this.gd,i),this.Ad=Xi(t)}},t.prototype.processActionMove=function(){this.Ed=!0},t.prototype.processActionUp=function(t){if(this.Sd(t)){if(csArray.prototype.push.call(this.gd,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Tt()}),this.bd(t)&&this.vd.startPinchTime){var i={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.vd.startPinchTime},n={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Tt()};this.vd.firstTouch&&(this.vd.firstTouch=i,this.vd.secondTouch=n),this.Nd(t)}this.md||this.Td()&&this.Rd(t)}},t.prototype.dd=function(){this.gd=[],this.Ad=null,this.Ed=!1,this.md=null},t.prototype.Rd=function(t){var i=this.ld.compute(this.gd[0],this.gd[1]),n=this.Ed?this.kd(i):this.Od(i);this.wd(n,t)},t.prototype.Nd=function(t){if(this.vd.firstTouch&&this.vd.secondTouch){var i=this.ld.computePinchMetrics(this.vd.firstTouch,this.vd.secondTouch),n=this.Id(i);n&&this.wd(n,t)}},t.prototype.Id=function(t){if(this.md&&!(this.ld.getScale(this.md,t.distance)<.1))return{type:this.md>t.distance?yr.PINCH_IN:yr.PINCH_OUT,target:this.Ad,distance:t.distance}},t.prototype.kd=function(t){return{type:t.velocity<100?yr.DRAG:yr.FLICK,target:this.Ad,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.Od=function(t){return{type:t.duration<1e3?yr.TAP:yr.LONG_PRESS,target:this.Ad}},t.prototype.pd=function(t){return 1===t.touches.length},t.prototype.Td=function(){return 2===this.gd.length},t.prototype.yd=function(t){return t.touches.length>0},t.prototype.Sd=function(t){return t.changedTouches.length>0},t.prototype.bd=function(t){return this.Ed&&!!this.md&&1===t.changedTouches.length&&1===t.touches.length},t}(),Ru=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,i){this.subscriptions[t]=i,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),ku=function(t){function i(i){var n=t.call(this)||this;return n.Ld=i,n.Ps=[{boundElement:document,type:"touchstart",listener:function(t){return n.Qn(t)}},{boundElement:document,type:"touchmove",listener:function(t){return n.Qn(t)}},{boundElement:document,type:"touchend",listener:function(t){return n.Qn(t)}}],n.xd=new Tu,n.xd.onGesture((function(t,i){return n.ih(t,i)})),n}return ut(i,t),i.prototype.ih=function(t,i){for(var n in this.subscriptions){(0,this.subscriptions[n])(t,i)}},i.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ps,(function(t){return ji(t)}))},i.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ps,(function(t){return qi(t)}))},i.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},i.prototype.Qn=function(t){var i=this;this.Ld.tryToExecute("process gesture event",(function(){if(i.xd.isValidTouchEvent(t))switch(t.type){case"touchstart":i.xd.processActionDown(t);break;case"touchmove":i.xd.processActionMove();break;case"touchend":i.xd.processActionUp(t)}}))()},i.isSwipe=function(t){return t.type===yr.FLICK||t.type===yr.DRAG},i}(Ru),Ou=function(t){function i(i,n){var r=t.call(this)||this;return r.Pv=i,r._d=n,r.Cd=0,r}return ut(i,t),i.prototype.onStart=function(){var t=this;J.isLoggingActive()&&(this.Md=window.setInterval((function(){return t.Pd()}),i.Dd))},i.prototype.onStop=function(){J.isLoggingActive()&&(this.Pd(),clearInterval(this.Md))},i.prototype.Pd=function(){if(!(Fi.isEmpty()||this.Cd>=i.Ud)){var t=Fi.getAll();this.Cd++;var n=ht({a:i.jd,l:i.qd},this._d.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return ht(ht({},t),n)}));this.Pv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(r)}}),this.Pv.after((function(){Fi.clear()})),this.Pv.send(!1)}},i.jd="uxa",i.qd="perf",i.Dd=5e3,i.Ud=5,i}(dn),Iu=function(){function t(t,i){this.D=t,this._d=i}return t.prototype.init=function(){this.Fd=new Ou(new Pi(this.D.getLoggerUri(),""),this._d)},t.prototype.onStartTracking=function(){this.Fd.start()},t.prototype.onOptout=function(){this.Fd.stop()},t}(),Lu=function(){function t(){this.Hd=!1}return t.prototype.enableRecordingStatus=function(t,i,n,r){this.Hd=!0,this.To=t,this.gi=i,this.So=n,this.mo=r},t.prototype.getRecordingStatus=function(){return this.Hd?{isRecording:this.To.isRecording(),isMutationTrackerStarted:this.To.isMutationTrackerStarted(),PIISelectors:this.gi.getPIISelectors(),capturedElementSelector:this.mo.getWhitelistedElementsSelector(),useAnonymization:this.So.shouldUseAnonymization()}:{isRecording:!1}},t}(),xu=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b,N,T,R){var k=this;this.Jv=t,this.ci=i,this.K=n,this.Y=r,this.Qi=s,this.do=e,this.Vd=u,this.D=h,this.zd=o,this.Jd=c,this.Wd=f,this.ao=a,this.U=v,this.Yc=l,this.Ra=d,this.X=w,this.Gd=y,this.il=p,this.xn=m,this._n=g,this.Cn=A,this.Pn=E,this.Vo=S,this.Tt=b,this.Bd=N,this.po=T,this.Kd=R,this.Yd=function(t){void 0===t&&(t=!1),k.Xd.start(t),k.$d.start()}}return t.prototype.start=function(){var t=this;if(this.zd.init(),this.Jd.init(),!this.Jd.isActive()){var i=new Be(this.Y,this.K),n=new Ve(this.Yc),r=new ku(J),s=new ke(this.D,this.K,this.Y,this.Yc,n,this.do,i,r,this.Vo,this.ci),e=new ws(this.do,this.Y,this.D,this.Jv,this.ci,this.U),u=new Au(this.D),h=new Lu,o=new bu(this.D,u),c=new Su(this.D,o,h,this.Vo);c.init();var f=new fs(this.K,this.Y,this.do,this.Vo,o,this.D),a=new Ts(this.D,this.K,this.Y,this.do,this.U,i,this.X);this.Xd=new He(this.D,this.do,this.Qi,this.K,this.Y,this.ao,this.Tt,this.Ra,this.X,this.po);var v=new Ge(this.K,this.Y,this.do),l=new hu(this.D,this.K,this.Y,this.X,this.do,this.Yd,u),d=new lu(this.D,this.do,this.ci,this.Jv,this.il),w=new Eu(this.do),y=new Iu(this.D,new It(this.D,this.U));if(this.$d=new ze,this.Wd.init(),f.init(),e.init(),a.init(),this.Bd.init(),this.Xd.init(),v.init(),l.init(),d.init(),this.Gd.init(),w.init(),y.init(),this.Kd.init(),this.Qi.addListeners(v,this.Vd,s,this.Wd,f,this.Bd,this.Xd,l,d,e,c,y),Zr.isRecordingSupported()&&this.ci.isSupported()){var p=new rs(h,this.Y,this.D,this.ci,n,this.ao,this.Jv,this.do,this.U,i,this.X,u,this.xn,this._n,this.Cn,r,this.Pn,this.Qi,this.il,this.Vo,this.po);p.init(),this.Qi.addListeners(p)}if(this.D.eMerchandisingEnabled){var m=new nu(this.D,this.Yc,this.ci,this.Jv,this.Tt,this.X,this.Vo,this.do);m.init(),this.Qi.addListeners(m)}s.init(),i.onSessionExpired((function(){t.Qi.emitBeforeSessionRenewal(),t.Zd(!0),t.Qi.emitAfterSessionRenewal()})),this.Zd()}},t.prototype.Zd=function(t){var i=this;void 0===t&&(t=!1),this.do.start(),this.$d.onLoad((function(){i.Qi.emitStartTracking(t)})),ru(this.D)&&!t||this.Yd(t)},t}(),_u=function(){function t(t,i,n,r,s,e,u,h){this.D=t,this.K=i,this.Nt=n,this.Qd=r,this.tw=s,this.iw=e,this.kt=u,this.nw=h}return t.prototype.compute=function(t){var i=this;this.D.crossDomainTracking&&!this.D.cookielessTrackingEnabled?this.D.crossDomainSingleIframeTracking?this.kt.start((function(){return i.rw(t)})):this.iw.applyUpToDate((function(){return i.rw(t)})):this.rw(t)},t.prototype.rw=function(t){this.tw.handle(),this.Qd.clear(),this.ew()?(this.Qd.restoreClearedVisitor(),t(!0)):(this.Nt.exclude(this.D),t(!1))},t.prototype.ew=function(){var t=_.boolean(this.D.sampleRate);return this.nw.isForceIncluded()||!this.Nt.isExcluded()&&this.K.doesVisitorExist()||!this.Nt.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,i=csString.prototype.slice.call(function(t){for(var i=0,n=0;n<t.length;n+=1)i=csString.prototype.charCodeAt.call(t,n)+(i<<6)+(i<<16)-i;return Math.abs(i)}(t).toString(16),-4),n=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?i:7&i|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",i)}}(du||(du={}));var Cu,Mu=function(){function t(t,i,n){this.D=t,this.uw=i,this.Y=n}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.hw(),this.Y.removeSession()),this.ow(t),this.setVisitor(t)},t.prototype.hw=function(){return{id:du.generate(),visitsCount:0,appliedTrackingDraw:this.D.lastTrackingDraw,creationTimestamp:Rt(),lastVisitTimestamp:0,hitTimestamp:0,expires:Tt()+this.D.visitorCookieTimeout}},t.prototype.ow=function(t){var i=Rt();this.Y.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=i),t.hitTimestamp=i,t.appliedTrackingDraw=this.D.lastTrackingDraw,this.cw=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.uw.get()},t.prototype.setVisitor=function(t){this.uw.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.uw.get()},t.prototype.removeVisitor=function(){this.uw.remove()},t.prototype.handleSubdomainChange=function(){this.uw.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.cw&&t.visitsCount!==this.cw},t}(),Pu=function(){function t(t,i){this.configuration=t,this.compressor=i}return t.prototype.isCompressionSupported=function(){return this.compressor.isSupported()},t}(),Du=function(t){function i(i,n,r,s){var e=t.call(this,i,n)||this;return e.configuration=i,e.compressor=n,e.nw=r,e.X=s,e}return ut(i,t),i.prototype.sanitizeSessionRecordingState=function(t){return t},i.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&(this.nw.isForceLegacyReplayRecorded()||_.percentage()<this.configuration.replayRecordingRate&&Zr.isRecordingSupported())?Qt.REPLAY_RECORDING_ENABLED:Qt.REPLAY_RECORDING_DISABLED},i.prototype.updateRecordingState=function(t){return t.recordingState},i.prototype.isReplayRecorded=function(t){return t.recordingState===Qt.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},i.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==Qt.REPLAY_RECORDING_ENABLED){var i=this.X.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(i)}return!1},i.prototype.getDisabledRecordingState=function(){return Qt.REPLAY_RECORDING_DISABLED},i.prototype.setVisitorService=function(t){},i}(Pu),Uu=function(t){function i(i,n,r,s,e,u){var h=t.call(this,i,n)||this;return h.configuration=i,h.compressor=n,h.fw=r,h.Qi=s,h.nw=e,h.X=u,h.aw=[],h}return ut(i,t),i.prototype.init=function(){this.lw()},i.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===ti.TEMPORARILY_RECORDED&&(t.recordingState=ti.NOT_RECORDED),t},i.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&Zr.isRecordingSupported()?(this.aw=[],_.percentage()<this.configuration.replayRecordingRate||this.nw.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.aw,ti.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.aw,ti.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.aw,ti.ETR_SAMPLING),this.aw.length>0?(this.yw(t),ti.TEMPORARILY_RECORDED):ti.NOT_RECORDED):ti.NOT_RECORDED},i.prototype.updateRecordingState=function(t){return this.isCompressionSupported()&&Zr.isRecordingSupported()?t.recordingState===ti.GLOBAL_SAMPLING?ti.GLOBAL_SAMPLING:(this.aw=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.aw,ti.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.aw,ti.ETR_SAMPLING)),this.aw.length>0?(this.yw(t),ti.TEMPORARILY_RECORDED):ti.NOT_RECORDED):ti.NOT_RECORDED},i.prototype.yw=function(t){var i,n=this,r=null===(i=this.K)||void 0===i?void 0:i.getVisitor();this.fw.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify({recordingTypes:csArray.prototype.map.call(n.aw,Number),url:n.X.getAnonymizedUrl(),projectId:n.configuration.projectId,uu:(null==r?void 0:r.id)||"",sn:(null==r?void 0:r.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})}}),this.fw.send()},i.prototype.abortQuotaServiceRequest=function(){this.fw.abort()},i.prototype.isReplayRecorded=function(t){return t.recordingState===ti.TEMPORARILY_RECORDED||t.recordingState===ti.GLOBAL_SAMPLING||t.recordingState===ti.URL_SAMPLING||t.etrState===ii.ETR_ON},i.prototype.lw=function(){var t=this;this.fw.setRequestHeader({name:"Content-Type",value:"application/json"}),this.fw.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.fw.onTimeout(3e3,(function(){return t.quotaServiceTimeoutHandler()})),this.fw.onLoad((function(i){return t.quotaServiceLoadHandler(i)}))},i.prototype.quotaServiceErrorHandler=function(t){this.pw(),J.warn("Quota Service: request error - ".concat(t))},i.prototype.quotaServiceTimeoutHandler=function(){this.pw(),J.warn("Quota Service: request timeout")},i.prototype.pw=function(){var t=ti.NOT_RECORDED;this.mw(this.aw)&&(t=ti.GLOBAL_SAMPLING),this.Qi.emitRecordingStateChange(t,ii.ETR_OFF)},i.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var i;try{i=csJSON.parse(t.responseText)}catch(i){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var n=null==i.allowedRecordingTypes?void 0:csArray.prototype.map.call(i.allowedRecordingTypes,csString);if(n){var r=ii.ETR_OFF,s=ti.NOT_RECORDED;this.mw(n)?s=ti.GLOBAL_SAMPLING:this.gw(n)&&(s=ti.URL_SAMPLING),this.Aw(n)&&(r=ii.ETR_ON),this.Qi.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},i.prototype.mw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ti.GLOBAL_SAMPLING}))},i.prototype.gw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ti.URL_SAMPLING}))},i.prototype.Aw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ti.ETR_SAMPLING}))},i.prototype.setVisitorService=function(t){this.K=t},i.prototype.getDisabledRecordingState=function(){return ti.NOT_RECORDED},ot([W("Quota Service: onerror")],i.prototype,"quotaServiceErrorHandler",null),ot([W("Quota Service: ontimeout")],i.prototype,"quotaServiceTimeoutHandler",null),ot([W("Quota Service: onload")],i.prototype,"quotaServiceLoadHandler",null),i}(Pu),ju=function(){function t(t,i){this.Ew=t,this.Sw=i,this.bw=!1,this.Nw=null,this.Tw=0}return t.prototype.setDynamicVariablesService=function(t){this.Rw=t},t.prototype.createOrUpdateSession=function(){this.kw(),this.Ow=Tt(),this.Tw=0;var t=this.Iw();null===t?(t=this.Lw(),this.xw(t),t.recordingState=this.Sw.computeInitialRecordingState(t)):(t=this.Sw.sanitizeSessionRecordingState(t),this.xw(t),t.recordingState=this.Sw.updateRecordingState(t)),this.setSession(t),this._w(t)},t.prototype.Lw=function(){return{pageNumber:0,recordingState:this.Sw.getDisabledRecordingState(),etrState:ii.ETR_OFF}},t.prototype._w=function(t){this.Sw instanceof Du?this.bw=this.Sw.computeTriggerSessionReplayStatus(t):this.bw=!1},t.prototype.Cw=function(){var t=this.Lw();return this.xw(t),t.recordingState=this.Sw.computeInitialRecordingState(t),this._w(t),t},t.prototype.xw=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.Sw.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===ti.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.Sw instanceof Uu&&this.Sw.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},i=this.getSession();return null!==i&&(t.pn="".concat(i.pageNumber),this.Sw instanceof Du&&(t.re=this.bw?Qt.TRIGGER_REPLAY_RECORDING_ENABLED:i.recordingState)),t},t.prototype.getSession=function(){return this.Ew.get()},t.prototype.Iw=function(){return this.Ew.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.Ew.get()},t.prototype.setSession=function(t){this.Ew.set(t)},t.prototype.removeSession=function(){this.Ew.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),i=[];return t&&(t.recordingState!==ti.NOT_RECORDED&&csArray.prototype.push.call(i,t.recordingState),t.etrState===ii.ETR_ON&&csArray.prototype.push.call(i,ti.ETR_SAMPLING)),i},t.prototype.updateRecordingState=function(t,i){var n=this.getSession();null!==n&&(n.recordingState=t,n.etrState=i,this.setSession(n))},t.prototype.hasValidSession=function(){var t=this.Ew.getRawSession();return this.Ew.isValid(t)},t.prototype.handleSubdomainChange=function(){this.Ew.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.Ew.isCacheRefreshed();return t&&this.Ew.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.Nw||this.Mw()},t.prototype.Mw=function(){if(this.Pw())this.kw();else{var t=this.getSession();null===t&&(t=this.Cw()),this.Ew.set(t,174e4),this.Dw(),this.Uw()}},t.prototype.Uw=function(){var t=this;this.Nw=window.setTimeout((function(){t.Mw()}),174e4)},t.prototype.Pw=function(){return 1434e4-(Tt()+fi-this.Ow)<0},t.prototype.kw=function(){this.Nw&&(window.clearTimeout(this.Nw),this.Nw=null)},t.prototype.Dw=function(){this.Tw+=1,this.Rw.trackDynamicVariable("session_expiry_update",this.Tw)},t}(),qu=function(){function t(t,i,n){this.D=t,this.K=i,this.Nt=n}return t.prototype.clear=function(){this.jw()&&(this.qw=this.K.getVisitor(),this.K.removeVisitor()),this.Fw()&&this.Nt.removeExclusion()},t.prototype.jw=function(){return this.K.doesVisitorExist()&&this.K.getVisitor().appliedTrackingDraw!==this.D.lastTrackingDraw},t.prototype.Fw=function(){return this.Nt.getAppliedTrackingDraw()!==this.D.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.qw&&this.K.setVisitor(this.qw)},t}(),Fu=function(){function t(t,i){this.K=t,this.Y=i}return t.prototype.handle=function(){this.Hw(),this.Vw()},t.prototype.Hw=function(){this.K.handleSubdomainChange()},t.prototype.Vw=function(){this.Y.handleSubdomainChange()},t}(),Hu=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=csArray.prototype.push).call.apply(t,at([this.listeners],i,!1))},t}(),Vu=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.emitBeforeNaturalPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeNaturalPageView&&n.onBeforeNaturalPageView()}},i.prototype.emitAfterNaturalPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterNaturalPageView&&n.onAfterNaturalPageView()}},i.prototype.emitInitTracking=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onInitTracking&&n.onInitTracking()}},i.prototype.emitStartTracking=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onStartTracking&&r.onStartTracking(t)}},i.prototype.emitArtificialPageViewEnd=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onArtificialPageViewEnd&&n.onArtificialPageViewEnd()}},i.prototype.emitBeforeArtificialPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeArtificialPageView&&n.onBeforeArtificialPageView()}},i.prototype.emitAfterArtificialPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterArtificialPageView&&n.onAfterArtificialPageView()}},i.prototype.emitBeforeSessionRenewal=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeSessionRenewal&&n.onBeforeSessionRenewal()}},i.prototype.emitAfterSessionRenewal=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterSessionRenewal&&n.onAfterSessionRenewal()}},i.prototype.emitOptout=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onOptout&&n.onOptout()}},i.prototype.emitConsentGranted=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onConsentGranted&&n.onConsentGranted()}},i.prototype.emitConsentWithdrawn=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onConsentWithdrawn&&n.onConsentWithdrawn()}},i.prototype.emitRecordingStateChange=function(t,i){for(var n=0,r=this.listeners;n<r.length;n++){var s=r[n];s.onRecordingStateChange&&s.onRecordingStateChange(t,i)}},i.prototype.emitInitialDomStart=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onInitialDomStart&&n.onInitialDomStart()}},i.prototype.emitInitialDomDone=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onInitialDomDone&&r.onInitialDomDone(t)}},i.prototype.emitRecordingStatusChange=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onRecordingStatusChange&&n.onRecordingStatusChange()}},ot([Yi("emitStartTracking")],i.prototype,"emitStartTracking",null),i}(Hu),zu="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Cu||(Cu={}));var Ju,Wu=function(){function t(t,i,n){this.D=t,this.Rt=i,this.zw=n}return t.prototype.get=function(){var t;return null===(t=this.D.cookielessTrackingEnabled?this.zw.getItem(zu):this.Rt.get(zu))?t:Number(t)},t.prototype.set=function(t){this.D.cookielessTrackingEnabled?this.zw.setItem(zu,csString(t)):this.Rt.set(zu,csString(t),x)},t.prototype.remove=function(){this.D.cookielessTrackingEnabled?this.zw.removeItem(zu):this.Rt.delete(zu)},t.prototype.handleSubdomainChange=function(){this.D.cookielessTrackingEnabled||(this.D.allowSubdomains?this.Rt.delete(zu,Kt.CURRENT_DOMAIN):this.Rt.delete(zu,this.Rt.getRootDomain()))},t}(),Gu=["trackConsentGranted"],Bu=["trackConsentWithdrawn"],Ku=function(){function t(t,i){this.do=t,this.Yo=i}return t.prototype.init=function(){this.Yo.handleSubdomainChange(),this.Yo.setInitialConsent(),this.Jw()},t.prototype.Jw=function(){var t=this;this.do.register(Gu,(function(){t.Yo.grantConsent()})),this.do.register(Bu,(function(){t.Yo.withdrawConsent()}))},t.prototype.onOptout=function(){this.Yo.removeConsent()},t}(),Yu=function(){function t(t,i,n){this.D=t,this.uw=i,this.Qi=n}return t.prototype.setInitialConsent=function(){var t=this.uw.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var i=this.D.consentRequired;return i&&t===Cu.NOT_REQUIRED||!i&&t!==Cu.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.uw.handleSubdomainChange()},t.prototype.setDefault=function(){var t=this.D.consentRequired?Cu.NOT_EXPRESSED:Cu.NOT_REQUIRED;this.uw.set(t)},t.prototype.grantConsent=function(){this.D.consentRequired&&(this.uw.set(Cu.GRANTED),this.Qi.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.D.consentRequired&&(this.uw.set(Cu.WITHDRAWN),this.Qi.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.uw.remove()},t.prototype.isAllowedByConsent=function(){return!this.D.consentRequired||this.uw.get()===Cu.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.uw.get())}},t}(),Xu=function(){function t(t,i,n,r,s,e,u){this.Qi=t,this.do=i,this.Vd=n,this.zd=r,this.Jd=s,this.Ww=e,this.Wd=u}return t.prototype.start=function(){this.Qi.addListeners(this.Ww,this.Wd,this.Vd),this.Wd.init(),this.zd.init(),this.Jd.init(),this.Jd.isActive()||this.do.start()},t}(),$u=function(){function t(t,i){this.Ft=t,this.uw=i}return t.prototype.exclude=function(t){this.uw.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.uw.remove()},t.prototype.isExcluded=function(){return this.Gw()||this.Bw()},t.prototype.Gw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.uw.get()},t.prototype.Bw=function(){return csString.prototype.indexOf.call(this.Ft.href,yi)>0},t}(),Zu=function(){function t(t){this.Yo=t}return t.prototype.onOptout=function(){this.Yo.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Ju||(Ju={}));var Qu,th=function(){function t(t){this.X=t,this.Kw=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Kw=new RegExp(t)},t.prototype.Yw=function(){return this.Kw.test(this.X.getAnonymizedUrl())?Ju.SessionReplay:Ju.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Yw()===Ju.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Yw()}},t}(),ih=["excludeURLforReplay"],nh=function(){function t(t,i){this.Yo=t,this.do=i}return t.prototype.init=function(){var t=this;this.do.register(ih,(function(i){j(i)&&t.Yo.setExcludeUrlForSessionReplay(i)}))},t}(),rh="_cs_inc",sh=function(){function t(t,i){this.Ft=t,this.Rt=i}return t.prototype.isForceIncluded=function(){return this.Xw()||this.$w()},t.prototype.isForceLegacyReplayRecorded=function(){return this.Zw(Qt.REPLAY_RECORDING_ENABLED)||this.Qw(Qt.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.Zw(ti.GLOBAL_SAMPLING)},t.prototype.Xw=function(){return null!==this.Rt.get(rh)},t.prototype.Zw=function(t){return this.Rt.get(rh)===t},t.prototype.$w=function(){return csString.prototype.indexOf.call(this.Ft.href,rh)>0},t.prototype.Qw=function(t){return csString.prototype.indexOf.call(this.Ft.href,"".concat(rh,"=").concat(t))>0},t}(),eh="_cs_optout",uh=function(){function t(t,i,n){this.D=t,this.Rt=i,this.zw=n}return t.prototype.get=function(){return this.D.cookielessTrackingEnabled?this.zw.getItem(eh):this.Rt.get(eh)},t.prototype.set=function(t){this.D.cookielessTrackingEnabled?this.zw.setItem(eh,t):this.Rt.set(eh,t,x)},t}(),hh=function(){function t(t,i,n){this.Qi=t,this.Ft=i,this.uw=n}return t.prototype.init=function(){!this.isActive()&&this.ty()&&this.activate()},t.prototype.isActive=function(){return"1"===this.uw.get()},t.prototype.activate=function(){this.Qi.emitOptout(),this.uw.set("1")},t.prototype.ty=function(){return csString.prototype.indexOf.call(this.Ft.href,eh)>0},t}(),oh=["optout"],ch=function(){function t(t,i){this.do=t,this.Jd=i}return t.prototype.init=function(){var t=this;this.do.register(oh,(function(){t.Jd.activate()}))},t}();function fh(t,i){return i.visitor.visitsCount!==t.visitor.visitsCount?i.visitor.visitsCount-t.visitor.visitsCount:t.session?i.session?i.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,i){var n=function(t,i){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===i}))[0]}(t,i),r=function(t,i){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,i){return t.visitor&&t.visitor.appliedTrackingDraw===i}(t,i)})),fh)[0]}(t,i);return n||r}}(Qu||(Qu={}));var ah=function(){function t(t,i,n){this.D=t,this.iy=i,this.ny=n}return t.prototype.applyUpToDate=function(t){var i=this;this.ny.retrieve(this.D.hostnames,(function(n){var r=at([i.iy.get()],n,!0),s=Qu.select(r,i.D.lastTrackingDraw);i.iy.apply(s),t()}))},t}(),vh=function(){function t(t,i){this.do=t,this.Vo=i}return t.prototype.init=function(){this.Vo.addListeners(this.do)},t.prototype.onOptout=function(){this.do.stop()},t.prototype.onBeforeSessionRenewal=function(){this.do.stop()},t}();var lh,dh=function(t){function i(){var i=t.call(this)||this;return i.sy={},i}return ut(i,t),i.prototype.register=function(t,i){for(var n=0,r=t;n<r.length;n++){var s=r[n];this.sy[s]=i,this.sy}},i.prototype.onStart=function(){this.ey(),this.uy()},i.prototype.onStop=function(){window._uxa=[]},i.prototype.onIframeCommands=function(t){for(var i=0,n=t.commands;i<n.length;i++){var r=n[i];this.hy(r.name,r.params,t.iframePath)}},i.prototype.hy=function(t,i,n){var r=this;J.tryToExecute("Commands.apply.from.iframe: ".concat(n),(function(){var n;if(r.sy[t])return(n=r.sy)[t].apply(n,i)}))()},i.prototype.ey=function(){var t=this;window._uxa.forEach((function(i){var n=i[0],r=i.slice(1);return t.apply(n,r)}))},i.prototype.uy=function(){var t=this;window._uxa={push:function(i){var n=i[0],r=i.slice(1);return t.apply(n,r)}}},i.prototype.apply=function(t,i){var n;if(this.sy[t])return(n=this.sy)[t].apply(n,i)},ot([W("Commands.apply")],i.prototype,"apply",null),i}(dn),wh=function(){function t(){var t=this;this.Of={boundElement:document,type:"securitypolicyviolation",listener:function(i){return t.securityPolicyViolationListener(i)}}}return t.prototype.onEvent=function(t){this.fn=t},t.prototype.start=function(){ji(this.Of)},t.prototype.stop=function(){qi(this.Of)},t.prototype.oy=function(i){if(!i)return!1;var n=i.disposition;return j(i.sourceFile)&&csArray.prototype.some.call(t.vy,(function(t){return csString.prototype.indexOf.call(i.sourceFile,t)>0}))&&"report"!==n},t.prototype.securityPolicyViolationListener=function(t){this.oy(t)&&this.fn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.vy=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],ot([W("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),yh=function(){function t(t){this.ly=t}return t.prototype.init=function(){var t=this;this.ly.onEvent((function(i){return t.Qn(i)}))},t.prototype.start=function(){this.ly.start()},t.prototype.stop=function(){this.ly.stop()},t.prototype.Qn=function(t){var i="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);J.warn(i)},t}(),ph=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.xn=i,h.wy=n,h.Jv=r,h._n=s,h.wo=e,h.X=u,h.yy=[],h.qn=0,h.py=[],h}return ut(i,t),i.prototype.init=function(){this.my()},i.prototype.initStates=function(){this.cf=Tt(),this.yy=[],this.qn=0},i.prototype.onStart=function(){var t=this;this.xn.subscribe(i.tr,(function(i){return t.Qn(i)})),this.gy()},i.prototype.onStop=function(){this.xn.unsubscribe(i.tr)},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.yy})},i.prototype.onIframeJavascriptError=function(t){this.Qn(t)},i.prototype.trackCustomError=function(t){var i={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Ay(i)},i.prototype.Ay=function(t){var i=this;this.isStarted?this.Qn(t,(function(t){return i.wo.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.py,t)},i.prototype.gy=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.py,(function(i){return t.Ay(i)})),this.py=[])},i.prototype.Qn=function(t,i){if(this.isStarted&&this.qn<20){var n=ht(ht({},t),{pageUrl:this.X.getAnonymizedUrl(),rt:this.hf()});this._n.anonymize(n),csArray.prototype.push.call(this.yy,n),this.Ey(),i&&i(n)}},i.prototype.my=function(){var t=this;this.wy.setRequestParametersProviders(this.Jv),this.wy.setRequestPayloadProvider(this),this.wy.after((function(){t.yy=[],t.qn+=1}))},i.prototype.hf=function(){return Tt()-this.cf},i.prototype.Ey=function(){this.wy.send()},i.tr="JavaScriptErrorsService",i}(dn),mh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Cn=i,e.Sy=n,e.Jv=r,e.Pn=s,e.by=[],e.Fn=0,e}return ut(i,t),i.prototype.init=function(){this.Cn.init(),this.my()},i.prototype.initStates=function(){this.by=[],this.Fn=0,this.ef()},i.prototype.ef=function(){this.cf=Tt()},i.prototype.hf=function(){return Tt()-this.cf},i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.tr,(function(i){return t.Qn(i)}))},i.prototype.onStop=function(){this.Cn.unsubscribe(i.tr)},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.by})},i.prototype.onIframeApiError=function(t){this.Qn(t)},i.prototype.Qn=function(t){this.isStarted&&this.Fn<i.Ny&&(t.relativeTime=this.hf(),csArray.prototype.push.call(this.by,this.Pn.anonymize(t)),this.Ey())},i.prototype.my=function(){var t=this;this.Sy.setRequestParametersProviders(this.Jv),this.Sy.setRequestPayloadProvider(this),this.Sy.after((function(){t.by=[],t.Fn+=1}))},i.prototype.Ey=function(){this.Sy.send()},i.tr="ApiErrorsService",i.Ny=20,i}(dn),gh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Ty=i,e.Jv=n,e.Ry=r,e.il=s,e.ky=[],e.Hn=0,e.py=[],e}return ut(i,t),i.prototype.init=function(){this.my()},i.prototype.initStates=function(){this.cf=Tt(),this.ky=[],this.Hn=0},i.prototype.trackCustomError=function(t,i){if(void 0===i&&(i={}),j(t)&&q(i)){var n={message:csString.prototype.slice.call(t,0,300),errorType:"customError"};this.Oy(i)&&(n.attributes=i),this.Ay(n)}},i.prototype.Oy=function(t){var i=Object.keys(t).length;if(0===i||i>5)return!1;for(var n in t)if(n.length>30||t[n].length>30)return!1;return!0},i.prototype.onStart=function(){this.gy()},i.prototype.onStop=function(){},i.prototype.gy=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.py,(function(i){return t.Ay(i)})),this.py=[])},i.prototype.Ay=function(t){if(this.isStarted){var i=this.Iy(t);this.Qn(i),this.il.emitCustomErrorEvent(i)}else csArray.prototype.push.call(this.py,t)},i.prototype.Qn=function(t){this.isStarted&&this.Hn<20&&(csArray.prototype.push.call(this.ky,t),this.Ey())},i.prototype.Iy=function(t){var i=ht(ht({},t),{rt:this.hf()});return i.message=this.Ry.anonymizeEmail(t.message),i},i.prototype.my=function(){var t=this;this.Ty.setRequestParametersProviders(this.Jv),this.Ty.setRequestPayloadProvider(this),this.Ty.after((function(){t.ky=[],t.Hn+=1}))},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.ky})},i.prototype.hf=function(){return Tt()-this.cf},i.prototype.Ey=function(){this.Ty.send()},i}(dn);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(lh||(lh={}));var Ah,Eh=["trackError"],Sh=["api-errors:maskUrl"],bh=function(){function t(t,i,n,r,s,e,u,h,o,c,f){this.xn=t,this._n=i,this.Cn=n,this.Pn=r,this.Ry=s,this.D=e,this.Jv=u,this.Vo=h,this.do=o,this.wo=c,this.X=f}return t.prototype.init=function(){this.Ly=new yh(new wh),this.Ly.init();var t=new Pi(this.D.getTrackerUri(),"errors");this.xy=new ph(this.xn,t,this.Jv,this._n,this.wo,this.X),this.xy.init(),this.Vo.addListeners(this.xy);var i=new Pi(this.D.getTrackerUri(),"api-errors");this.Cn.excludeDomains([lh.CONTENTSQUARE,lh.CLICKTALE,lh.FAKE_TRACKER]),this._y=new mh(this.Cn,i,this.Jv,this.Pn),this._y.init(),this.Vo.addListeners(this._y);var n=new Pi(this.D.getTrackerUri(),"custom-errors");this.Cy=new gh(n,this.Jv,this.Ry,this.wo),this.Cy.init(),this.Jw()},t.prototype.Jw=function(){var t=this;this.do.register(Sh,(function(i){return t.Pn.addUrlMaskingPattern(i)})),this.do.register(Eh,(function(i,n){t.D.customErrorsEnabled?t.Cy.trackCustomError(i,n):t.D.jsCustomErrorsEnabled&&t.xy.trackCustomError(i)}))},t.prototype.onInitTracking=function(){this.Ly.start()},t.prototype.onStartTracking=function(){this.D.jsErrorsEnabled&&this.xy.start(),this.D.apiErrors.enabled&&this._y.start(),this.D.customErrorsEnabled&&this.Cy.start()},t.prototype.onAfterNaturalPageView=function(){this.xy.initStates(),this._y.initStates(),this.Cy.initStates()},t.prototype.onAfterArtificialPageView=function(){this.xy.initStates(),this._y.initStates(),this.Cy.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.xy.stop(),this._y.stop(),this.Cy.stop()},t.prototype.onOptout=function(){this.Ly.stop(),this.xy.stop(),this._y.stop(),this.Cy.stop()},t}(),Nh="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Ah||(Ah={}));var Th=function(){function t(t,i){this.D=t,this.Rt=i,this.My=Jt.None,this.Py=!1,this.Dy=[],this.Uy=[]}return t.prototype.init=function(){this.My=this.Rt.isSameSiteSupported()?Jt.None:Jt.NotSet},t.prototype.setStates=function(t,i){this.iy=t,this.jy=i},t.prototype.start=function(t){var i=this;this.jy.init(this.qy(),(function(n,r){var s=[i.iy.get()];r&&csArray.prototype.push.call(s,n);var e=Qu.select(s,i.D.lastTrackingDraw);i.Py=!0,i.iy.apply(e),t()})),this.Fy=this.jy.openIframe()},t.prototype.setCookie=function(t,i,n){if(this.Py){var r={name:t,value:i,samesite:this.My,secure:Wt.Yes};n&&(r.expires=Vt.toExpireDate(n).getTime()),this.Hy(r)}},t.prototype.removeCookie=function(t){this.Py&&this.Vy(t)},t.prototype.Vy=function(t){this.Uy=csArray.prototype.filter.call(this.Uy,(function(i){return i!==t})),this.Dy=csArray.prototype.filter.call(this.Dy,(function(i){return i.name!==t})),csArray.prototype.push.call(this.Uy,t),this.setBatchReadyCall()},t.prototype.Hy=function(t){this.Uy=csArray.prototype.filter.call(this.Uy,(function(i){return i!==t.name})),this.Dy=csArray.prototype.filter.call(this.Dy,(function(i){return i.name!==t.name})),csArray.prototype.push.call(this.Dy,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.zy()},t.prototype.zy=function(){if(this.Dy.length>0){var t=this.Jy(Ah.Set,this.Dy);this.Wy(t),this.Dy=[]}if(this.Uy.length>0){var i=this.Jy(Ah.Remove,this.Uy);this.Wy(i),this.Uy=[]}},t.prototype.Jy=function(t,i){return{command:t,cookies:i,domain:null,pid:this.D.projectId}},t.prototype.Wy=function(t){var i="https://".concat(this.qy());this.Fy.contentWindow&&this.Fy.contentWindow.postMessage(t,i)},t.prototype.qy=function(){return this.D.dualCollectionTagDomain&&this.D.dualCollectionTagDomain!==Nh?"cdnssl.".concat(this.D.dualCollectionTagDomain):"csxd.".concat(Nh)},ot([wr(),W("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),Rh=function(){function t(t,i){this.D=t,this.qt=i}return t.prototype.init=function(t,i){this.Gy="https://".concat(t),this.Ht=i},t.prototype.openIframe=function(){var t=this;this.qt.onMessage((function(i){t.Jt(i)})),this.qt.onTimeout((function(){t.Wt()})),this.qt.start();var i=this.By(this.Gy);return this.qt.open(i)},t.prototype.Jt=function(t){if(this.Gt(t)){var i=t.data,n=!0;if(this.Ky(t))return void J.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!wi.isRawDomainState(i))return void J.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));wi.isValid(i)||(J.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),n=!1),this.qt.stop(),this.Ht(n?li.fromRaw(i):{},n)}},t.prototype.Wt=function(){J.warn("xdframe single domain: all messages not received")},t.prototype.Gt=function(t){return t.origin===this.Gy&&q(t.data)},t.prototype.Ky=function(t){return!!t.data.error},t.prototype.By=function(t){var i=this.D.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.1.1",".html?pid=").concat(i)},t}(),kh=function(){function t(t,i,n){this.D=t,this.K=i,this.Y=n}return t.prototype.getRequestParameters=function(){var t=this.Y.getSession();if(!t)return{};var i=this.K.getVisitor();return i?ht(ht(ht({},{v:"dev"}),this.D.getRequestParameters()),{uu:i.id,sn:"".concat(i.visitsCount),pn:"".concat(t.pageNumber)}):{}},t}(),Oh=function(t){function i(){var i=t.call(this)||this;return i.Yy=!1,i.Of={boundElement:window,type:"error",listener:function(t){return i.errorListener(t)}},i}return ut(i,t),i.prototype.onStartTracking=function(){ji(this.Of,this.Yy)},i.prototype.onStopTracking=function(){qi(this.Of,this.Yy)},i.prototype.errorListener=function(t){var i=this.Xy(t);for(var n in this.subscriptions){(0,this.subscriptions[n])(i)}},i.prototype.$y=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=i.Zy?t:csString.prototype.slice.call(t,0,i.Zy-i.truncatedErrorMessageMarker.length)+i.truncatedErrorMessageMarker},i.prototype.Xy=function(t){return{errorType:"jsError",message:this.$y(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},i.truncatedErrorMessageMarker="…",i.Zy=1024,ot([W("Event handler type: error")],i.prototype,"errorListener",null),i}(Ru),Ih=function(){function t(t,i){this.do=t,this._=i}return t.prototype.init=function(){var t=this;this.do.register(["debugEvents"],(function(i){"boolean"==typeof i&&t._.updateDynamicFields("emitDebugEvents",i)}))},t}();function Lh(t,i,n){if(!F(i)&&!F(n))return t.href;var r=F(i)?function(t){return I(t,"/")?t:"/".concat(t)}(i):t.pathname,s=F(n)?function(t){return I(t,"?")||""===t?t:"?".concat(t)}(n):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var xh=function(){function t(t,i){this.Ft=t,this.Ra=i}return t.prototype.overridePath=function(t){F(t)&&j(t)&&(this.Qy=""===t?void 0:t)},t.prototype.overrideQuery=function(t){F(t)&&j(t)&&(this.tp=t)},t.prototype.computeOverriddenUrl=function(t){return this.ip(t)?this.getAnonymizedUrl():t},t.prototype.ip=function(t){var i=this.np(this.Ft.href);return this.np(t)===i},t.prototype.np=function(t){return L(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=Lh(this.Ft,this.Qy,this.tp);return this.Ra.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Ft.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),_h=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.emitPageEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onPageEvent&&r.onPageEvent(t)}},i.prototype.emitEventTriggerRecording=function(t,i){for(var n=0,r=this.listeners;n<r.length;n++){var s=r[n];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,i)}},i.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},i.prototype.emitCustomErrorEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},i.prototype.emitUserIdentifierEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},i}(Hu),Ch=function(t){function i(i,n){var r=t.call(this)||this;return r.rp=i,r.sp=n,r.ep=[],r}return ut(i,t),i.prototype.subscribe=function(i,n,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(n,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,i,n)},i.prototype.init=function(){var t=this;this.rp.onEvent((function(i){return t.up(i)})),this.sp.onEvent((function(i){return t.up(i)}))},i.prototype.onStartTracking=function(){this.rp.start(),this.sp.start()},i.prototype.onStopTracking=function(){this.rp.stop(),this.sp.stop()},i.prototype.up=function(t){if(t.url&&t.statusCode){if(this.hp(t.url))return;if(t.statusCode>=400)for(var i in this.subscriptions){var n=this.subscriptions[i];if(n.hasOwnProperty("detailedEvent"))n(this.op(t));else n(this.cp(t))}}},i.prototype.cp=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},i.prototype.op=function(t){var i=this.cp(t);return Object.keys(t.standardRequestHeaders).length>0&&(i.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(i.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(i.queryParameters=t.queryParameters),t.requestBody&&(i.requestBody=t.requestBody),t.responseBody&&(i.responseBody=t.responseBody),i},i.prototype.hp=function(t){return csArray.prototype.some.call(this.ep,(function(i){return-1!==csString.prototype.indexOf.call(t,i)}))},i.prototype.excludeDomains=function(t){var i;(i=csArray.prototype.push).call.apply(i,at([this.ep],t,!1))},i.truncatedErrorMessageMarker="…",i}(Ru),Mh=function(){function t(){this.fp=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,i){return!!i&&csArray.prototype.some.call(i,(function(i){return-1!==csString.prototype.indexOf.call(t,i)}))},t.prototype.isValidBodyType=function(t){var i=t["content-type"];if(!i)return!1;var n=csString.prototype.toLocaleLowerCase.call(i);return csArray.prototype.some.call(this.fp,(function(t){return I(n,t)}))},t}(),Ph=function(t){function i(i,n,r){var s=t.call(this)||this;return s.Ur=i,s.ap=n,s.D=r,s.Xe=!1,s.vp=null,s.lp=null,s.dp=null,s.je=[],s.wp=function(t){var i=t.context,n=t.args,r=t.callerName;return s.interceptOpen(i,n,r)},s.yp=function(t){var i=t.context,n=t.args;return s.interceptSetRequestHeader(i,n)},s.pp=function(t){var i=t.context,n=t.args;return s.interceptSend(i,n)},s}return ut(i,t),i.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},i.prototype.start=function(){this.Xe||(this.mp(),this.vp&&this.vp.activate(),this.lp&&this.lp.activate(),this.dp&&this.dp.activate(),this.Xe=!0)},i.prototype.stop=function(){this.Xe&&(this.vp&&this.vp.deactivate(),this.lp&&this.lp.deactivate(),this.Xe=!1)},i.prototype.mp=function(){this.vp||(this.vp=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"open",hook:this.wp,options:{withCallerName:!0}})),this.lp||(this.lp=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.yp})),this.dp||(this.dp=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"send",hook:this.pp}))},i.prototype.interceptOpen=function(t,i,n){var r=this;if(i[1]&&j(i[1])){var s=csString.prototype.split.call(i[1],"?"),e=s[0],u=s[1],h=Mt(e);t.apiCall={url:h,method:i[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:Tt(),responseTime:0,statusCode:0,library:n},u&&this.isValidUrl(h,this.D.apiErrors.validUrls)&&this.D.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},i.prototype.readyStateChangeListener=function(t){var i=this;t.apiCall&&t.readyState===XMLHttpRequest.DONE&&t.status>=400&&(t.apiCall.responseTime=Tt(),t.apiCall.statusCode=t.status,this.gp()&&csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(n){var r=csString.prototype.split.call(n,/:(.*)/),s=r[0],e=r[1];i.D.apiErrors.collectStandardHeaders&&i.ap.isValidStandardHeader(s)?t.apiCall.standardResponseHeaders[s]=csString.prototype.trim.call(e):i.ap.isValidCustomHeader(s)&&(t.apiCall.customResponseHeaders[s]=csString.prototype.trim.call(e))})),this.isValidUrl(t.apiCall.url,this.D.apiErrors.validUrls)&&this.D.apiErrors.collectResponseBody&&this.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.je,(function(i){return i(t.apiCall)})))},i.prototype.interceptSetRequestHeader=function(t,i){if(t.apiCall&&this.gp()){var n=i[0],r=i[1];this.D.apiErrors.collectStandardHeaders&&this.ap.isValidStandardHeader(n)&&r?t.apiCall.standardRequestHeaders[n]=r.trim():this.ap.isValidCustomHeader(n)&&r&&(t.apiCall.customRequestHeaders[n]=r.trim())}},i.prototype.interceptSend=function(t,i){var n=i[0];t.apiCall&&this.isValidUrl(t.apiCall.url,this.D.apiErrors.validUrls)&&this.D.apiErrors.collectRequestBody&&this.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof n&&(t.apiCall.requestBody=n)},i.prototype.gp=function(){return this.D.apiErrors.collectStandardHeaders||this.D.apiErrors.validCustomHeaders&&0!==this.D.apiErrors.validCustomHeaders.length},ot([W("XhrRequestTracker.interceptOpen")],i.prototype,"interceptOpen",null),ot([W("XhrRequestTracker.readyStateChangeListener")],i.prototype,"readyStateChangeListener",null),ot([W("XhrRequestTracker.interceptSetRequestHeader")],i.prototype,"interceptSetRequestHeader",null),ot([W("XhrRequestTracker.interceptSend")],i.prototype,"interceptSend",null),i}(Mh),Dh=function(t){function i(i,n,r){var s=t.call(this)||this;return s.Ur=i,s.ap=n,s.D=r,s.Xe=!1,s.Ap=null,s.je=[],s.Ep=function(t){var i=t.result,n=t.args,r=t.callerName;s.interceptFetch(i,n,r)},s}return ut(i,t),i.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},i.prototype.start=function(){this.Xe||this.Sp()&&(this.bp(),this.Ap&&this.Ap.activate(),this.Xe=!0)},i.prototype.stop=function(){this.Xe&&(this.Ap&&this.Ap.deactivate(),this.Xe=!1)},i.prototype.Sp=function(){return!!window.csFetch&&"function"==typeof window.csFetch},i.prototype.Np=function(t,i){var n=at([],i,!0);return n[0]&&"function"==typeof n[0].clone&&(n[0]=i[0].clone()),{context:t,args:n}},i.prototype.bp=function(){this.Ap||(this.Ap=this.Ur.createAsyncFunctionInterceptor({target:window,methodName:"fetch",hook:this.Ep,hookPrepareArgs:this.Np,options:{withCallerName:!0}}))},i.prototype.Tp=function(t,i,n){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:return r=csString.prototype.split.call(i.url,"?"),s=r[0],e=r[1],u=Mt(s),h=ht(ht({},t),{url:u,method:i.method,responseTime:Tt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.D.apiErrors.collectStandardHeaders&&(h.standardRequestHeaders=this.Rp(i.headers),h.standardResponseHeaders=this.Rp(n.headers)),this.D.apiErrors.validCustomHeaders&&0!==this.D.apiErrors.validCustomHeaders.length&&(h.customRequestHeaders=this.kp(i.headers),h.customResponseHeaders=this.kp(n.headers)),this.isValidUrl(s,this.D.apiErrors.validUrls)?(this.D.apiErrors.collectQueryParam&&e&&(h.queryParameters=e),this.D.apiErrors.collectResponseBody&&this.isValidBodyType(h.standardResponseHeaders)?n.bodyUsed?[3,2]:(o=h,[4,n.clone().text()]):[3,2]):[3,4];case 1:o.responseBody=f.sent(),f.label=2;case 2:return this.D.apiErrors.collectRequestBody&&this.isValidBodyType(h.standardRequestHeaders)?(c=h,[4,i.text()]):[3,4];case 3:c.requestBody=f.sent(),f.label=4;case 4:return csArray.prototype.forEach.call(this.je,(function(t){return t(h)})),[2]}}))}))},i.prototype.interceptFetch=function(t,i,n){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:if(r=i[0],s=i[1],!j((e=new Request(r,s)).url))return[2];u=Tt(),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t];case 2:return h=f.sent(),[3,4];case 3:if(o=f.sent(),this.Op(o)||this.Ip(o)||this.Lp(o))return[2];throw o;case 4:return c=-1,-1===h.type.indexOf("opaque")&&(c=h.status),c>=400?[4,this.Tp({statusCode:c,library:n,requestTime:u},e,h)]:[3,6];case 5:f.sent(),f.label=6;case 6:return[2]}}))}))},i.prototype.Rp=function(t){var i=this,n={};return t.forEach((function(t,r){i.ap.isValidStandardHeader(r)&&t&&(n[r]=csString.prototype.trim.call(t))})),n},i.prototype.kp=function(t){var i=this,n={};return t.forEach((function(t,r){i.ap.isValidCustomHeader(r)&&t&&(n[r]=csString.prototype.trim.call(t))})),n},i.prototype.Op=function(t){return t instanceof TypeError},i.prototype.Ip=function(t){return t instanceof DOMException&&"AbortError"===t.name},i.prototype.Lp=function(t){return t instanceof DOMException&&csArray.prototype.some.call(i.xp,(function(i){return i===t.name}))},i.xp=["NoModificationAllowedError","InvalidStateError","OperationError"],ot([W("FetchRequestTracker.interceptFetch")],i.prototype,"interceptFetch",null),i}(Mh),Uh="|iframe|",jh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e._p=i,e.Cp=n,e.Mp=r,e.Pp=s,e}return ut(i,t),i.prototype.emitIframeEvent=function(t,i,n){if(this.Dp(i)&&null===t)J.error("iframeEventEmitter received event ".concat(i," with null iframe, content:").concat(csJSON.stringify(n)));else switch(i){case qt.ChildLogMessage:this.jp(n);break;case qt.AnalysisEvent:var r=this._p.transformEvent(t,n);this.qp(r);break;case qt.RecordingEvent:var s=n,e=this.Pp.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Fp(e.events):this.Hp(e.events);break;case qt.JavascriptError:this.Vp(n);break;case qt.ApiError:this.zp(n);break;case qt.DetailedApiError:this.Jp(n);break;case qt.EmerchandisingMessage:var u=this.Mp.transformEvent(t,n);this.Wp(u);break;case qt.Commands:var h=this.Cp.transformEvent(t,n);this.Gp(h);break;case qt.IntegrationCallback:this.Bp(n);break;default:J.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(n)))}},i.prototype.Dp=function(t){var i=[qt.AnalysisEvent,qt.RecordingEvent,qt.EmerchandisingMessage,qt.Commands];return-1!==csArray.prototype.indexOf.call(i,t)},i.prototype.jp=function(t){var i=t.message,n=t.errorCode;switch(t.level){case M.debug:J.debug(i,n);break;case M.warn:J.warn(i,n);break;case M.error:J.error(i,n);break;case M.critical:J.critical(i,n)}},i.prototype.qp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},i.prototype.Fp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},i.prototype.Hp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},i.prototype.Vp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},i.prototype.zp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeApiError&&r.onIframeApiError(t)}},i.prototype.Jp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},i.prototype.Wp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},i.prototype.Gp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeCommands&&r.onIframeCommands(t)}},i.prototype.Bp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},i}(Hu),qh=function(){self.addEventListener("message",(function(t){var i=t.data,n=i[0],r=i[1],s=i[2],e=i[3];if(n===WORKER_SIGNATURE){var u=compress(r,s);u.then?u.then((function(t){return self.postMessage([WORKER_SIGNATURE,e,t])})):self.postMessage([WORKER_SIGNATURE,e,u])}}))},Fh="CS_WORKER_SIGNATURE",Hh=function(t){function i(i,n){var r=t.call(this,n)||this;return r.Kp=i,r.Yp=r.Xp(),r.je={},r.$p=0,r.Zp=i(),r}return ut(i,t),i.prototype.isSupported=function(){return!0},i.prototype.compress=function(t,i,n){if(this.Yp){var r=this.Qp();this.je[r]=n,this.Yp.postMessage([Fh,t,i,r])}else{var s=this.Zp(t,i);s.then?s.then(n):n(s)}},i.prototype.compressSync=function(t){return this.Zp("base64",t)},i.prototype.handleWorkerMessage=function(t){var i=t.data,n=i[0],r=i[1],s=i[2];n===Fh&&(this.je[r](s),delete this.je[r])},i.prototype.Qp=function(){return this.$p+=1},i.prototype.Xp=function(){try{var t=csArray.prototype.join.call(["\nvar WORKER_SIGNATURE = ".concat(csJSON.stringify(Fh),";"),"var compress = (".concat(this.Kp.toString(),")();"),"(".concat(qh.toString(),")()\n\n//compression algo")],"\n");return this.tm(t)}catch(t){return null}},i.prototype.tm=function(t){var i=this,n=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker;if(!n||!r||!s)return null;var e=new r([t],{type:"application/javascript"}),u=new s(n.createObjectURL(e));return u.onerror=function(t){return i.im(t)},u.onmessage=function(t){return i.handleWorkerMessage(t)},u},i.prototype.im=function(t){var i="WorkerError: ".concat(t.message?t.message:"No message");return this.onError(i)},ot([W("Worker message handler")],i.prototype,"handleWorkerMessage",null),i}(Ci);function Vh(){function t(t){for(var i=t.length;--i>=0;)t[i]=0}var i=256,n=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var f=new Array(60);t(f);var a=new Array(512);t(a);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,i,n,r,s){this.static_tree=t,this.extra_bits=i,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,i){this.dyn_tree=t,this.max_code=0,this.stat_desc=i}t(p);var A=function(t){return t<256?a[t]:a[256+(t>>>7)]},E=function(t,i){t.pending_buf[t.pending++]=255&i,t.pending_buf[t.pending++]=i>>>8&255},S=function(t,i,n){t.bi_valid>16-n?(t.bi_buf|=i<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=i>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=i<<t.bi_valid&65535,t.bi_valid+=n)},b=function(t,i,n){S(t,n[2*i],n[2*i+1])},N=function(t,i){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--i>0);return n>>>1},T=function(t,i,n){var r,e,u=new Array(16),h=0;for(r=1;r<=s;r++)u[r]=h=h+n[r-1]<<1;for(e=0;e<=i;e++){var o=t[2*e+1];0!==o&&(t[2*e]=N(u[o]++,o))}},R=function(t){var i;for(i=0;i<n;i++)t.dyn_ltree[2*i]=0;for(i=0;i<r;i++)t.dyn_dtree[2*i]=0;for(i=0;i<19;i++)t.bl_tree[2*i]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},k=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},O=function(t,i,n,r){var s=2*i,e=2*n;return t[s]<t[e]||t[s]===t[e]&&r[i]<=r[n]},I=function(t,i,n){for(var r=t.heap[n],s=n<<1;s<=t.heap_len&&(s<t.heap_len&&O(i,t.heap[s+1],t.heap[s],t.depth)&&s++,!O(i,r,t.heap[s],t.depth));)t.heap[n]=t.heap[s],n=s,s<<=1;t.heap[n]=r},L=function(t,n,r){var s,h,o,c,f=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],h=t.pending_buf[t.l_buf+f],f++,0===s?b(t,h,n):(o=v[h],b(t,o+i+1,n),0!==(c=e[o])&&(h-=l[o],S(t,h,c)),s--,o=A(s),b(t,o,r),0!==(c=u[o])&&(s-=p[o],S(t,s,c)))}while(f<t.last_lit);b(t,256,n)},x=function(t,i){var n,r,e,u=i.dyn_tree,h=i.stat_desc.static_tree,o=i.stat_desc.has_stree,c=i.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==u[2*n]?(t.heap[++t.heap_len]=f=n,t.depth[n]=0):u[2*n+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[e]=0,t.opt_len--,o&&(t.static_len-=h[2*e+1]);for(i.max_code=f,n=t.heap_len>>1;n>=1;n--)I(t,u,n);e=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,u[2*e]=u[2*n]+u[2*r],t.depth[e]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,u[2*n+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,i){var n,r,e,u,h,o,c=i.dyn_tree,f=i.max_code,a=i.stat_desc.static_tree,v=i.stat_desc.has_stree,l=i.stat_desc.extra_bits,d=i.stat_desc.extra_base,w=i.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(u=c[2*c[2*(r=t.heap[n])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>f||(t.bl_count[u]++,h=0,r>=d&&(h=l[r-d]),o=c[2*r],t.opt_len+=o*(u+h),v&&(t.static_len+=o*(a[2*r+1]+h)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--n])>f||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,i),T(u,f,t.bl_count)},_=function(t,i,n){var r,s,e=-1,u=i[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),i[2*(n+1)+1]=65535,r=0;r<=n;r++)s=u,u=i[2*(r+1)+1],++h<o&&s===u||(h<c?t.bl_tree[2*s]+=h:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4))},C=function(t,i,n){var r,s,e=-1,u=i[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),r=0;r<=n;r++)if(s=u,u=i[2*(r+1)+1],!(++h<o&&s===u)){if(h<c)do{b(t,s,t.bl_tree)}while(0!=--h);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),h--),b(t,16,t.bl_tree),S(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),S(t,h-3,3)):(b(t,18,t.bl_tree),S(t,h-11,7));h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4)}},M=!1,P=function(t,i,n,r){S(t,0+(r?1:0),3),function(t,i,n,r){k(t),r&&(E(t,n),E(t,~n)),t.pending_buf.set(t.window.subarray(i,i+n),t.pending),t.pending+=n}(t,i,n,!0)},D=function(t){M||(!function(){var t,i,o,g,A,E=new Array(16);for(o=0,g=0;g<28;g++)for(l[g]=o,t=0;t<1<<e[g];t++)v[o++]=g;for(v[o-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)a[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)a[256+A++]=g;for(i=0;i<=s;i++)E[i]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(T(c,287,E),t=0;t<r;t++)f[2*t+1]=5,f[2*t]=N(t,5);d=new m(c,e,257,n,s),w=new m(f,u,0,r,s),y=new m(new Array(0),h,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,R(t)},U=function(t,n,r,s){var e,u,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var n,r=4093624447;for(n=0;n<=31;n++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*n])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(n=32;n<i;n++)if(0!==t.dyn_ltree[2*n])return 1;return 0}(t)),x(t,t.l_desc),x(t,t.d_desc),h=function(t){var i;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),i=18;i>=3&&0===t.bl_tree[2*o[i]+1];i--);return t.opt_len+=3*(i+1)+5+5+4,i}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==n?P(t,n,r,s):4===t.strategy||u===e?(S(t,2+(s?1:0),3),L(t,c,f)):(S(t,4+(s?1:0),3),function(t,i,n,r){var s;for(S(t,i-257,5),S(t,n-1,5),S(t,r-4,4),s=0;s<r;s++)S(t,t.bl_tree[2*o[s]+1],3);C(t,t.dyn_ltree,i-1),C(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),L(t,t.dyn_ltree,t.dyn_dtree)),R(t),s&&k(t)},j=function(t,n,r){return t.pending_buf[t.d_buf+2*t.last_lit]=n>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&n,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===n?t.dyn_ltree[2*r]++:(t.matches++,n--,t.dyn_ltree[2*(v[r]+i+1)]++,t.dyn_dtree[2*A(n)]++),t.last_lit===t.lit_bufsize-1},q=function(t){S(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},F={_tr_init:D,_tr_stored_block:P,_tr_flush_block:U,_tr_tally:j,_tr_align:q},H=function(t,i,n,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==n;){n-=u=n>2e3?2e3:n;do{e=e+(s=s+i[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},V=new Uint32Array(function(){for(var t,i=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;i[n]=t}return i}()),z=function(t,i,n,r){var s=V,e=r+n;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^i[u])];return-1^t},J={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W=0,G=2,B=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=F._tr_init,it=F._tr_stored_block,nt=F._tr_flush_block,rt=F._tr_tally,st=F._tr_align,et=W,ut=1,ht=B,ot=K,ct=5,ft=Y,at=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,Et=2,St=Q,bt=258,Nt=262,Tt=103,Rt=113,kt=666,Ot=function(t,i){return t.msg=J[i],i},It=function(t){return(t<<1)-(t>4?9:0)},Lt=function(t){for(var i=t.length;--i>=0;)t[i]=0},xt=function(t,i,n){return(i<<t.hash_shift^n)&t.hash_mask},_t=function(t){var i=t.state,n=i.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+n),t.next_out),t.next_out+=n,i.pending_out+=n,t.total_out+=n,t.avail_out-=n,i.pending-=n,0===i.pending&&(i.pending_out=0))},Ct=function(t,i){nt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,i),t.block_start=t.strstart,_t(t.strm)},Mt=function(t,i){t.pending_buf[t.pending++]=i},Pt=function(t,i){t.pending_buf[t.pending++]=i>>>8&255,t.pending_buf[t.pending++]=255&i},Dt=function(t,i){var n,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,h=t.nice_match,o=t.strstart>t.w_size-Nt?t.strstart-(t.w_size-Nt):0,c=t.window,f=t.w_mask,a=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),h>t.lookahead&&(h=t.lookahead);do{if(c[(n=i)+u]===d&&c[n+u-1]===l&&c[n]===c[e]&&c[++n]===c[e+1]){e+=2,n++;do{}while(c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=i,u=r,r>=h)break;l=c[e+u-1],d=c[e+u]}}}while((i=a[i&f])>o&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var i,n,r,s,e,u,h,o,c,f,a=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-Nt)){t.window.set(t.window.subarray(a,a+a),0),t.match_start-=a,t.strstart-=a,t.block_start-=a,i=n=t.hash_size;do{r=t.head[--i],t.head[i]=r>=a?r-a:0}while(--n);i=n=a;do{r=t.prev[--i],t.prev[i]=r>=a?r-a:0}while(--n);s+=a}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,o=t.strstart+t.lookahead,c=s,f=void 0,(f=u.avail_in)>c&&(f=c),n=0===f?0:(u.avail_in-=f,h.set(u.input.subarray(u.next_in,u.next_in+f),o),1===u.state.wrap?u.adler=H(u.adler,h,f,o):2===u.state.wrap&&(u.adler=z(u.adler,h,f,o)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=xt(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=xt(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Nt&&0!==t.strm.avail_in)},jt=function(t,i){for(var n,r;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&i===et)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Nt&&(t.match_length=Dt(t,n)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=xt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,i===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,i){for(var n,r,s;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&i===et)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Nt&&(t.match_length=Dt(t,n),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Ct(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Ct(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,i===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2};function Ft(t,i,n,r,s){this.good_length=t,this.max_lazy=i,this.nice_length=n,this.max_chain=r,this.func=s}var Ht=[new Ft(0,0,0,0,(function(t,i){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&i===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Ct(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Nt&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ct(t,!1),t.strm.avail_out),1)})),new Ft(4,4,8,4,jt),new Ft(4,5,16,8,jt),new Ft(4,6,32,32,jt),new Ft(4,4,16,16,qt),new Ft(8,16,32,32,qt),new Ft(8,16,128,128,qt),new Ft(8,32,128,256,qt),new Ft(32,128,258,1024,qt),new Ft(32,258,258,4096,qt)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Lt(this.dyn_ltree),Lt(this.dyn_dtree),Lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zt=function(t){if(!t||!t.state)return Ot(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var i=t.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap?42:Rt,t.adler=2===i.wrap?0:1,i.last_flush=et,tt(i),ft},Jt=function(t){var i=zt(t);return i===ft&&function(t){t.window_size=2*t.w_size,Lt(t.head),t.max_lazy_match=Ht[t.level].max_lazy,t.good_match=Ht[t.level].good_length,t.nice_match=Ht[t.level].nice_length,t.max_chain_length=Ht[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),i},Wt=function(t,i,n,r,s,e){if(!t)return vt;var u=1;if(i===wt&&(i=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||n!==St||r<8||r>15||i<0||i>9||e<0||e>gt)return Ot(t,vt);8===r&&(r=9);var h=new Vt;return t.state=h,h.strm=t,h.wrap=u,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=i,h.strategy=e,h.method=n,Jt(t)},Gt=function(t,i){var n,r;if(!t||!t.state||i>ct||i<0)return t?Ot(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===kt&&i!==ot)return Ot(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=i,42===s.status)if(2===s.wrap)t.adler=0,Mt(s,31),Mt(s,139),Mt(s,8),s.gzhead?(Mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Mt(s,255&s.gzhead.time),Mt(s,s.gzhead.time>>8&255),Mt(s,s.gzhead.time>>16&255),Mt(s,s.gzhead.time>>24&255),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Mt(s,255&s.gzhead.extra.length),Mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=z(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,3),s.status=Rt);else{var u=St+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Rt,Pt(s,u),0!==s.strstart&&(Pt(s,t.adler>>>16),Pt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(n=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),_t(t),n=s.pending,s.pending!==s.pending_buf_size));)Mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),_t(t),n=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),_t(t),n=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),0===r&&(s.status=Tt)}else s.status=Tt;if(s.status===Tt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&_t(t),s.pending+2<=s.pending_buf_size&&(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),t.adler=0,s.status=Rt)):s.status=Rt),0!==s.pending){if(_t(t),0===t.avail_out)return s.last_flush=-1,ft}else if(0===t.avail_in&&It(i)<=It(e)&&i!==ot)return Ot(t,dt);if(s.status===kt&&0!==t.avail_in)return Ot(t,dt);if(0!==t.avail_in||0!==s.lookahead||i!==et&&s.status!==kt){var h=s.strategy===pt?function(t,i){for(var n;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(i===et)return 1;break}if(t.match_length=0,n=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(s,i):s.strategy===mt?function(t,i){for(var n,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&i===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(s,i):Ht[s.level].func(s,i);if(3!==h&&4!==h||(s.status=kt),1===h||3===h)return 0===t.avail_out&&(s.last_flush=-1),ft;if(2===h&&(i===ut?st(s):i!==ct&&(it(s,0,0,!1),i===ht&&(Lt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),_t(t),0===t.avail_out))return s.last_flush=-1,ft}return i!==ot?ft:s.wrap<=0?at:(2===s.wrap?(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),Mt(s,t.adler>>16&255),Mt(s,t.adler>>24&255),Mt(s,255&t.total_in),Mt(s,t.total_in>>8&255),Mt(s,t.total_in>>16&255),Mt(s,t.total_in>>24&255)):(Pt(s,t.adler>>>16),Pt(s,65535&t.adler)),_t(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?ft:at)},Bt=function(t,i){var n=i.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=H(t.adler,i,n,0)),r.wrap=0,n>=r.w_size){0===s&&(Lt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(i.subarray(n-r.w_size,n),0),i=e,n=r.w_size}var u=t.avail_in,h=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=i,Ut(r);r.lookahead>=3;){var c=r.strstart,f=r.lookahead-2;do{r.ins_h=xt(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--f);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=h,t.input=o,t.avail_in=u,r.wrap=s,ft},Kt={deflateInit:function(t,i){return Wt(t,i,St,15,8,At)},deflateInit2:Wt,deflateReset:Jt,deflateResetKeep:zt,deflateSetHeader:function(t,i){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=i,ft):vt},deflate:Gt,deflateEnd:function(t){if(!t||!t.state)return vt;var i=t.state.status;return 42!==i&&69!==i&&73!==i&&91!==i&&i!==Tt&&i!==Rt&&i!==kt?Ot(t,vt):(t.state=null,i===Rt?Ot(t,lt):ft)},deflateSetDictionary:Bt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},Xt=function(t){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Yt(n,r)&&(t[r]=n[r])}}return t},$t=function(t){for(var i=0,n=0,r=t.length;n<r;n++)i+=t[n].length;var s=new Uint8Array(i),e=(n=0,0);for(r=t.length;n<r;n++){var u=t[n];s.set(u,e),e+=u.length}return s},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Qt=new Uint8Array(256),ti=0;ti<256;ti++)Qt[ti]=ti>=252?6:ti>=248?5:ti>=240?4:ti>=224?3:ti>=192?2:1;Qt[254]=Qt[254]=1;var ii=function(t,i){if(void 0===i&&(i=t.length),i<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));for(var n="",r=0;r<i;r++)n+=String.fromCharCode(t[r]);return n},ni=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var i,n,r,s,e,u=t.length,h=0;for(s=0;s<u;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),h+=n<128?1:n<2048?2:n<65536?3:4;for(i=new Uint8Array(h),e=0,s=0;e<h;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?i[e++]=n:n<2048?(i[e++]=192|n>>>6,i[e++]=128|63&n):n<65536?(i[e++]=224|n>>>12,i[e++]=128|n>>>6&63,i[e++]=128|63&n):(i[e++]=240|n>>>18,i[e++]=128|n>>>12&63,i[e++]=128|n>>>6&63,i[e++]=128|63&n);return i};var ri=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},si=Object.prototype.toString,ei=W,ui=G,hi=B,oi=K,ci=Y,fi=X,ai=$,vi=Z,li=Q;function di(t){this.options=Xt({level:ai,method:li,chunkSize:16384,windowBits:15,memLevel:8,strategy:vi},t||{});var i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ri,this.strm.avail_out=0;var n=Kt.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(n!==ci)throw new Error(J[n]);if(i.header&&Kt.deflateSetHeader(this.strm,i.header),i.dictionary){var r=void 0;if(r="string"==typeof i.dictionary?ni(i.dictionary):"[object ArrayBuffer]"===si.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,(n=Kt.deflateSetDictionary(this.strm,r))!==ci)throw new Error(J[n]);this._dict_set=!0}}function wi(t,i){return(i=i||{}).gzip=!0,function(t,i){var n=new di(i=i||{});if(n.push(t,!0),n.err)throw n.msg||J[n.err];return n.result}(t,i)}return di.prototype.push=function(t,i){var n,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=i===~~i?i:!0===i?oi:ei,"string"==typeof t?s.input=ni(t):"[object ArrayBuffer]"===si.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===ui||r===hi)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((n=Kt.deflate(s,r))===fi)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),n=Kt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ci;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},di.prototype.onData=function(t){this.chunks.push(t)},di.prototype.onEnd=function(t){t===ci&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,i){var n=wi(i);return"base64"===t?btoa(ii(n)):n}}var zh=function(t){function i(i){var n=t.call(this,Vh,i)||this;return n.algorithm=Si.GZIP,n}return ut(i,t),i}(Hh),Jh=function(t){function i(i){var n=t.call(this,Wh,i)||this;return n.nm=Vh(),n.algorithm=Si.GZIP,n}return ut(i,t),i.prototype.compressSync=function(t){return this.nm("base64",t)},i}(Hh);function Wh(){return function(t,i){var n=new Response(i).body.pipeThrough(new CompressionStream("gzip")),r=new Response(n).arrayBuffer();return"base64"===t?r.then((function(t){return i=t,new Promise((function(t){var n=new FileReader;n.onload=function(i){return t(i.target.result.split(",")[1])},n.readAsDataURL(new Blob([i]))}));var i})):r}}var Gh,Bh,Kh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i}("undefined"!=typeof CompressionStream?Jh:zh),Yh=function(){function t(){}return t.create=function(t){return this.instance?this.instance:er.isCompressionEnabled()?this.instance=new Kh(t):new Mi(t)},t}(),Xh=function(){function t(t){this.Ra=t,this.ka=[]}return t.prototype.addUrlMaskingPattern=function(t){var i=this.Ra.getUrlMaskingPattern(t);csArray.prototype.push.call(this.ka,i)},t.prototype.anonymize=function(t){var i=this.Ra.removeQueryString(t.url);return ht(ht({},t),{url:this.Ra.anonymizeUrl(i,this.ka),library:t.library?this.Ra.anonymizeUrl(t.library,this.ka):void 0})},t}(),$h=function(){function t(t,i){this.U=t,this.X=i}return t.prototype.anonymize=function(t){return j(t.message)&&(t.message=this.rm(t.message),t.message=this.U.anonymizeEmail(t.message)),j(t.filename)&&(t.filename=this.X.computeOverriddenUrl(t.filename)),t},t.prototype.rm=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),Zh=function(){function t(){}return t.prototype.setItem=function(t,i){window.sessionStorage.setItem(t,i)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),Qh=function(){function t(){}return t.prototype.setItem=function(t,i){window.localStorage.setItem(t,i)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),to=["visit",2],io=["page",3],no=["nextPageOnly",4],ro=function(){function t(t,i){this.U=t,this.uw=i,this.sm={},this.um={}}return t.prototype.set=function(t,i,n,r){var s,e;if(t>0&&H(i)&&H(n)&&!V(i)&&!V(n)){var u=this.U.anonymizeEmail(csString(i)),h=this.U.anonymizeEmail(csString(n));if(s=[u.slice(0,512),h.slice(0,255)],e=""!==n,!F(r)||csArray.prototype.indexOf.call(to,r)>=0){var o=this.getCustomVariablesSession();e?o[t]=s:delete o[t],this.setCustomVariableSession(o)}(!F(r)||csArray.prototype.indexOf.call(io,r)>=0)&&(e?this.sm[t]=s:delete this.sm[t]),F(r)&&csArray.prototype.indexOf.call(no,r)>=0&&(e?this.um[t]=s:delete this.um[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.uw.get();if(!t)return{};var i=window.csJSON.parse(t);return null!==i&&q(i)?i:{}},t.prototype.setCustomVariableSession=function(t){this.uw.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.uw.remove()},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var i in this.um)this.um.hasOwnProperty(i)&&(this.sm[i]=this.um[i]);for(var i in this.sm)this.sm.hasOwnProperty(i)&&(t[i]=this.sm[i]);if(window.csJSON.stringify(t).length<=2)return{};var n={cvars:this.hm(t)};return this.sm&&window.csJSON.stringify(this.sm).length>2&&(n.cvarp=this.hm(this.sm)),n},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.um).length>0)for(var t in this.um)this.um[t]===this.sm[t]&&(delete this.sm[t],delete this.um[t])},t.prototype.hm=function(t){for(var i in t)if(t.hasOwnProperty(i)){var n=parseInt(i,10),r=t[i],s=r[0],e=r[1];h=1,o=20,(!(U(u=n)&&u>=h&&u<=o)||s.length>512||e.length>255)&&delete t[i]}var u,h,o,c=function(t){var i;for(i in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),so=["setCustomVariable"],eo=function(){function t(t,i){this.do=t,this.Tt=i}return t.prototype.init=function(){var t=this;this.do.register(so,(function(i,n,r,s){t.Tt.set(i,n,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.Tt.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.Tt.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.Tt.removeCustomVariablesSession()},t}(),uo=function(){function t(t){this.D=t,this.om=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.om,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.D.apiErrors.validCustomHeaders)return!1;var i=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.D.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===i}))},t}(),ho=function(){function t(t){this.U=t}return t.prototype.getUrlMaskingPattern=function(i){for(var n=[],r=0,s=csString.prototype.split.call(i,"/");r<s.length;r++){var e=s[r];I(e,t.fm)?csArray.prototype.push.call(n,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(n,{key:e,value:null})}return n},t.prototype.anonymizeUrl=function(t,i){var n=this.U.anonymizeEmail(t);return n=this.U.anonymizeJwt(n),i.length>0?this.am(n,i):n},t.prototype.removeQueryString=function(t){var i=this.vm(t),n=i.path;return""!==i.queryString?"".concat(n,"?"):n},t.prototype.vm=function(t){var i=csString.prototype.indexOf.call(t,"?"),n="",r="";return-1!==i?(n=csString.prototype.slice.call(t,0,i),r=csString.prototype.slice.call(t,i,t.length)):n=t,{path:n,queryString:r}},t.prototype.am=function(t,i){for(var n=this.vm(t),r=n.path,s=n.queryString,e=csString.prototype.split.call(r,"/"),u=0,h=i;u<h.length;u++){var o=h[u],c=this.lm(e,o);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.lm=function(i,n){if(i.length<n.length)return null;for(var r="",s=0;s<i.length;s+=1)if(s>=n.length)r+="".concat(i[s],"/");else if(I(n[s].key,t.fm))r+="".concat(n[s].value,"/");else{if(i[s]!==n[s].key)return null;r+="".concat(i[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.fm=":",t}(),oo=function(){function t(t,i){this.oc=t,this.D=i}return t.prototype.getEventTargetPath=function(t){var i=Xi(t);return this.oc.getElementPath(i,ht({dynamicIdRegex:this.D.dynamicIdRegex},this.D.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var i=Xi(t),n=this.oc.getElementPathAndFirstAnchorParent(i,ht({dynamicIdRegex:this.D.dynamicIdRegex},this.D.pathComputationRules)),r=n.path,s=n.firstAnchorParent;return{path:r,targetLink:this.dm(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var i=Xi(t);return this.oc.isValidElement(i)},t.prototype.getElementPath=function(t){return this.oc.getElementPath(t,ht({dynamicIdRegex:this.D.dynamicIdRegex},this.D.pathComputationRules))},t.prototype.dm=function(t){var i;return null!==t&&t.hasAttribute("href")&&!I(null!==(i=t.getAttribute("href"))&&void 0!==i?i:"","#")},t}(),co=function(){function t(t){this.Yc=t}return t.prototype.transformEvent=function(t,i){var n=this.wm(t,i),r=this.Yc.getElementPath(t);return this.ym(r,n)},t.prototype.wm=function(t,i){if(function(t){return void 0!==t.x&&void 0!==t.y}(i)){var n=t.getBoundingClientRect();i.x=Math.round(n.left+i.x+un.windowOffsetX()),i.y=Math.round(n.top+i.y+un.windowOffsetY())}return i},t.prototype.ym=function(t,i){return ks(i)&&(i.tgt="".concat(t).concat(Uh).concat(i.tgt)),function(t){return void 0!==t.tgtHM}(i)&&(i.tgtHM="".concat(t).concat(Uh).concat(i.tgtHM)),function(t){return void 0!==t.tgtLk}(i)&&(i.tgtLk="".concat(t).concat(Uh).concat(i.tgtLk)),i},t}(),fo=function(){function t(t){this.Yc=t}return t.prototype.transformEvent=function(t,i){var n=this.Yc.getElementPath(t);return{iframePath:i.iframePath?"".concat(n).concat(Uh).concat(i.iframePath):n,commands:i.commands}},t}(),ao=function(){function t(t){this.Yc=t}return t.prototype.transformEvent=function(t,i){if(0===i.products.length)return i;var n=this.Yc.getElementPath(t),r=csArray.prototype.map.call(i.products,(function(t){return ht(ht({},t),{targetPath:"".concat(n).concat(Uh).concat(t.targetPath)})}));return ht(ht({},i),{products:r})},t}(),vo=function(){function t(t){this.mi=t,this.pm={clientX:2,clientY:3},this.gm={clientX:1,clientY:2},this.Am=[Li.POINTER_DOWN,Li.POINTER_MOVE,Li.POINTER_UP],this.Em=[Li.TOUCH_START,Li.TOUCH_MOVE,Li.TOUCH_END]}return t.prototype.transformEvents=function(t,i){var n=this;if(!on.isConnected(t))return i.events=csArray.prototype.filter.call(i.events,(function(t){return t.type!==Li.VISIBILITY_CHANGE})),0===i.events.length||(J.warn("IframeRecordingEventsTransformer received event ".concat(qt.RecordingEvent," \n        from disconnected iframe, content:").concat(csJSON.stringify(i.events))),i.events=[]),i;var r=this.mi.getId(t);if(void 0===r)return J.error("IframeRecordingEventsTransformer received event ".concat(qt.RecordingEvent," \n        from unidentified iframe, content:").concat(csJSON.stringify(i.events))),i.events=[],i;var s=null;csArray.prototype.some.call(i.events,(function(t){return n.Sm(t)||n.bm(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=i.events;e<u.length;e++){var h=u[e];this.Sm(h)?this.Nm(s,h):this.bm(h)&&this.Tm(s,h),h.context=h.context&&h.context.length>0?"".concat(r,"/").concat(h.context):"".concat(r)}return i},t.prototype.Tm=function(t,i){this.Rm(this.gm,t,i)},t.prototype.Nm=function(t,i){this.Rm(this.pm,t,i)},t.prototype.Rm=function(t,i,n){n.args&&(n.args[t.clientX]=Math.round(i.left+n.args[t.clientX]),n.args[t.clientY]=Math.round(i.top+n.args[t.clientY]))},t.prototype.Sm=function(t){return-1!==csArray.prototype.indexOf.call(this.Am,t.type)},t.prototype.bm=function(t){return-1!==csArray.prototype.indexOf.call(this.Em,t.type)},t}(),lo=["img","link"],wo={1:"Style",3:"Import",5:"Font"},yo=function(t){var i,n,r=csString.prototype.match.call(t,/url\(['"]?(?<url>[^\)]+)['"]?\)/);if(null===(i=null==r?void 0:r.groups)||void 0===i?void 0:i.url)return r.groups.url;var s=csString.prototype.match.call(t,/@import\s(?<url>.+)\s/);return(null===(n=null==s?void 0:s.groups)||void 0===n?void 0:n.url)||""},po=function(){function t(){}return t.prototype.serializeAttribute=function(t,i){var n=csString.prototype.toLowerCase.call(t.localName);if(csArray.prototype.some.call(lo,(function(t){return t===n}))){var r="img"===n?"src":"href",s=i.name,e=i.value;s===r&&("link"===n&&this.processLink(t),this.sendAsset(n,e))}},t.prototype.processLink=function(t){var i,n=this;try{var r=csArray.prototype.flat.call(csArray.from((null===(i=t.sheet)||void 0===i?void 0:i.cssRules)||[]));csArray.prototype.forEach.call(r,(function(t){var i=wo[t.type]||"Unknown",r="process".concat(i);n[r].apply(n,[t])}))}catch(t){}},t.prototype.processStyle=function(t){var i=yo(t.style.backgroundImage);i&&this.sendAsset("img",i)},t.prototype.processImport=function(t){var i=yo(t.href);i&&this.sendAsset("link",i)},t.prototype.processFont=function(t){var i=yo(t.style.src);i&&this.sendAsset("font",i)},t.prototype.sendAsset=function(t,i){var n=-1!==csString.prototype.indexOf.call(i,"://"),r=new csURL(n?i:"invalid:".concat(i)).pathname,s={type:t,fileName:csArray.prototype.pop.call(csString.prototype.split.call(r,"/"))||"",assetPath:"/"===r[0]?r:"/".concat(r),app_framework:"framework",app_version:"version",app_bundle_id:"bundle_id"};console.log("got asset toSend",s)},t}(),mo=["trackWebView"],go=function(){function t(t){this.do=t}return t.prototype.init=function(){var t=this;this.do.register(mo,(function(i){var n="track".concat(i),r=t[n];"function"==typeof r&&r.apply(t,[])}))},t.prototype.trackSnapshot=function(){var t=new po,i=new jr([t]).serialize(document.getRootNode());console.log("serialisation done",i)},t}(),Ao=function(){function t(t,i,n){this.D=t,this.$=i,this.j=n}return t.prototype.init=function(){var t,i,n,r=this,s="boot";(null===(t=window.performance)||void 0===t?void 0:t.mark)&&window.performance.mark("cs-start-".concat(s));var e=new Vu,u=new St,h=new ho(u),o=new xh(window.location,h),c=new Kt(this.D,o,this.$);c.init();var f=new Zh,a=new Qh,v=new sh(window.location,c),l=new Th(this.D,c);l.init();var d,w=Yh.create(J.warn);if(this.D.useMalkaPipeline){var y=new Pi(this.D.getQuotaServiceUri(),"quota");(d=new Uu(this.D,w,y,e,v,o)).init()}else d=new Du(this.D,w,v,o);var p=new di(this.D,c,l,f),m=new ju(p,d),g=new hi(this.D,c,l,f),A=new Mu(this.D,g,m);this.j.setContext(A,m),d.setVisitorService(A);var E=new Fu(A,m),S=new gi(this.D,c,l,f),b=new $u(window.location,S),N=new Zu(b),T=new qu(this.D,A,b),R=new Nn,k=new oo(nt,this.D),O=new co(k),I=new fo(k),L=new ao(k),x=new vo(R),_=new jh(O,I,L,x),C=new dh,M=new vh(C,_),P=new th(o),D=new nh(P,C),U=new Ei(this.D,c,l,f),j=new ro(u,U),q=new eo(C,j),F=new si(A,m,b,j,this.D),H=new Ni,V=new bi(H,window.location),z=new ah(this.D,F,V),W=new Rh(this.D,H);l.setStates(F,W),new _u(this.D,A,b,T,E,z,l,v).compute((function(t){var i;M.init();var n=new _h,f=new Wu(r.D,c,a),v=new Yu(r.D,f,e),l=new Ku(C,v),d=new uh(r.D,c,a),y=new hh(e,window.location,d),p=new ch(C,y),g=new Ih(C,r.D),E=new kh(r.D,A,m),S=new Oh,b=new sr,T=new uo(r.D),R=new Ph(b,T,r.D),O=new Dh(b,T,r.D),I=new Ch(R,O),L=new Xh(h),x=new $h(u,o),U=new bh(S,x,I,L,u,r.D,E,_,C,n,o);(U.init(),(null===(i=window.performance)||void 0===i?void 0:i.mark)&&window.performance.mark("cs-step2-".concat(s)),e.addListeners(U),new go(C).init(),t)?(e.emitInitTracking(),new xu(E,w,A,m,e,C,M,r.D,p,y,l,v,u,k,h,o,g,n,S,x,I,L,_,j,q,P,D).start()):new Xu(e,C,M,p,y,N,l).start()})),(null===(i=window.performance)||void 0===i?void 0:i.mark)&&(null===(n=window.performance)||void 0===n?void 0:n.measure)&&(window.performance.mark("cs-end-".concat(s)),window.performance.measure("cs-measure-".concat(s),"cs-start-".concat(s),"cs-end-".concat(s)))},t}();!function(t){var i,n="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var h=t.source,o=t.data;if(e(o)){var a=function(){var i,n,r,e=s("{domain}/tag/tag.bundle.js?v={version}",o);i=e,n=function(){return h.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=i,r.onload=n,r.charset="utf-8",document.head.appendChild(r)};i=o.token,f(r.loadBundle),u(t.origin)?a():function(t,i){var r=s(n,t),e=function(t){var i=document.createElement("iframe");return i.src=t,i.id="content-square-bridge",i.setAttribute("style","display: none !important; visibility: hidden !important;"),i}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(f(u),e.remove(),i())};c(u),document.head.appendChild(e)}(o,a)}}};function s(t,i){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",i.version),"{token}",i.token),"{domain}",i.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&o(t.version)&&h(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function h(t){return/^[a-zA-Z0-9]+$/.test(t)}function o(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function f(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return i},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=h,t.isAuthorizedTagVersion=o,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=f}(Gh||(Gh={})),function(t){var i,n=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(i=t.origin,o(s.ping),h(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var i=t.data;"string"==typeof i&&"ping"!==i&&(o(s.insertMessageScript),u(i))}))};function e(t){return csArray.prototype.some.call(r,(function(i){return i.test(t)}))}function u(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(i,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=n,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function h(t){window.addEventListener("message",t,!1)}function o(t){window.removeEventListener("message",t,!1)}function c(t){return function(n){n.origin===i&&t(n)}}t.getToken=function(){return Gh.getToken()},t.isActivable=function(){return window!==n&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){h(s.ping),Gh.waitForBundleInjection()},t.listen=h,t.removeListener=o,t.secureListener=c,t.post=function(t){i&&n.postMessage(t,i)}}(Bh||(Bh={}));var Eo,So,bo=window.CSFrameCommunication||Bh,No=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i.prototype.emitAfterPageViewCallback=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},i.prototype.emitIntegrationSessionKeyCallback=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},i.prototype.emitParentRecordingStatusChange=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},i}(Hu),To=function(){function t(t){this.km=t}return t.prototype.init=function(){this.km.register(ds),this.km.register(so),this.km.register(De),this.km.register(Ue),this.km.register(Pe),this.km.register(Es),this.km.register(Ss),this.km.register(bs),this.km.register(Ns),this.km.register(Je),this.km.register(We),this.km.register(oh),this.km.register(au),this.km.register(vu),this.km.register(Gu),this.km.register(Bu),this.km.register(Sh),this.km.register(Eh)},t.prototype.onStartTracking=function(){this.km.start()},t.prototype.onOptout=function(){this.km.stop()},t}(),Ro=function(t){function i(i,n){var r=t.call(this)||this;return r.do=i,r.Om=n,r.Go=[],r}return ut(i,t),i.prototype.onStart=function(){this.commandsBatchReady()},i.prototype.onStop=function(){this.Go=[]},i.prototype.register=function(t){for(var i=this,n=function(t){r.do.register([t],(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return i.send(t,n)}))},r=this,s=0,e=t;s<e.length;s++){n(e[s])}},i.prototype.send=function(t,i){csArray.prototype.push.call(this.Go,{name:t,params:i}),this.isStarted&&this.commandsBatchReady()},i.prototype.commandsBatchReady=function(){if(0!==this.Go.length){var t={commands:this.Go};this.Om.sendToParent(qt.Commands,t),this.Go=[]}},ot([W("Commands.iframe.commandsBatch.send")],i.prototype,"send",null),ot([wr(),W("send iframe commands batch")],i.prototype,"commandsBatchReady",null),i}(dn),ko=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.D=i,e.Qi=n,e.Im=r,e.Lm=s,e.xm=null,e._m=25,e.Cm=[],e.Mm={boundElement:window,type:"message",listener:function(t){return e.jl(t)}},e}return ut(i,t),i.prototype.onStart=function(){ji(this.Mm,!1),this.Pm()},i.prototype.onStop=function(){qi(this.Mm,!1),this.xm&&(Ft.closeChannelPort(this.xm),this.xm=null)},i.prototype.sendToParent=function(t,i){var n=this.Dm(t,i);this.Wy(n)},i.prototype.Pm=function(){var t=this.Dm(qt.Discovery);Ft.sendPostMessage(window.parent,"*",t)},i.prototype.Dm=function(t,i){var n=Ft.buildBaseMessage(t,jt.Child,this.D.projectId);return i&&(n.content=i),n},i.prototype.Wy=function(t){null!==this.xm?Ft.sendChannelMessage(this.xm,t):this.Um(t)},i.prototype.jm=function(t,i){var n=this,r=new MessageChannel;this.xm=r.port1,this.xm.onmessage=function(t){n.nd(t)};var s=this.Dm(qt.Discovery);s.id=i,Ft.sendPostMessage(window.parent,t,s,[r.port2]),this.qm()},i.prototype.nd=function(t){switch(t.data.type){case qt.IntegrationCallback:var i=t.data.content;i.initiator===Ut.AfterPageView?this.Lm.emitAfterPageViewCallback(i):i.initiator===Ut.GetSessionKey?this.Lm.emitIntegrationSessionKeyCallback(i):J.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case qt.Stop:this.Qi.emitOptout();break;case qt.RecordingStatus:var n=t.data.content;this.Im.setRecordingStatus(n),this.Lm.emitParentRecordingStatusChange(n);break;default:J.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},i.prototype.jl=function(t){if(null===this.xm&&Ft.isMessageValid(t,jt.Parent,this.D.projectId,this.D.hostnames))switch(t.data.type){case qt.Stop:this.Qi.emitOptout();break;case qt.Discovery:if(!U(t.data.id)||t.data.id<0)return void J.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.jm(t.origin,t.data.id);break;default:J.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},i.prototype.Um=function(t){this.Cm.length<this._m&&csArray.prototype.push.call(this.Cm,t)},i.prototype.qm=function(){if(null!==this.xm){for(var t=0,i=this.Cm;t<i.length;t++){var n=i[t];Ft.sendChannelMessage(this.xm,n)}this.Fm(),this.Cm=[]}},i.prototype.Fm=function(){var t=Ft.buildBaseMessage(qt.EndOfBufferedMessages,jt.Child,this.D.projectId);Ft.sendChannelMessage(this.xm,t)},i}(dn),Oo=function(t){function i(i,n){var r=t.call(this)||this;return r.Cn=i,r.Om=n,r}return ut(i,t),i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.tr,(function(i){return t.Qn(i)}))},i.prototype.onStop=function(){this.Cn.unsubscribe(i.tr)},i.prototype.Qn=function(t){this.isStarted&&this.Om.sendToParent(qt.ApiError,t)},i.tr="ChildApiErrorsService",i}(dn),Io=function(t){function i(i,n){var r=t.call(this)||this;return r.Cn=i,r.Om=n,r}return ut(i,t),i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.tr,(function(i){return t.Qn(i)}),{detailedEvent:!0})},i.prototype.onStop=function(){this.Cn.unsubscribe(i.tr)},i.prototype.Qn=function(t){this.isStarted&&this.Om.sendToParent(qt.DetailedApiError,t)},i.tr="ChildDetailedApiErrorsService",i}(dn),Lo=function(t){function i(i,n){var r=t.call(this)||this;return r.xn=i,r.Om=n,r}return ut(i,t),i.prototype.onStart=function(){var t=this;this.xn.subscribe(i.tr,(function(i){return t.Qn(i)}))},i.prototype.onStop=function(){this.xn.unsubscribe(i.tr)},i.prototype.Qn=function(t){this.isStarted&&this.Om.sendToParent(qt.JavascriptError,t)},i.tr="ChildJavaScriptErrorsService",i}(dn),xo=function(){function t(t,i,n,r){this.xn=t,this.Cn=i,this.D=n,this.Om=r}return t.prototype.init=function(){this.Hm=new Lo(this.xn,this.Om),this.Cn.excludeDomains([lh.CONTENTSQUARE,lh.CLICKTALE,lh.FAKE_TRACKER]),this.Vm=new Oo(this.Cn,this.Om),this.zm=new Io(this.Cn,this.Om),this.Cn.init()},t.prototype.onStartTracking=function(){this.D.jsErrorsEnabled&&this.Hm.start(),this.D.apiErrors.enabled&&this.Vm.start()},t.prototype.onParentRecordingStatusChange=function(t){this.D.apiErrors.enabled&&(t.isRecording?this.zm.start():this.zm.stop())},t.prototype.onOptout=function(){this.Hm.stop(),this.Vm.stop(),this.zm.stop()},t}(),_o=function(){function t(t){this.Om=t}return t.prototype.onStartTracking=function(){this.Om.start()},t.prototype.onOptout=function(){this.Om.stop()},t}(),Co=function(){function t(t,i,n,r){this.Ho=t,this.Vo=i,this.Om=n,this.Im=r}return t.prototype.init=function(){var t=this;this.Ho.onChildMessage((function(i,n,r){return t.Vo.emitIframeEvent(i,n,r)})),this.Ho.setRecordingStatusCallback((function(){return t.Im.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Ho.start()},t.prototype.onOptout=function(){this.Ho.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var i={events:t,containsUserEvent:!0};this.Om.sendToParent(qt.RecordingEvent,i)},t.prototype.onIframeRecordingBrowserEvent=function(t){var i={events:t,containsUserEvent:!1};this.Om.sendToParent(qt.RecordingEvent,i)},t.prototype.onIframeAnalysisEvent=function(t){this.Om.sendToParent(qt.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.Om.sendToParent(qt.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.Om.sendToParent(qt.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.Om.sendToParent(qt.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.Om.sendToParent(qt.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.Om.sendToParent(qt.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.Om.sendToParent(qt.IntegrationCallback,t)},t.prototype.onAfterPageViewCallback=function(t){this.Ho.sendToChildren(qt.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Ho.sendToChildren(qt.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Ho.sendToChildren(qt.RecordingStatus,t)},t}(),Mo=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.Vc=i,u.Qu=n,u.Om=r,u.Qc=s,u.if=e,u}return ut(i,t),i.prototype.init=function(){var t,i,n=this;this.Vc.onEvent((function(t){return n.Qn(t)})),this.Qu.onEvent((function(t){return n.Qn(t)})),null===(t=this.Qc)||void 0===t||t.onEvent((function(t){return n.Qn(t)})),null===(i=this.if)||void 0===i||i.onEvent((function(t){return n.Qn(t)}))},i.prototype.onStart=function(){var t,i;this.Vc.start(),this.Qu.start(),null===(t=this.Qc)||void 0===t||t.start(),null===(i=this.if)||void 0===i||i.start()},i.prototype.onStop=function(){var t,i;this.Vc.stop(),this.Qu.stop(),null===(t=this.Qc)||void 0===t||t.stop(),null===(i=this.if)||void 0===i||i.stop()},i.prototype.Qn=function(t){this.isStarted&&t.type!==Vr.RESIZE&&this.Om.sendToParent(qt.AnalysisEvent,t)},i}(dn),Po=function(){function t(t,i,n,r){this.D=t,this.Yc=i,this.pi=n,this.Om=r}return t.prototype.init=function(){var t,i;this.D.accessibilityEnabled&&(t=new be,i=new Ne);var n=new Js(this.D,this.Yc,this.pi),r=new Cs(this.D,this.Yc,new ku(J));this.Jm=new Mo(n,r,this.Om,t,i),this.Jm.init()},t.prototype.onStartTracking=function(){this.Jm.start()},t.prototype.onOptout=function(){this.Jm.stop()},t}(),Do=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ut(i,t),i}(Ye),Uo=function(){function t(t,i,n){this.X=t,this.Wm=i,this.Om=n,this.ov=[]}return t.prototype.collect=function(){var t=this.Wm.collectProductsAndAnchors().products;this.ov=t,this.Gm=this.X.getAnonymizedUrl(),this.Bm()},t.prototype.clearProducts=function(){this.ov=[]},t.prototype.Bm=function(){var t={targetUrl:this.Gm,windowWidth:un.windowWidth(),windowHeight:un.windowHeight(),products:this.ov};this.Om.sendToParent(qt.EmerchandisingMessage,t)},t}(),jo=function(){function t(t,i,n,r){this.D=t,this.Yc=i,this.X=n,this.Om=r}return t.prototype.init=function(){var t=new Do(this.D,this.Yc);this.Km=new Uo(this.X,t,this.Om)},t.prototype.onStartTracking=function(){this.Km.clearProducts(),this.Km.collect()},t.prototype.onAfterPageViewCallback=function(){this.Km.clearProducts(),this.Km.collect()},t}(),qo=function(t){function i(i,n,r,s,e,u,h,o,c,f,a,v){var l=t.call(this)||this;return l.D=i,l.Nn=n,l.Tn=r,l.Rn=s,l.kn=e,l.On=u,l.Zi=h,l.Ln=o,l.Mn=c,l.Ai=f,l.Un=a,l.Om=v,l.Vn=new ln,l.zn=!1,l.Sn=[],l.Ym=!1,l.Wn=function(t){return l.nf(t)},l.Gn=function(t){return l.Bn(t)},l}return ut(i,t),i.prototype.init=function(){this.Yn()},i.prototype.Yn=function(){this.Nn.onEvent(this.Wn),this.Tn.onEvent(this.Wn),this.kn.onEvent(this.Wn),this.Rn.onEvent(this.Gn),this.Zi.onEvent(this.Wn),this.Ln.onEvent(this.Wn),this.Mn.onEvent(this.Wn),this.On.onEvent(this.Gn),this.Ai.onTextNodeToEncrypt(this.Wn),this.Un.onEvent(this.Wn)},i.prototype.blockSendingEventsFromSerialization=function(){this.zn=!1},i.prototype.allowSendingEventsFromSerialization=function(){this.zn=!0},i.prototype.nf=function(t){this.Xm(t),this.$m()},i.prototype.Bn=function(t){this.Zm(t),this.$m()},i.prototype.Zm=function(t){csArray.prototype.push.call(this.Sn,t),this.Ym=!0},i.prototype.Xm=function(t){csArray.prototype.push.call(this.Sn,t)},i.prototype.$m=function(){if(this.zn){var t={containsUserEvent:this.Ym,events:this.Sn};this.Om.sendToParent(qt.RecordingEvent,t),this.Sn=[],this.Ym=!1}},i.prototype.onStart=function(){this.Un.start(),this.Ln.start(),this.Tn.start(),this.Nn.start(),this.Mn.start(),this.kn.start(),this.On.start(),this.D.emitDebugEvents&&this.Vn.emit("replayRecordingStarted")},i.prototype.onStop=function(){this.Nn.stop(),this.Tn.stop(),this.kn.stop(),this.Rn.stop(),this.Mn.stop(),this.On.stop(),this.Un.stop()},i.prototype.addInitialDom=function(t){for(var i=0;i<this.Sn.length;i+=1){if(this.Sn[i].date>t.date)return csArray.prototype.splice.call(this.Sn,i,0,t),this.Ym=!0,void this.$m()}this.Zm(t),this.$m()},i}(dn),Fo=function(){function t(t,i,n,r,s,e,u,h,o,c,f){this.D=t,this.ci=i,this.pi=n,this.U=r,this.mi=s,this.gi=e,this.Qu=u,this.Qi=h,this.Om=o,this.Im=c,this.do=f}return t.prototype.init=function(){var t=this,i=new sr,n=new Rn(this.gi);this.mo=new Cn(this.U,this.D),this.mo.init();var r=new Xn,s=new tr(i,this.mi),e=new kr(window.crypto),u=new Ir(window.crypto);u.init(),e.init();var h=new Nr,o=new Nr,c=new Nr,f=new Nr,a=new Nr,v=new Sr(this.mi,this.D,u,e,h,o,c,a,f,this.ci);v.init();var l=new br(v),d=[n,this.mo,l,r],w=new Ar(this.gi,1e3);this.D.textVisibilityEnabled&&csArray.prototype.push.call(d,w);var y,p=new Br;if(p.isSupported()&&csArray.prototype.push.call(d,p.getProcessor()),this.Ao()){var m=new Fr(this.mi);y=new Wr(d,this.mi,m)}else y=new Gr(d);this.Xi=new Sn(y,this.mi,this.mo,v),this.Rn=new tn(this.pi,this.mi,this.gi,v),this.Rn.init(),this.Tn=new cn(this.Xi,s,r,this.Qi,this.mi,this.gi),this.Qm=new qo(this.D,new bn(i,this.mi,this.gi,r),this.Tn,this.Rn,new Hn(window.location,this.U),new Lr(this.Qu,this.mi,this.gi),r,new $n(window),w,v,p,this.Om),this.do.register(ns,(function(){return t.Im.getRecordingStatus().isRecording})),this.do.register(ts,(function(i){t.mo.setWhitelistedElementsSelector(i)})),this.do.register(is,(function(i){t.gi.setPIISelectors(i)})),s.init(),this.Qm.init()},t.prototype.onParentRecordingStatusChange=function(t){t.PIISelectors&&this.gi.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.mo.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.Xi.setAnonymization(t.useAnonymization),t.isRecording?this.Qm.start():this.Qm.stop(),t.isMutationTrackerStarted?this.Tn.start():this.Tn.stop()},t.prototype.onInitialDomStart=function(){this.Qm.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.Rn.start(),this.Qm.allowSendingEventsFromSerialization(),this.Qm.addInitialDom(t)},t.prototype.Ao=function(){return Zr.isAsyncSerializationSupported()&&this.D.asyncSerializerEnabled},t}(),Ho=function(){function t(t){this.Om=t,this.Mo={}}return t.prototype.handleCommand=function(t){V(t)&&this.Po(t)},t.prototype.executeRegisteredCallbacks=function(t){var i=t.trackingContext;if(i)if(t.callbackId){var n=this.Mo[t.callbackId];n&&this.Do(n,i)}else for(var r in this.Mo)this.Do(this.Mo[r],i)},t.prototype.Po=function(t){var i=_.integer(),n={callbackId:i,initiator:Ut.AfterPageView};this.Mo[i]=t,this.Om.sendToParent(qt.IntegrationCallback,n)},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),Vo=function(){function t(t){this.Om=t,this.Uo={}}return t.prototype.handleCommand=function(t){q(t)&&V(t.callback)&&this.qo(t.callback)},t.prototype.executePendingCallbacks=function(t){var i=t.trackingContext,n=t.callbackId;if(n&&i){var r=this.Uo[n];r&&(delete this.Uo[n],this.Do(r,i.sessionKey))}},t.prototype.qo=function(t){var i=_.integer(),n={callbackId:i,initiator:Ut.GetSessionKey};this.Uo[i]=t,this.Om.sendToParent(qt.IntegrationCallback,n)},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),zo=function(){function t(t,i){this.do=t,this.Om=i}return t.prototype.init=function(){var t=this;this.tg=new Ho(this.Om),this.ig=new Vo(this.Om),this.do.register(os,(function(i){t.tg.handleCommand(i)})),this.do.register(cs,(function(i){return t.ig.handleCommand(i)}))},t.prototype.onAfterPageViewCallback=function(t){this.tg.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.ig.executePendingCallbacks(t)},t}(),Jo=function(){function t(t,i,n,r,s,e){var u=this;this.ng=t,this.Qi=i,this.D=n,this.Om=r,this.Im=s,this.do=e,this.Yd=function(){u.do.start(),u.$d.start()}}return t.prototype.start=function(){var t=this,i=new oo(nt,this.D),n=new Ve(i),r=new St,s=Yh.create(J.warn),e=new Po(this.D,i,n,this.Om),u=new _o(this.Om);if(this.D.eMerchandisingEnabled){var h=new St,o=new ho(h),c=new xh(window.location,o),f=new jo(this.D,i,c,this.Om);this.ng.addListeners(f),this.Qi.addListeners(f),f.init()}var a=new zo(this.do,this.Om);this.ng.addListeners(a),a.init();var v=new Nn,l=new Au(this.D);if(Zr.isRecordingSupported()&&s.isSupported()){var d=new ku(J),w=new Fo(this.D,s,n,r,v,l,d,this.Qi,this.Om,this.Im,this.do);this.Qi.addListeners(w),this.ng.addListeners(w),w.init()}var y=new bu(this.D,l),p=new co(i),m=new fo(i),g=new ao(i),A=new vo(v),E=new jh(p,m,g,A),S=new Co(y,E,this.Om,this.Im);E.addListeners(S),this.ng.addListeners(S),this.Qi.addListeners(u,S,e),S.init(),e.init(),this.$d=new ze,this.$d.onLoad((function(){t.Qi.emitStartTracking()})),this.Yd()},t}(),Wo=function(){function t(){this.rg=null}return t.prototype.getRecordingStatus=function(){return null===this.rg?{isRecording:!1}:this.rg},t.prototype.setRecordingStatus=function(t){this.rg=t},t}(),Go=function(){function t(t){this.D=t}return t.prototype.init=function(){var t=new Vu,i=new No,n=new Wo,r=new ko(this.D,t,n,i),s=new dh,e=new Ro(s,r),u=new To(e);u.init();var h=new Oh,o=new uo(this.D),c=new sr,f=new Ph(c,o,this.D),a=new Dh(c,o,this.D),v=new Ch(f,a),l=new xo(h,v,this.D,r);l.init(),i.addListeners(l),t.addListeners(u,l),t.emitInitTracking(),new Jo(i,t,this.D,r,n,s).start()},t}(),Bo=function(){function t(t,i,n){this.D=t,this.vt=i,this.j=n}return t.prototype.start=function(){var t,i;if(!window.UXAnalytics){var n=new Xt(this.vt,this.D);n.init();var r=new ri(this.D,n);if(this.vt.isTopWindowTracker()&&r.canTrack()){if((null===(t=window.CSProtectnativeFunctionsLogs)||void 0===t?void 0:t.Warning)&&J.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(i=window.CSProtectnativeFunctionsLogs)||void 0===i?void 0:i.Critical)return void J.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new Ao(this.D,n,this.j).init()}else if(!this.vt.isTopWindowTracker()&&r.canTrackInChild()){new Go(this.D).init()}window.UXAnalytics={},!window.CSFrameCommunication&&bo.isActivable()&&(window.CSFrameCommunication=bo,bo.waitForConnection())}},ot([Yi("main.start"),W("main.start")],t.prototype,"start",null),t}();try{(null===(Eo=window.performance)||void 0===Eo?void 0:Eo.mark)&&window.performance.mark("cs-start-tag");var Ko=new lt(window.CS_CONF);window._uxa=window._uxa||[],Ko.processOptionOverrides(window._uxa);var Yo=new dt(window,Ko);Yo.init();var Xo=new Bt;if(J.computeIsActive(Ko.validationRate),Yo.isTopWindowTracker()){var $o=new _t(Ko,Xo);J.setStrategy($o)}else{var Zo=new Gt(Ko);J.setStrategy(Zo)}void 0===So&&(So=50),Vi=J.isLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var i="isPerformanceMeasureSupported",n="".concat(i,"_a");return performance.mark(n),void 0!==performance.measure(i,n)}(),Vi&&(Hi=So),new Bo(Ko,Yo,Xo).start()}catch(t){}}();